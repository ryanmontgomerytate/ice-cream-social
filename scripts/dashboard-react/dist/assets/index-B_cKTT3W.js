(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=r(l);fetch(l.href,a)}})();function hp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tu={exports:{}},Il={},ru={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ws=Symbol.for("react.element"),gp=Symbol.for("react.portal"),xp=Symbol.for("react.fragment"),yp=Symbol.for("react.strict_mode"),vp=Symbol.for("react.profiler"),wp=Symbol.for("react.provider"),jp=Symbol.for("react.context"),bp=Symbol.for("react.forward_ref"),kp=Symbol.for("react.suspense"),Sp=Symbol.for("react.memo"),_p=Symbol.for("react.lazy"),Oo=Symbol.iterator;function Np(e){return e===null||typeof e!="object"?null:(e=Oo&&e[Oo]||e["@@iterator"],typeof e=="function"?e:null)}var nu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},su=Object.assign,lu={};function wn(e,t,r){this.props=e,this.context=t,this.refs=lu,this.updater=r||nu}wn.prototype.isReactComponent={};wn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function au(){}au.prototype=wn.prototype;function Ii(e,t,r){this.props=e,this.context=t,this.refs=lu,this.updater=r||nu}var Ui=Ii.prototype=new au;Ui.constructor=Ii;su(Ui,wn.prototype);Ui.isPureReactComponent=!0;var Io=Array.isArray,iu=Object.prototype.hasOwnProperty,Vi={current:null},ou={key:!0,ref:!0,__self:!0,__source:!0};function cu(e,t,r){var s,l={},a=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)iu.call(t,s)&&!ou.hasOwnProperty(s)&&(l[s]=t[s]);var o=arguments.length-2;if(o===1)l.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];l.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)l[s]===void 0&&(l[s]=o[s]);return{$$typeof:ws,type:e,key:a,ref:i,props:l,_owner:Vi.current}}function Ep(e,t){return{$$typeof:ws,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bi(e){return typeof e=="object"&&e!==null&&e.$$typeof===ws}function Cp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Uo=/\/+/g;function ha(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Cp(""+e.key):t.toString(36)}function nl(e,t,r,s,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ws:case gp:i=!0}}if(i)return i=e,l=l(i),e=s===""?"."+ha(i,0):s,Io(l)?(r="",e!=null&&(r=e.replace(Uo,"$&/")+"/"),nl(l,t,r,"",function(u){return u})):l!=null&&(Bi(l)&&(l=Ep(l,r+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(Uo,"$&/")+"/")+e)),t.push(l)),1;if(i=0,s=s===""?".":s+":",Io(e))for(var o=0;o<e.length;o++){a=e[o];var c=s+ha(a,o);i+=nl(a,t,r,c,l)}else if(c=Np(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=s+ha(a,o++),i+=nl(a,t,r,c,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Is(e,t,r){if(e==null)return e;var s=[],l=0;return nl(e,s,"","",function(a){return t.call(r,a,l++)}),s}function Tp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var He={current:null},sl={transition:null},Pp={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:sl,ReactCurrentOwner:Vi};function uu(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Is,forEach:function(e,t,r){Is(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Is(e,function(){t++}),t},toArray:function(e){return Is(e,function(t){return t})||[]},only:function(e){if(!Bi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=wn;ae.Fragment=xp;ae.Profiler=vp;ae.PureComponent=Ii;ae.StrictMode=yp;ae.Suspense=kp;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pp;ae.act=uu;ae.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=su({},e.props),l=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=Vi.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)iu.call(t,c)&&!ou.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:ws,type:e.type,key:l,ref:a,props:s,_owner:i}};ae.createContext=function(e){return e={$$typeof:jp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wp,_context:e},e.Consumer=e};ae.createElement=cu;ae.createFactory=function(e){var t=cu.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:bp,render:e}};ae.isValidElement=Bi;ae.lazy=function(e){return{$$typeof:_p,_payload:{_status:-1,_result:e},_init:Tp}};ae.memo=function(e,t){return{$$typeof:Sp,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=sl.transition;sl.transition={};try{e()}finally{sl.transition=t}};ae.unstable_act=uu;ae.useCallback=function(e,t){return He.current.useCallback(e,t)};ae.useContext=function(e){return He.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return He.current.useDeferredValue(e)};ae.useEffect=function(e,t){return He.current.useEffect(e,t)};ae.useId=function(){return He.current.useId()};ae.useImperativeHandle=function(e,t,r){return He.current.useImperativeHandle(e,t,r)};ae.useInsertionEffect=function(e,t){return He.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return He.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return He.current.useMemo(e,t)};ae.useReducer=function(e,t,r){return He.current.useReducer(e,t,r)};ae.useRef=function(e){return He.current.useRef(e)};ae.useState=function(e){return He.current.useState(e)};ae.useSyncExternalStore=function(e,t,r){return He.current.useSyncExternalStore(e,t,r)};ae.useTransition=function(){return He.current.useTransition()};ae.version="18.3.1";ru.exports=ae;var m=ru.exports;const Lp=hp(m);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p=m,zp=Symbol.for("react.element"),Ap=Symbol.for("react.fragment"),Fp=Object.prototype.hasOwnProperty,Dp=$p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rp={key:!0,ref:!0,__self:!0,__source:!0};function du(e,t,r){var s,l={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)Fp.call(t,s)&&!Rp.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)l[s]===void 0&&(l[s]=t[s]);return{$$typeof:zp,type:e,key:a,ref:i,props:l,_owner:Dp.current}}Il.Fragment=Ap;Il.jsx=du;Il.jsxs=du;tu.exports=Il;var n=tu.exports,Ka={},pu={exports:{}},at={},mu={exports:{}},fu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,H){var W=A.length;A.push(H);e:for(;0<W;){var V=W-1>>>1,q=A[V];if(0<l(q,H))A[V]=H,A[W]=q,W=V;else break e}}function r(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var H=A[0],W=A.pop();if(W!==H){A[0]=W;e:for(var V=0,q=A.length,de=q>>>1;V<de;){var oe=2*(V+1)-1,re=A[oe],le=oe+1,ot=A[le];if(0>l(re,W))le<q&&0>l(ot,re)?(A[V]=ot,A[le]=W,V=le):(A[V]=re,A[oe]=W,V=oe);else if(le<q&&0>l(ot,W))A[V]=ot,A[le]=W,V=le;else break e}}return H}function l(A,H){var W=A.sortIndex-H.sortIndex;return W!==0?W:A.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],b=1,y=null,h=3,g=!1,E=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var H=r(u);H!==null;){if(H.callback===null)s(u);else if(H.startTime<=A)s(u),H.sortIndex=H.expirationTime,t(c,H);else break;H=r(u)}}function C(A){if(T=!1,x(A),!E)if(r(c)!==null)E=!0,X(w);else{var H=r(u);H!==null&&P(C,H.startTime-A)}}function w(A,H){E=!1,T&&(T=!1,f($),$=-1),g=!0;var W=h;try{for(x(H),y=r(c);y!==null&&(!(y.expirationTime>H)||A&&!Z());){var V=y.callback;if(typeof V=="function"){y.callback=null,h=y.priorityLevel;var q=V(y.expirationTime<=H);H=e.unstable_now(),typeof q=="function"?y.callback=q:y===r(c)&&s(c),x(H)}else s(c);y=r(c)}if(y!==null)var de=!0;else{var oe=r(u);oe!==null&&P(C,oe.startTime-H),de=!1}return de}finally{y=null,h=W,g=!1}}var j=!1,F=null,$=-1,_=5,D=-1;function Z(){return!(e.unstable_now()-D<_)}function Y(){if(F!==null){var A=e.unstable_now();D=A;var H=!0;try{H=F(!0,A)}finally{H?v():(j=!1,F=null)}}else j=!1}var v;if(typeof d=="function")v=function(){d(Y)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,L=R.port2;R.port1.onmessage=Y,v=function(){L.postMessage(null)}}else v=function(){U(Y,0)};function X(A){F=A,j||(j=!0,v())}function P(A,H){$=U(function(){A(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){E||g||(E=!0,X(w))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var W=h;h=H;try{return A()}finally{h=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,H){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var W=h;h=A;try{return H()}finally{h=W}},e.unstable_scheduleCallback=function(A,H,W){var V=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?V+W:V):W=V,A){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=W+q,A={id:b++,callback:H,priorityLevel:A,startTime:W,expirationTime:q,sortIndex:-1},W>V?(A.sortIndex=W,t(u,A),r(c)===null&&A===r(u)&&(T?(f($),$=-1):T=!0,P(C,W-V))):(A.sortIndex=q,t(c,A),E||g||(E=!0,X(w))),A},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(A){var H=h;return function(){var W=h;h=H;try{return A.apply(this,arguments)}finally{h=W}}}})(fu);mu.exports=fu;var Mp=mu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op=m,lt=Mp;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hu=new Set,ns={};function Ur(e,t){mn(e,t),mn(e+"Capture",t)}function mn(e,t){for(ns[e]=t,e=0;e<t.length;e++)hu.add(t[e])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ya=Object.prototype.hasOwnProperty,Ip=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vo={},Bo={};function Up(e){return Ya.call(Bo,e)?!0:Ya.call(Vo,e)?!1:Ip.test(e)?Bo[e]=!0:(Vo[e]=!0,!1)}function Vp(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Bp(e,t,r,s){if(t===null||typeof t>"u"||Vp(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ke(e,t,r,s,l,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Re[e]=new Ke(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Re[t]=new Ke(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Re[e]=new Ke(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Re[e]=new Ke(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Re[e]=new Ke(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Re[e]=new Ke(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Re[e]=new Ke(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Re[e]=new Ke(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Re[e]=new Ke(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qi=/[\-:]([a-z])/g;function Wi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qi,Wi);Re[t]=new Ke(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qi,Wi);Re[t]=new Ke(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qi,Wi);Re[t]=new Ke(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Re[e]=new Ke(e,1,!1,e.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Re[e]=new Ke(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hi(e,t,r,s){var l=Re.hasOwnProperty(t)?Re[t]:null;(l!==null?l.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Bp(t,r,l,s)&&(r=null),s||l===null?Up(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,s=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Ht=Op.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Us=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),Ki=Symbol.for("react.strict_mode"),Xa=Symbol.for("react.profiler"),gu=Symbol.for("react.provider"),xu=Symbol.for("react.context"),Yi=Symbol.for("react.forward_ref"),Ga=Symbol.for("react.suspense"),Ja=Symbol.for("react.suspense_list"),Xi=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),yu=Symbol.for("react.offscreen"),Qo=Symbol.iterator;function Fn(e){return e===null||typeof e!="object"?null:(e=Qo&&e[Qo]||e["@@iterator"],typeof e=="function"?e:null)}var be=Object.assign,ga;function Qn(e){if(ga===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ga=t&&t[1]||""}return`
`+ga+e}var xa=!1;function ya(e,t){if(!e||xa)return"";xa=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var l=u.stack.split(`
`),a=s.stack.split(`
`),i=l.length-1,o=a.length-1;1<=i&&0<=o&&l[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==a[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==a[o]){var c=`
`+l[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{xa=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Qn(e):""}function Qp(e){switch(e.tag){case 5:return Qn(e.type);case 16:return Qn("Lazy");case 13:return Qn("Suspense");case 19:return Qn("SuspenseList");case 0:case 2:case 15:return e=ya(e.type,!1),e;case 11:return e=ya(e.type.render,!1),e;case 1:return e=ya(e.type,!0),e;default:return""}}function qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xr:return"Fragment";case Yr:return"Portal";case Xa:return"Profiler";case Ki:return"StrictMode";case Ga:return"Suspense";case Ja:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xu:return(e.displayName||"Context")+".Consumer";case gu:return(e._context.displayName||"Context")+".Provider";case Yi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xi:return t=e.displayName||null,t!==null?t:qa(e.type)||"Memo";case Jt:t=e._payload,e=e._init;try{return qa(e(t))}catch{}}return null}function Wp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qa(t);case 8:return t===Ki?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function dr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hp(e){var t=vu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){s=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vs(e){e._valueTracker||(e._valueTracker=Hp(e))}function wu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=vu(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function gl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Za(e,t){var r=t.checked;return be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Wo(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=dr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ju(e,t){t=t.checked,t!=null&&Hi(e,"checked",t,!1)}function ei(e,t){ju(e,t);var r=dr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ti(e,t.type,r):t.hasOwnProperty("defaultValue")&&ti(e,t.type,dr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ho(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ti(e,t,r){(t!=="number"||gl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Wn=Array.isArray;function an(e,t,r,s){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&s&&(e[r].defaultSelected=!0)}else{for(r=""+dr(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ri(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ko(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(I(92));if(Wn(r)){if(1<r.length)throw Error(I(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:dr(r)}}function bu(e,t){var r=dr(t.value),s=dr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Yo(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ku(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ni(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ku(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bs,Su=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bs=Bs||document.createElement("div"),Bs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ss(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Yn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kp=["Webkit","ms","Moz","O"];Object.keys(Yn).forEach(function(e){Kp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yn[t]=Yn[e]})});function _u(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Yn.hasOwnProperty(e)&&Yn[e]?(""+t).trim():t+"px"}function Nu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,l=_u(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,l):e[r]=l}}var Yp=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function si(e,t){if(t){if(Yp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function li(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=null;function Gi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ii=null,on=null,cn=null;function Xo(e){if(e=ks(e)){if(typeof ii!="function")throw Error(I(280));var t=e.stateNode;t&&(t=Wl(t),ii(e.stateNode,e.type,t))}}function Eu(e){on?cn?cn.push(e):cn=[e]:on=e}function Cu(){if(on){var e=on,t=cn;if(cn=on=null,Xo(e),t)for(e=0;e<t.length;e++)Xo(t[e])}}function Tu(e,t){return e(t)}function Pu(){}var va=!1;function Lu(e,t,r){if(va)return e(t,r);va=!0;try{return Tu(e,t,r)}finally{va=!1,(on!==null||cn!==null)&&(Pu(),Cu())}}function ls(e,t){var r=e.stateNode;if(r===null)return null;var s=Wl(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(I(231,t,typeof r));return r}var oi=!1;if(Vt)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){oi=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{oi=!1}function Xp(e,t,r,s,l,a,i,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(b){this.onError(b)}}var Xn=!1,xl=null,yl=!1,ci=null,Gp={onError:function(e){Xn=!0,xl=e}};function Jp(e,t,r,s,l,a,i,o,c){Xn=!1,xl=null,Xp.apply(Gp,arguments)}function qp(e,t,r,s,l,a,i,o,c){if(Jp.apply(this,arguments),Xn){if(Xn){var u=xl;Xn=!1,xl=null}else throw Error(I(198));yl||(yl=!0,ci=u)}}function Vr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Go(e){if(Vr(e)!==e)throw Error(I(188))}function Zp(e){var t=e.alternate;if(!t){if(t=Vr(e),t===null)throw Error(I(188));return t!==e?null:e}for(var r=e,s=t;;){var l=r.return;if(l===null)break;var a=l.alternate;if(a===null){if(s=l.return,s!==null){r=s;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===r)return Go(l),e;if(a===s)return Go(l),t;a=a.sibling}throw Error(I(188))}if(r.return!==s.return)r=l,s=a;else{for(var i=!1,o=l.child;o;){if(o===r){i=!0,r=l,s=a;break}if(o===s){i=!0,s=l,r=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===r){i=!0,r=a,s=l;break}if(o===s){i=!0,s=a,r=l;break}o=o.sibling}if(!i)throw Error(I(189))}}if(r.alternate!==s)throw Error(I(190))}if(r.tag!==3)throw Error(I(188));return r.stateNode.current===r?e:t}function zu(e){return e=Zp(e),e!==null?Au(e):null}function Au(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Au(e);if(t!==null)return t;e=e.sibling}return null}var Fu=lt.unstable_scheduleCallback,Jo=lt.unstable_cancelCallback,em=lt.unstable_shouldYield,tm=lt.unstable_requestPaint,Ne=lt.unstable_now,rm=lt.unstable_getCurrentPriorityLevel,Ji=lt.unstable_ImmediatePriority,Du=lt.unstable_UserBlockingPriority,vl=lt.unstable_NormalPriority,nm=lt.unstable_LowPriority,Ru=lt.unstable_IdlePriority,Ul=null,Lt=null;function sm(e){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Ul,e,void 0,(e.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:im,lm=Math.log,am=Math.LN2;function im(e){return e>>>=0,e===0?32:31-(lm(e)/am|0)|0}var Qs=64,Ws=4194304;function Hn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wl(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,l=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~l;o!==0?s=Hn(o):(a&=i,a!==0&&(s=Hn(a)))}else i=r&~l,i!==0?s=Hn(i):a!==0&&(s=Hn(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&l)&&(l=s&-s,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-kt(t),l=1<<r,s|=e[r],t&=~l;return s}function om(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cm(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-kt(a),o=1<<i,c=l[i];c===-1?(!(o&r)||o&s)&&(l[i]=om(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function ui(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mu(){var e=Qs;return Qs<<=1,!(Qs&4194240)&&(Qs=64),e}function wa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function js(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kt(t),e[t]=r}function um(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-kt(r),a=1<<l;t[l]=0,s[l]=-1,e[l]=-1,r&=~a}}function qi(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-kt(r),l=1<<s;l&t|e[s]&t&&(e[s]|=t),r&=~l}}var ue=0;function Ou(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Iu,Zi,Uu,Vu,Bu,di=!1,Hs=[],nr=null,sr=null,lr=null,as=new Map,is=new Map,Zt=[],dm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qo(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":as.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":is.delete(t.pointerId)}}function Rn(e,t,r,s,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[l]},t!==null&&(t=ks(t),t!==null&&Zi(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function pm(e,t,r,s,l){switch(t){case"focusin":return nr=Rn(nr,e,t,r,s,l),!0;case"dragenter":return sr=Rn(sr,e,t,r,s,l),!0;case"mouseover":return lr=Rn(lr,e,t,r,s,l),!0;case"pointerover":var a=l.pointerId;return as.set(a,Rn(as.get(a)||null,e,t,r,s,l)),!0;case"gotpointercapture":return a=l.pointerId,is.set(a,Rn(is.get(a)||null,e,t,r,s,l)),!0}return!1}function Qu(e){var t=Lr(e.target);if(t!==null){var r=Vr(t);if(r!==null){if(t=r.tag,t===13){if(t=$u(r),t!==null){e.blockedOn=t,Bu(e.priority,function(){Uu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ll(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=pi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);ai=s,r.target.dispatchEvent(s),ai=null}else return t=ks(r),t!==null&&Zi(t),e.blockedOn=r,!1;t.shift()}return!0}function Zo(e,t,r){ll(e)&&r.delete(t)}function mm(){di=!1,nr!==null&&ll(nr)&&(nr=null),sr!==null&&ll(sr)&&(sr=null),lr!==null&&ll(lr)&&(lr=null),as.forEach(Zo),is.forEach(Zo)}function Mn(e,t){e.blockedOn===t&&(e.blockedOn=null,di||(di=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,mm)))}function os(e){function t(l){return Mn(l,e)}if(0<Hs.length){Mn(Hs[0],e);for(var r=1;r<Hs.length;r++){var s=Hs[r];s.blockedOn===e&&(s.blockedOn=null)}}for(nr!==null&&Mn(nr,e),sr!==null&&Mn(sr,e),lr!==null&&Mn(lr,e),as.forEach(t),is.forEach(t),r=0;r<Zt.length;r++)s=Zt[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Zt.length&&(r=Zt[0],r.blockedOn===null);)Qu(r),r.blockedOn===null&&Zt.shift()}var un=Ht.ReactCurrentBatchConfig,jl=!0;function fm(e,t,r,s){var l=ue,a=un.transition;un.transition=null;try{ue=1,eo(e,t,r,s)}finally{ue=l,un.transition=a}}function hm(e,t,r,s){var l=ue,a=un.transition;un.transition=null;try{ue=4,eo(e,t,r,s)}finally{ue=l,un.transition=a}}function eo(e,t,r,s){if(jl){var l=pi(e,t,r,s);if(l===null)Pa(e,t,s,bl,r),qo(e,s);else if(pm(l,e,t,r,s))s.stopPropagation();else if(qo(e,s),t&4&&-1<dm.indexOf(e)){for(;l!==null;){var a=ks(l);if(a!==null&&Iu(a),a=pi(e,t,r,s),a===null&&Pa(e,t,s,bl,r),a===l)break;l=a}l!==null&&s.stopPropagation()}else Pa(e,t,s,null,r)}}var bl=null;function pi(e,t,r,s){if(bl=null,e=Gi(s),e=Lr(e),e!==null)if(t=Vr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$u(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bl=e,null}function Wu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rm()){case Ji:return 1;case Du:return 4;case vl:case nm:return 16;case Ru:return 536870912;default:return 16}default:return 16}}var tr=null,to=null,al=null;function Hu(){if(al)return al;var e,t=to,r=t.length,s,l="value"in tr?tr.value:tr.textContent,a=l.length;for(e=0;e<r&&t[e]===l[e];e++);var i=r-e;for(s=1;s<=i&&t[r-s]===l[a-s];s++);return al=l.slice(e,1<s?1-s:void 0)}function il(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ks(){return!0}function ec(){return!1}function it(e){function t(r,s,l,a,i){this._reactName=r,this._targetInst=l,this.type=s,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ks:ec,this.isPropagationStopped=ec,this}return be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),t}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=it(jn),bs=be({},jn,{view:0,detail:0}),gm=it(bs),ja,ba,On,Vl=be({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:no,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==On&&(On&&e.type==="mousemove"?(ja=e.screenX-On.screenX,ba=e.screenY-On.screenY):ba=ja=0,On=e),ja)},movementY:function(e){return"movementY"in e?e.movementY:ba}}),tc=it(Vl),xm=be({},Vl,{dataTransfer:0}),ym=it(xm),vm=be({},bs,{relatedTarget:0}),ka=it(vm),wm=be({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),jm=it(wm),bm=be({},jn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),km=it(bm),Sm=be({},jn,{data:0}),rc=it(Sm),_m={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Em={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Em[e])?!!t[e]:!1}function no(){return Cm}var Tm=be({},bs,{key:function(e){if(e.key){var t=_m[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=il(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:no,charCode:function(e){return e.type==="keypress"?il(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?il(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pm=it(Tm),Lm=be({},Vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=it(Lm),$m=be({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:no}),zm=it($m),Am=be({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fm=it(Am),Dm=be({},Vl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rm=it(Dm),Mm=[9,13,27,32],so=Vt&&"CompositionEvent"in window,Gn=null;Vt&&"documentMode"in document&&(Gn=document.documentMode);var Om=Vt&&"TextEvent"in window&&!Gn,Ku=Vt&&(!so||Gn&&8<Gn&&11>=Gn),sc=" ",lc=!1;function Yu(e,t){switch(e){case"keyup":return Mm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gr=!1;function Im(e,t){switch(e){case"compositionend":return Xu(t);case"keypress":return t.which!==32?null:(lc=!0,sc);case"textInput":return e=t.data,e===sc&&lc?null:e;default:return null}}function Um(e,t){if(Gr)return e==="compositionend"||!so&&Yu(e,t)?(e=Hu(),al=to=tr=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ku&&t.locale!=="ko"?null:t.data;default:return null}}var Vm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vm[e.type]:t==="textarea"}function Gu(e,t,r,s){Eu(s),t=kl(t,"onChange"),0<t.length&&(r=new ro("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Jn=null,cs=null;function Bm(e){id(e,0)}function Bl(e){var t=Zr(e);if(wu(t))return e}function Qm(e,t){if(e==="change")return t}var Ju=!1;if(Vt){var Sa;if(Vt){var _a="oninput"in document;if(!_a){var ic=document.createElement("div");ic.setAttribute("oninput","return;"),_a=typeof ic.oninput=="function"}Sa=_a}else Sa=!1;Ju=Sa&&(!document.documentMode||9<document.documentMode)}function oc(){Jn&&(Jn.detachEvent("onpropertychange",qu),cs=Jn=null)}function qu(e){if(e.propertyName==="value"&&Bl(cs)){var t=[];Gu(t,cs,e,Gi(e)),Lu(Bm,t)}}function Wm(e,t,r){e==="focusin"?(oc(),Jn=t,cs=r,Jn.attachEvent("onpropertychange",qu)):e==="focusout"&&oc()}function Hm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bl(cs)}function Km(e,t){if(e==="click")return Bl(t)}function Ym(e,t){if(e==="input"||e==="change")return Bl(t)}function Xm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:Xm;function us(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var l=r[s];if(!Ya.call(t,l)||!_t(e[l],t[l]))return!1}return!0}function cc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uc(e,t){var r=cc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cc(r)}}function Zu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ed(){for(var e=window,t=gl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=gl(e.document)}return t}function lo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gm(e){var t=ed(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Zu(r.ownerDocument.documentElement,r)){if(s!==null&&lo(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,a=Math.min(s.start,l);s=s.end===void 0?a:Math.min(s.end,l),!e.extend&&a>s&&(l=s,s=a,a=l),l=uc(r,a);var i=uc(r,s);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jm=Vt&&"documentMode"in document&&11>=document.documentMode,Jr=null,mi=null,qn=null,fi=!1;function dc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;fi||Jr==null||Jr!==gl(s)||(s=Jr,"selectionStart"in s&&lo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),qn&&us(qn,s)||(qn=s,s=kl(mi,"onSelect"),0<s.length&&(t=new ro("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Jr)))}function Ys(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var qr={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionend:Ys("Transition","TransitionEnd")},Na={},td={};Vt&&(td=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function Ql(e){if(Na[e])return Na[e];if(!qr[e])return e;var t=qr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in td)return Na[e]=t[r];return e}var rd=Ql("animationend"),nd=Ql("animationiteration"),sd=Ql("animationstart"),ld=Ql("transitionend"),ad=new Map,pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(e,t){ad.set(e,t),Ur(t,[e])}for(var Ea=0;Ea<pc.length;Ea++){var Ca=pc[Ea],qm=Ca.toLowerCase(),Zm=Ca[0].toUpperCase()+Ca.slice(1);mr(qm,"on"+Zm)}mr(rd,"onAnimationEnd");mr(nd,"onAnimationIteration");mr(sd,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(ld,"onTransitionEnd");mn("onMouseEnter",["mouseout","mouseover"]);mn("onMouseLeave",["mouseout","mouseover"]);mn("onPointerEnter",["pointerout","pointerover"]);mn("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kn));function mc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,qp(s,t,void 0,e),e.currentTarget=null}function id(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],l=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&l.isPropagationStopped())break e;mc(l,o,u),a=c}else for(i=0;i<s.length;i++){if(o=s[i],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&l.isPropagationStopped())break e;mc(l,o,u),a=c}}}if(yl)throw e=ci,yl=!1,ci=null,e}function he(e,t){var r=t[vi];r===void 0&&(r=t[vi]=new Set);var s=e+"__bubble";r.has(s)||(od(t,e,2,!1),r.add(s))}function Ta(e,t,r){var s=0;t&&(s|=4),od(r,e,s,t)}var Xs="_reactListening"+Math.random().toString(36).slice(2);function ds(e){if(!e[Xs]){e[Xs]=!0,hu.forEach(function(r){r!=="selectionchange"&&(e0.has(r)||Ta(r,!1,e),Ta(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xs]||(t[Xs]=!0,Ta("selectionchange",!1,t))}}function od(e,t,r,s){switch(Wu(t)){case 1:var l=fm;break;case 4:l=hm;break;default:l=eo}r=l.bind(null,t,r,e),l=void 0,!oi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function Pa(e,t,r,s,l){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var o=s.stateNode.containerInfo;if(o===l||o.nodeType===8&&o.parentNode===l)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===l||c.nodeType===8&&c.parentNode===l))return;i=i.return}for(;o!==null;){if(i=Lr(o),i===null)return;if(c=i.tag,c===5||c===6){s=a=i;continue e}o=o.parentNode}}s=s.return}Lu(function(){var u=a,b=Gi(r),y=[];e:{var h=ad.get(e);if(h!==void 0){var g=ro,E=e;switch(e){case"keypress":if(il(r)===0)break e;case"keydown":case"keyup":g=Pm;break;case"focusin":E="focus",g=ka;break;case"focusout":E="blur",g=ka;break;case"beforeblur":case"afterblur":g=ka;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=zm;break;case rd:case nd:case sd:g=jm;break;case ld:g=Fm;break;case"scroll":g=gm;break;case"wheel":g=Rm;break;case"copy":case"cut":case"paste":g=km;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=nc}var T=(t&4)!==0,U=!T&&e==="scroll",f=T?h!==null?h+"Capture":null:h;T=[];for(var d=u,x;d!==null;){x=d;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,f!==null&&(C=ls(d,f),C!=null&&T.push(ps(d,C,x)))),U)break;d=d.return}0<T.length&&(h=new g(h,E,null,r,b),y.push({event:h,listeners:T}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&r!==ai&&(E=r.relatedTarget||r.fromElement)&&(Lr(E)||E[Bt]))break e;if((g||h)&&(h=b.window===b?b:(h=b.ownerDocument)?h.defaultView||h.parentWindow:window,g?(E=r.relatedTarget||r.toElement,g=u,E=E?Lr(E):null,E!==null&&(U=Vr(E),E!==U||E.tag!==5&&E.tag!==6)&&(E=null)):(g=null,E=u),g!==E)){if(T=tc,C="onMouseLeave",f="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(T=nc,C="onPointerLeave",f="onPointerEnter",d="pointer"),U=g==null?h:Zr(g),x=E==null?h:Zr(E),h=new T(C,d+"leave",g,r,b),h.target=U,h.relatedTarget=x,C=null,Lr(b)===u&&(T=new T(f,d+"enter",E,r,b),T.target=x,T.relatedTarget=U,C=T),U=C,g&&E)t:{for(T=g,f=E,d=0,x=T;x;x=Hr(x))d++;for(x=0,C=f;C;C=Hr(C))x++;for(;0<d-x;)T=Hr(T),d--;for(;0<x-d;)f=Hr(f),x--;for(;d--;){if(T===f||f!==null&&T===f.alternate)break t;T=Hr(T),f=Hr(f)}T=null}else T=null;g!==null&&fc(y,h,g,T,!1),E!==null&&U!==null&&fc(y,U,E,T,!0)}}e:{if(h=u?Zr(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var w=Qm;else if(ac(h))if(Ju)w=Ym;else{w=Hm;var j=Wm}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=Km);if(w&&(w=w(e,u))){Gu(y,w,r,b);break e}j&&j(e,h,u),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&ti(h,"number",h.value)}switch(j=u?Zr(u):window,e){case"focusin":(ac(j)||j.contentEditable==="true")&&(Jr=j,mi=u,qn=null);break;case"focusout":qn=mi=Jr=null;break;case"mousedown":fi=!0;break;case"contextmenu":case"mouseup":case"dragend":fi=!1,dc(y,r,b);break;case"selectionchange":if(Jm)break;case"keydown":case"keyup":dc(y,r,b)}var F;if(so)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Gr?Yu(e,r)&&($="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&($="onCompositionStart");$&&(Ku&&r.locale!=="ko"&&(Gr||$!=="onCompositionStart"?$==="onCompositionEnd"&&Gr&&(F=Hu()):(tr=b,to="value"in tr?tr.value:tr.textContent,Gr=!0)),j=kl(u,$),0<j.length&&($=new rc($,e,null,r,b),y.push({event:$,listeners:j}),F?$.data=F:(F=Xu(r),F!==null&&($.data=F)))),(F=Om?Im(e,r):Um(e,r))&&(u=kl(u,"onBeforeInput"),0<u.length&&(b=new rc("onBeforeInput","beforeinput",null,r,b),y.push({event:b,listeners:u}),b.data=F))}id(y,t)})}function ps(e,t,r){return{instance:e,listener:t,currentTarget:r}}function kl(e,t){for(var r=t+"Capture",s=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=ls(e,r),a!=null&&s.unshift(ps(e,a,l)),a=ls(e,t),a!=null&&s.push(ps(e,a,l))),e=e.return}return s}function Hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function fc(e,t,r,s,l){for(var a=t._reactName,i=[];r!==null&&r!==s;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&u!==null&&(o=u,l?(c=ls(r,a),c!=null&&i.unshift(ps(r,c,o))):l||(c=ls(r,a),c!=null&&i.push(ps(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var t0=/\r\n?/g,r0=/\u0000|\uFFFD/g;function hc(e){return(typeof e=="string"?e:""+e).replace(t0,`
`).replace(r0,"")}function Gs(e,t,r){if(t=hc(t),hc(e)!==t&&r)throw Error(I(425))}function Sl(){}var hi=null,gi=null;function xi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yi=typeof setTimeout=="function"?setTimeout:void 0,n0=typeof clearTimeout=="function"?clearTimeout:void 0,gc=typeof Promise=="function"?Promise:void 0,s0=typeof queueMicrotask=="function"?queueMicrotask:typeof gc<"u"?function(e){return gc.resolve(null).then(e).catch(l0)}:yi;function l0(e){setTimeout(function(){throw e})}function La(e,t){var r=t,s=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(s===0){e.removeChild(l),os(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=l}while(r);os(t)}function ar(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var bn=Math.random().toString(36).slice(2),Pt="__reactFiber$"+bn,ms="__reactProps$"+bn,Bt="__reactContainer$"+bn,vi="__reactEvents$"+bn,a0="__reactListeners$"+bn,i0="__reactHandles$"+bn;function Lr(e){var t=e[Pt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Bt]||r[Pt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=xc(e);e!==null;){if(r=e[Pt])return r;e=xc(e)}return t}e=r,r=e.parentNode}return null}function ks(e){return e=e[Pt]||e[Bt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Wl(e){return e[ms]||null}var wi=[],en=-1;function fr(e){return{current:e}}function xe(e){0>en||(e.current=wi[en],wi[en]=null,en--)}function fe(e,t){en++,wi[en]=e.current,e.current=t}var pr={},Ue=fr(pr),Je=fr(!1),Dr=pr;function fn(e,t){var r=e.type.contextTypes;if(!r)return pr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in r)l[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function qe(e){return e=e.childContextTypes,e!=null}function _l(){xe(Je),xe(Ue)}function yc(e,t,r){if(Ue.current!==pr)throw Error(I(168));fe(Ue,t),fe(Je,r)}function cd(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var l in s)if(!(l in t))throw Error(I(108,Wp(e)||"Unknown",l));return be({},r,s)}function Nl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pr,Dr=Ue.current,fe(Ue,e),fe(Je,Je.current),!0}function vc(e,t,r){var s=e.stateNode;if(!s)throw Error(I(169));r?(e=cd(e,t,Dr),s.__reactInternalMemoizedMergedChildContext=e,xe(Je),xe(Ue),fe(Ue,e)):xe(Je),fe(Je,r)}var Mt=null,Hl=!1,$a=!1;function ud(e){Mt===null?Mt=[e]:Mt.push(e)}function o0(e){Hl=!0,ud(e)}function hr(){if(!$a&&Mt!==null){$a=!0;var e=0,t=ue;try{var r=Mt;for(ue=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Mt=null,Hl=!1}catch(l){throw Mt!==null&&(Mt=Mt.slice(e+1)),Fu(Ji,hr),l}finally{ue=t,$a=!1}}return null}var tn=[],rn=0,El=null,Cl=0,dt=[],pt=0,Rr=null,Ot=1,It="";function Tr(e,t){tn[rn++]=Cl,tn[rn++]=El,El=e,Cl=t}function dd(e,t,r){dt[pt++]=Ot,dt[pt++]=It,dt[pt++]=Rr,Rr=e;var s=Ot;e=It;var l=32-kt(s)-1;s&=~(1<<l),r+=1;var a=32-kt(t)+l;if(30<a){var i=l-l%5;a=(s&(1<<i)-1).toString(32),s>>=i,l-=i,Ot=1<<32-kt(t)+l|r<<l|s,It=a+e}else Ot=1<<a|r<<l|s,It=e}function ao(e){e.return!==null&&(Tr(e,1),dd(e,1,0))}function io(e){for(;e===El;)El=tn[--rn],tn[rn]=null,Cl=tn[--rn],tn[rn]=null;for(;e===Rr;)Rr=dt[--pt],dt[pt]=null,It=dt[--pt],dt[pt]=null,Ot=dt[--pt],dt[pt]=null}var st=null,nt=null,ve=!1,jt=null;function pd(e,t){var r=mt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function wc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,st=e,nt=ar(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,st=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Rr!==null?{id:Ot,overflow:It}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=mt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,st=e,nt=null,!0):!1;default:return!1}}function ji(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bi(e){if(ve){var t=nt;if(t){var r=t;if(!wc(e,t)){if(ji(e))throw Error(I(418));t=ar(r.nextSibling);var s=st;t&&wc(e,t)?pd(s,r):(e.flags=e.flags&-4097|2,ve=!1,st=e)}}else{if(ji(e))throw Error(I(418));e.flags=e.flags&-4097|2,ve=!1,st=e}}}function jc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;st=e}function Js(e){if(e!==st)return!1;if(!ve)return jc(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xi(e.type,e.memoizedProps)),t&&(t=nt)){if(ji(e))throw md(),Error(I(418));for(;t;)pd(e,t),t=ar(t.nextSibling)}if(jc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){nt=ar(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=st?ar(e.stateNode.nextSibling):null;return!0}function md(){for(var e=nt;e;)e=ar(e.nextSibling)}function hn(){nt=st=null,ve=!1}function oo(e){jt===null?jt=[e]:jt.push(e)}var c0=Ht.ReactCurrentBatchConfig;function In(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(I(309));var s=r.stateNode}if(!s)throw Error(I(147,e));var l=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var o=l.refs;i===null?delete o[a]:o[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(I(284));if(!r._owner)throw Error(I(290,e))}return e}function qs(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bc(e){var t=e._init;return t(e._payload)}function fd(e){function t(f,d){if(e){var x=f.deletions;x===null?(f.deletions=[d],f.flags|=16):x.push(d)}}function r(f,d){if(!e)return null;for(;d!==null;)t(f,d),d=d.sibling;return null}function s(f,d){for(f=new Map;d!==null;)d.key!==null?f.set(d.key,d):f.set(d.index,d),d=d.sibling;return f}function l(f,d){return f=ur(f,d),f.index=0,f.sibling=null,f}function a(f,d,x){return f.index=x,e?(x=f.alternate,x!==null?(x=x.index,x<d?(f.flags|=2,d):x):(f.flags|=2,d)):(f.flags|=1048576,d)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function o(f,d,x,C){return d===null||d.tag!==6?(d=Oa(x,f.mode,C),d.return=f,d):(d=l(d,x),d.return=f,d)}function c(f,d,x,C){var w=x.type;return w===Xr?b(f,d,x.props.children,C,x.key):d!==null&&(d.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Jt&&bc(w)===d.type)?(C=l(d,x.props),C.ref=In(f,d,x),C.return=f,C):(C=fl(x.type,x.key,x.props,null,f.mode,C),C.ref=In(f,d,x),C.return=f,C)}function u(f,d,x,C){return d===null||d.tag!==4||d.stateNode.containerInfo!==x.containerInfo||d.stateNode.implementation!==x.implementation?(d=Ia(x,f.mode,C),d.return=f,d):(d=l(d,x.children||[]),d.return=f,d)}function b(f,d,x,C,w){return d===null||d.tag!==7?(d=Fr(x,f.mode,C,w),d.return=f,d):(d=l(d,x),d.return=f,d)}function y(f,d,x){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Oa(""+d,f.mode,x),d.return=f,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Us:return x=fl(d.type,d.key,d.props,null,f.mode,x),x.ref=In(f,null,d),x.return=f,x;case Yr:return d=Ia(d,f.mode,x),d.return=f,d;case Jt:var C=d._init;return y(f,C(d._payload),x)}if(Wn(d)||Fn(d))return d=Fr(d,f.mode,x,null),d.return=f,d;qs(f,d)}return null}function h(f,d,x,C){var w=d!==null?d.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:o(f,d,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Us:return x.key===w?c(f,d,x,C):null;case Yr:return x.key===w?u(f,d,x,C):null;case Jt:return w=x._init,h(f,d,w(x._payload),C)}if(Wn(x)||Fn(x))return w!==null?null:b(f,d,x,C,null);qs(f,x)}return null}function g(f,d,x,C,w){if(typeof C=="string"&&C!==""||typeof C=="number")return f=f.get(x)||null,o(d,f,""+C,w);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Us:return f=f.get(C.key===null?x:C.key)||null,c(d,f,C,w);case Yr:return f=f.get(C.key===null?x:C.key)||null,u(d,f,C,w);case Jt:var j=C._init;return g(f,d,x,j(C._payload),w)}if(Wn(C)||Fn(C))return f=f.get(x)||null,b(d,f,C,w,null);qs(d,C)}return null}function E(f,d,x,C){for(var w=null,j=null,F=d,$=d=0,_=null;F!==null&&$<x.length;$++){F.index>$?(_=F,F=null):_=F.sibling;var D=h(f,F,x[$],C);if(D===null){F===null&&(F=_);break}e&&F&&D.alternate===null&&t(f,F),d=a(D,d,$),j===null?w=D:j.sibling=D,j=D,F=_}if($===x.length)return r(f,F),ve&&Tr(f,$),w;if(F===null){for(;$<x.length;$++)F=y(f,x[$],C),F!==null&&(d=a(F,d,$),j===null?w=F:j.sibling=F,j=F);return ve&&Tr(f,$),w}for(F=s(f,F);$<x.length;$++)_=g(F,f,$,x[$],C),_!==null&&(e&&_.alternate!==null&&F.delete(_.key===null?$:_.key),d=a(_,d,$),j===null?w=_:j.sibling=_,j=_);return e&&F.forEach(function(Z){return t(f,Z)}),ve&&Tr(f,$),w}function T(f,d,x,C){var w=Fn(x);if(typeof w!="function")throw Error(I(150));if(x=w.call(x),x==null)throw Error(I(151));for(var j=w=null,F=d,$=d=0,_=null,D=x.next();F!==null&&!D.done;$++,D=x.next()){F.index>$?(_=F,F=null):_=F.sibling;var Z=h(f,F,D.value,C);if(Z===null){F===null&&(F=_);break}e&&F&&Z.alternate===null&&t(f,F),d=a(Z,d,$),j===null?w=Z:j.sibling=Z,j=Z,F=_}if(D.done)return r(f,F),ve&&Tr(f,$),w;if(F===null){for(;!D.done;$++,D=x.next())D=y(f,D.value,C),D!==null&&(d=a(D,d,$),j===null?w=D:j.sibling=D,j=D);return ve&&Tr(f,$),w}for(F=s(f,F);!D.done;$++,D=x.next())D=g(F,f,$,D.value,C),D!==null&&(e&&D.alternate!==null&&F.delete(D.key===null?$:D.key),d=a(D,d,$),j===null?w=D:j.sibling=D,j=D);return e&&F.forEach(function(Y){return t(f,Y)}),ve&&Tr(f,$),w}function U(f,d,x,C){if(typeof x=="object"&&x!==null&&x.type===Xr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Us:e:{for(var w=x.key,j=d;j!==null;){if(j.key===w){if(w=x.type,w===Xr){if(j.tag===7){r(f,j.sibling),d=l(j,x.props.children),d.return=f,f=d;break e}}else if(j.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Jt&&bc(w)===j.type){r(f,j.sibling),d=l(j,x.props),d.ref=In(f,j,x),d.return=f,f=d;break e}r(f,j);break}else t(f,j);j=j.sibling}x.type===Xr?(d=Fr(x.props.children,f.mode,C,x.key),d.return=f,f=d):(C=fl(x.type,x.key,x.props,null,f.mode,C),C.ref=In(f,d,x),C.return=f,f=C)}return i(f);case Yr:e:{for(j=x.key;d!==null;){if(d.key===j)if(d.tag===4&&d.stateNode.containerInfo===x.containerInfo&&d.stateNode.implementation===x.implementation){r(f,d.sibling),d=l(d,x.children||[]),d.return=f,f=d;break e}else{r(f,d);break}else t(f,d);d=d.sibling}d=Ia(x,f.mode,C),d.return=f,f=d}return i(f);case Jt:return j=x._init,U(f,d,j(x._payload),C)}if(Wn(x))return E(f,d,x,C);if(Fn(x))return T(f,d,x,C);qs(f,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,d!==null&&d.tag===6?(r(f,d.sibling),d=l(d,x),d.return=f,f=d):(r(f,d),d=Oa(x,f.mode,C),d.return=f,f=d),i(f)):r(f,d)}return U}var gn=fd(!0),hd=fd(!1),Tl=fr(null),Pl=null,nn=null,co=null;function uo(){co=nn=Pl=null}function po(e){var t=Tl.current;xe(Tl),e._currentValue=t}function ki(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function dn(e,t){Pl=e,co=nn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ge=!0),e.firstContext=null)}function ht(e){var t=e._currentValue;if(co!==e)if(e={context:e,memoizedValue:t,next:null},nn===null){if(Pl===null)throw Error(I(308));nn=e,Pl.dependencies={lanes:0,firstContext:e}}else nn=nn.next=e;return t}var $r=null;function mo(e){$r===null?$r=[e]:$r.push(e)}function gd(e,t,r,s){var l=t.interleaved;return l===null?(r.next=r,mo(t)):(r.next=l.next,l.next=r),t.interleaved=r,Qt(e,s)}function Qt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var qt=!1;function fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ut(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ir(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ie&2){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,Qt(e,r)}return l=s.interleaved,l===null?(t.next=t,mo(s)):(t.next=l.next,l.next=t),s.interleaved=t,Qt(e,r)}function ol(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,qi(e,r)}}function kc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var l=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?l=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?l=a=t:a=a.next=t}else l=a=t;r={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ll(e,t,r,s){var l=e.updateQueue;qt=!1;var a=l.firstBaseUpdate,i=l.lastBaseUpdate,o=l.shared.pending;if(o!==null){l.shared.pending=null;var c=o,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var b=e.alternate;b!==null&&(b=b.updateQueue,o=b.lastBaseUpdate,o!==i&&(o===null?b.firstBaseUpdate=u:o.next=u,b.lastBaseUpdate=c))}if(a!==null){var y=l.baseState;i=0,b=u=c=null,o=a;do{var h=o.lane,g=o.eventTime;if((s&h)===h){b!==null&&(b=b.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var E=e,T=o;switch(h=t,g=r,T.tag){case 1:if(E=T.payload,typeof E=="function"){y=E.call(g,y,h);break e}y=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=T.payload,h=typeof E=="function"?E.call(g,y,h):E,h==null)break e;y=be({},y,h);break e;case 2:qt=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=l.effects,h===null?l.effects=[o]:h.push(o))}else g={eventTime:g,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},b===null?(u=b=g,c=y):b=b.next=g,i|=h;if(o=o.next,o===null){if(o=l.shared.pending,o===null)break;h=o,o=h.next,h.next=null,l.lastBaseUpdate=h,l.shared.pending=null}}while(!0);if(b===null&&(c=y),l.baseState=c,l.firstBaseUpdate=u,l.lastBaseUpdate=b,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);Or|=i,e.lanes=i,e.memoizedState=y}}function Sc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],l=s.callback;if(l!==null){if(s.callback=null,s=r,typeof l!="function")throw Error(I(191,l));l.call(s)}}}var Ss={},$t=fr(Ss),fs=fr(Ss),hs=fr(Ss);function zr(e){if(e===Ss)throw Error(I(174));return e}function ho(e,t){switch(fe(hs,t),fe(fs,e),fe($t,Ss),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ni(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ni(t,e)}xe($t),fe($t,t)}function xn(){xe($t),xe(fs),xe(hs)}function yd(e){zr(hs.current);var t=zr($t.current),r=ni(t,e.type);t!==r&&(fe(fs,e),fe($t,r))}function go(e){fs.current===e&&(xe($t),xe(fs))}var we=fr(0);function $l(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var za=[];function xo(){for(var e=0;e<za.length;e++)za[e]._workInProgressVersionPrimary=null;za.length=0}var cl=Ht.ReactCurrentDispatcher,Aa=Ht.ReactCurrentBatchConfig,Mr=0,je=null,Ce=null,$e=null,zl=!1,Zn=!1,gs=0,u0=0;function Me(){throw Error(I(321))}function yo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!_t(e[r],t[r]))return!1;return!0}function vo(e,t,r,s,l,a){if(Mr=a,je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cl.current=e===null||e.memoizedState===null?f0:h0,e=r(s,l),Zn){a=0;do{if(Zn=!1,gs=0,25<=a)throw Error(I(301));a+=1,$e=Ce=null,t.updateQueue=null,cl.current=g0,e=r(s,l)}while(Zn)}if(cl.current=Al,t=Ce!==null&&Ce.next!==null,Mr=0,$e=Ce=je=null,zl=!1,t)throw Error(I(300));return e}function wo(){var e=gs!==0;return gs=0,e}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?je.memoizedState=$e=e:$e=$e.next=e,$e}function gt(){if(Ce===null){var e=je.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=$e===null?je.memoizedState:$e.next;if(t!==null)$e=t,Ce=e;else{if(e===null)throw Error(I(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},$e===null?je.memoizedState=$e=e:$e=$e.next=e}return $e}function xs(e,t){return typeof t=="function"?t(e):t}function Fa(e){var t=gt(),r=t.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=e;var s=Ce,l=s.baseQueue,a=r.pending;if(a!==null){if(l!==null){var i=l.next;l.next=a.next,a.next=i}s.baseQueue=l=a,r.pending=null}if(l!==null){a=l.next,s=s.baseState;var o=i=null,c=null,u=a;do{var b=u.lane;if((Mr&b)===b)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var y={lane:b,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=y,i=s):c=c.next=y,je.lanes|=b,Or|=b}u=u.next}while(u!==null&&u!==a);c===null?i=s:c.next=o,_t(s,t.memoizedState)||(Ge=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){l=e;do a=l.lane,je.lanes|=a,Or|=a,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Da(e){var t=gt(),r=t.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=e;var s=r.dispatch,l=r.pending,a=t.memoizedState;if(l!==null){r.pending=null;var i=l=l.next;do a=e(a,i.action),i=i.next;while(i!==l);_t(a,t.memoizedState)||(Ge=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function vd(){}function wd(e,t){var r=je,s=gt(),l=t(),a=!_t(s.memoizedState,l);if(a&&(s.memoizedState=l,Ge=!0),s=s.queue,jo(kd.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||$e!==null&&$e.memoizedState.tag&1){if(r.flags|=2048,ys(9,bd.bind(null,r,s,l,t),void 0,null),ze===null)throw Error(I(349));Mr&30||jd(r,t,l)}return l}function jd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=je.updateQueue,t===null?(t={lastEffect:null,stores:null},je.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function bd(e,t,r,s){t.value=r,t.getSnapshot=s,Sd(t)&&_d(e)}function kd(e,t,r){return r(function(){Sd(t)&&_d(e)})}function Sd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!_t(e,r)}catch{return!0}}function _d(e){var t=Qt(e,1);t!==null&&St(t,e,1,-1)}function _c(e){var t=Tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=m0.bind(null,je,e),[t.memoizedState,e]}function ys(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=je.updateQueue,t===null?(t={lastEffect:null,stores:null},je.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Nd(){return gt().memoizedState}function ul(e,t,r,s){var l=Tt();je.flags|=e,l.memoizedState=ys(1|t,r,void 0,s===void 0?null:s)}function Kl(e,t,r,s){var l=gt();s=s===void 0?null:s;var a=void 0;if(Ce!==null){var i=Ce.memoizedState;if(a=i.destroy,s!==null&&yo(s,i.deps)){l.memoizedState=ys(t,r,a,s);return}}je.flags|=e,l.memoizedState=ys(1|t,r,a,s)}function Nc(e,t){return ul(8390656,8,e,t)}function jo(e,t){return Kl(2048,8,e,t)}function Ed(e,t){return Kl(4,2,e,t)}function Cd(e,t){return Kl(4,4,e,t)}function Td(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pd(e,t,r){return r=r!=null?r.concat([e]):null,Kl(4,4,Td.bind(null,t,e),r)}function bo(){}function Ld(e,t){var r=gt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&yo(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function $d(e,t){var r=gt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&yo(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function zd(e,t,r){return Mr&21?(_t(r,t)||(r=Mu(),je.lanes|=r,Or|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ge=!0),e.memoizedState=r)}function d0(e,t){var r=ue;ue=r!==0&&4>r?r:4,e(!0);var s=Aa.transition;Aa.transition={};try{e(!1),t()}finally{ue=r,Aa.transition=s}}function Ad(){return gt().memoizedState}function p0(e,t,r){var s=cr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Fd(e))Dd(t,r);else if(r=gd(e,t,r,s),r!==null){var l=We();St(r,e,s,l),Rd(r,t,s)}}function m0(e,t,r){var s=cr(e),l={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fd(e))Dd(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,o=a(i,r);if(l.hasEagerState=!0,l.eagerState=o,_t(o,i)){var c=t.interleaved;c===null?(l.next=l,mo(t)):(l.next=c.next,c.next=l),t.interleaved=l;return}}catch{}finally{}r=gd(e,t,l,s),r!==null&&(l=We(),St(r,e,s,l),Rd(r,t,s))}}function Fd(e){var t=e.alternate;return e===je||t!==null&&t===je}function Dd(e,t){Zn=zl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Rd(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,qi(e,r)}}var Al={readContext:ht,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useInsertionEffect:Me,useLayoutEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useMutableSource:Me,useSyncExternalStore:Me,useId:Me,unstable_isNewReconciler:!1},f0={readContext:ht,useCallback:function(e,t){return Tt().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:Nc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ul(4194308,4,Td.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ul(4194308,4,e,t)},useInsertionEffect:function(e,t){return ul(4,2,e,t)},useMemo:function(e,t){var r=Tt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Tt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=p0.bind(null,je,e),[s.memoizedState,e]},useRef:function(e){var t=Tt();return e={current:e},t.memoizedState=e},useState:_c,useDebugValue:bo,useDeferredValue:function(e){return Tt().memoizedState=e},useTransition:function(){var e=_c(!1),t=e[0];return e=d0.bind(null,e[1]),Tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=je,l=Tt();if(ve){if(r===void 0)throw Error(I(407));r=r()}else{if(r=t(),ze===null)throw Error(I(349));Mr&30||jd(s,t,r)}l.memoizedState=r;var a={value:r,getSnapshot:t};return l.queue=a,Nc(kd.bind(null,s,a,e),[e]),s.flags|=2048,ys(9,bd.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=Tt(),t=ze.identifierPrefix;if(ve){var r=It,s=Ot;r=(s&~(1<<32-kt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=gs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=u0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},h0={readContext:ht,useCallback:Ld,useContext:ht,useEffect:jo,useImperativeHandle:Pd,useInsertionEffect:Ed,useLayoutEffect:Cd,useMemo:$d,useReducer:Fa,useRef:Nd,useState:function(){return Fa(xs)},useDebugValue:bo,useDeferredValue:function(e){var t=gt();return zd(t,Ce.memoizedState,e)},useTransition:function(){var e=Fa(xs)[0],t=gt().memoizedState;return[e,t]},useMutableSource:vd,useSyncExternalStore:wd,useId:Ad,unstable_isNewReconciler:!1},g0={readContext:ht,useCallback:Ld,useContext:ht,useEffect:jo,useImperativeHandle:Pd,useInsertionEffect:Ed,useLayoutEffect:Cd,useMemo:$d,useReducer:Da,useRef:Nd,useState:function(){return Da(xs)},useDebugValue:bo,useDeferredValue:function(e){var t=gt();return Ce===null?t.memoizedState=e:zd(t,Ce.memoizedState,e)},useTransition:function(){var e=Da(xs)[0],t=gt().memoizedState;return[e,t]},useMutableSource:vd,useSyncExternalStore:wd,useId:Ad,unstable_isNewReconciler:!1};function vt(e,t){if(e&&e.defaultProps){t=be({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Si(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:be({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Yl={isMounted:function(e){return(e=e._reactInternals)?Vr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=We(),l=cr(e),a=Ut(s,l);a.payload=t,r!=null&&(a.callback=r),t=ir(e,a,l),t!==null&&(St(t,e,l,s),ol(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=We(),l=cr(e),a=Ut(s,l);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=ir(e,a,l),t!==null&&(St(t,e,l,s),ol(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=We(),s=cr(e),l=Ut(r,s);l.tag=2,t!=null&&(l.callback=t),t=ir(e,l,s),t!==null&&(St(t,e,s,r),ol(t,e,s))}};function Ec(e,t,r,s,l,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,i):t.prototype&&t.prototype.isPureReactComponent?!us(r,s)||!us(l,a):!0}function Md(e,t,r){var s=!1,l=pr,a=t.contextType;return typeof a=="object"&&a!==null?a=ht(a):(l=qe(t)?Dr:Ue.current,s=t.contextTypes,a=(s=s!=null)?fn(e,l):pr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function Cc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Yl.enqueueReplaceState(t,t.state,null)}function _i(e,t,r,s){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},fo(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=ht(a):(a=qe(t)?Dr:Ue.current,l.context=fn(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Si(e,t,a,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Yl.enqueueReplaceState(l,l.state,null),Ll(e,r,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function yn(e,t){try{var r="",s=t;do r+=Qp(s),s=s.return;while(s);var l=r}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function Ra(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ni(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var x0=typeof WeakMap=="function"?WeakMap:Map;function Od(e,t,r){r=Ut(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Dl||(Dl=!0,Di=s),Ni(e,t)},r}function Id(e,t,r){r=Ut(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=t.value;r.payload=function(){return s(l)},r.callback=function(){Ni(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Ni(e,t),typeof s!="function"&&(or===null?or=new Set([this]):or.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Tc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new x0;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(r)||(l.add(r),e=L0.bind(null,e,t,r),t.then(e,e))}function Pc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lc(e,t,r,s,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ut(-1,1),t.tag=2,ir(r,t,1))),r.lanes|=1),e)}var y0=Ht.ReactCurrentOwner,Ge=!1;function Ve(e,t,r,s){t.child=e===null?hd(t,null,r,s):gn(t,e.child,r,s)}function $c(e,t,r,s,l){r=r.render;var a=t.ref;return dn(t,l),s=vo(e,t,r,s,a,l),r=wo(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Wt(e,t,l)):(ve&&r&&ao(t),t.flags|=1,Ve(e,t,s,l),t.child)}function zc(e,t,r,s,l){if(e===null){var a=r.type;return typeof a=="function"&&!Po(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Ud(e,t,a,s,l)):(e=fl(r.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:us,r(i,s)&&e.ref===t.ref)return Wt(e,t,l)}return t.flags|=1,e=ur(a,s),e.ref=t.ref,e.return=t,t.child=e}function Ud(e,t,r,s,l){if(e!==null){var a=e.memoizedProps;if(us(a,s)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=s=a,(e.lanes&l)!==0)e.flags&131072&&(Ge=!0);else return t.lanes=e.lanes,Wt(e,t,l)}return Ei(e,t,r,s,l)}function Vd(e,t,r){var s=t.pendingProps,l=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(ln,rt),rt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fe(ln,rt),rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,fe(ln,rt),rt|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,fe(ln,rt),rt|=s;return Ve(e,t,l,r),t.child}function Bd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ei(e,t,r,s,l){var a=qe(r)?Dr:Ue.current;return a=fn(t,a),dn(t,l),r=vo(e,t,r,s,a,l),s=wo(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Wt(e,t,l)):(ve&&s&&ao(t),t.flags|=1,Ve(e,t,r,l),t.child)}function Ac(e,t,r,s,l){if(qe(r)){var a=!0;Nl(t)}else a=!1;if(dn(t,l),t.stateNode===null)dl(e,t),Md(t,r,s),_i(t,r,s,l),s=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=ht(u):(u=qe(r)?Dr:Ue.current,u=fn(t,u));var b=r.getDerivedStateFromProps,y=typeof b=="function"||typeof i.getSnapshotBeforeUpdate=="function";y||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==s||c!==u)&&Cc(t,i,s,u),qt=!1;var h=t.memoizedState;i.state=h,Ll(t,s,i,l),c=t.memoizedState,o!==s||h!==c||Je.current||qt?(typeof b=="function"&&(Si(t,r,b,s),c=t.memoizedState),(o=qt||Ec(t,r,o,s,h,c,u))?(y||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),i.props=s,i.state=c,i.context=u,s=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,xd(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:vt(t.type,o),i.props=u,y=t.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=ht(c):(c=qe(r)?Dr:Ue.current,c=fn(t,c));var g=r.getDerivedStateFromProps;(b=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==y||h!==c)&&Cc(t,i,s,c),qt=!1,h=t.memoizedState,i.state=h,Ll(t,s,i,l);var E=t.memoizedState;o!==y||h!==E||Je.current||qt?(typeof g=="function"&&(Si(t,r,g,s),E=t.memoizedState),(u=qt||Ec(t,r,u,s,h,E,c)||!1)?(b||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,E,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,E,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=E),i.props=s,i.state=E,i.context=c,s=u):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Ci(e,t,r,s,a,l)}function Ci(e,t,r,s,l,a){Bd(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return l&&vc(t,r,!1),Wt(e,t,a);s=t.stateNode,y0.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=gn(t,e.child,null,a),t.child=gn(t,null,o,a)):Ve(e,t,o,a),t.memoizedState=s.state,l&&vc(t,r,!0),t.child}function Qd(e){var t=e.stateNode;t.pendingContext?yc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yc(e,t.context,!1),ho(e,t.containerInfo)}function Fc(e,t,r,s,l){return hn(),oo(l),t.flags|=256,Ve(e,t,r,s),t.child}var Ti={dehydrated:null,treeContext:null,retryLane:0};function Pi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wd(e,t,r){var s=t.pendingProps,l=we.current,a=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(l&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),fe(we,l&1),e===null)return bi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,a?(s=t.mode,a=t.child,i={mode:"hidden",children:i},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Jl(i,s,0,null),e=Fr(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Pi(r),t.memoizedState=Ti,e):ko(t,i));if(l=e.memoizedState,l!==null&&(o=l.dehydrated,o!==null))return v0(e,t,i,s,o,l,r);if(a){a=s.fallback,i=t.mode,l=e.child,o=l.sibling;var c={mode:"hidden",children:s.children};return!(i&1)&&t.child!==l?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=ur(l,c),s.subtreeFlags=l.subtreeFlags&14680064),o!==null?a=ur(o,a):(a=Fr(a,i,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,i=e.child.memoizedState,i=i===null?Pi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=Ti,s}return a=e.child,e=a.sibling,s=ur(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function ko(e,t){return t=Jl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zs(e,t,r,s){return s!==null&&oo(s),gn(t,e.child,null,r),e=ko(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function v0(e,t,r,s,l,a,i){if(r)return t.flags&256?(t.flags&=-257,s=Ra(Error(I(422))),Zs(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,l=t.mode,s=Jl({mode:"visible",children:s.children},l,0,null),a=Fr(a,l,i,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&gn(t,e.child,null,i),t.child.memoizedState=Pi(i),t.memoizedState=Ti,a);if(!(t.mode&1))return Zs(e,t,i,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(I(419)),s=Ra(a,s,void 0),Zs(e,t,i,s)}if(o=(i&e.childLanes)!==0,Ge||o){if(s=ze,s!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(s.suspendedLanes|i)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,Qt(e,l),St(s,e,l,-1))}return To(),s=Ra(Error(I(421))),Zs(e,t,i,s)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=$0.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,nt=ar(l.nextSibling),st=t,ve=!0,jt=null,e!==null&&(dt[pt++]=Ot,dt[pt++]=It,dt[pt++]=Rr,Ot=e.id,It=e.overflow,Rr=t),t=ko(t,s.children),t.flags|=4096,t)}function Dc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ki(e.return,t,r)}function Ma(e,t,r,s,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=l)}function Hd(e,t,r){var s=t.pendingProps,l=s.revealOrder,a=s.tail;if(Ve(e,t,s.children,r),s=we.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dc(e,r,t);else if(e.tag===19)Dc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(fe(we,s),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&$l(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),Ma(t,!1,l,r,a);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&$l(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}Ma(t,!0,r,null,a);break;case"together":Ma(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Or|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,r=ur(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ur(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function w0(e,t,r){switch(t.tag){case 3:Qd(t),hn();break;case 5:yd(t);break;case 1:qe(t.type)&&Nl(t);break;case 4:ho(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,l=t.memoizedProps.value;fe(Tl,s._currentValue),s._currentValue=l;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(fe(we,we.current&1),t.flags|=128,null):r&t.child.childLanes?Wd(e,t,r):(fe(we,we.current&1),e=Wt(e,t,r),e!==null?e.sibling:null);fe(we,we.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Hd(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),fe(we,we.current),s)break;return null;case 22:case 23:return t.lanes=0,Vd(e,t,r)}return Wt(e,t,r)}var Kd,Li,Yd,Xd;Kd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Li=function(){};Yd=function(e,t,r,s){var l=e.memoizedProps;if(l!==s){e=t.stateNode,zr($t.current);var a=null;switch(r){case"input":l=Za(e,l),s=Za(e,s),a=[];break;case"select":l=be({},l,{value:void 0}),s=be({},s,{value:void 0}),a=[];break;case"textarea":l=ri(e,l),s=ri(e,s),a=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Sl)}si(r,s);var i;r=null;for(u in l)if(!s.hasOwnProperty(u)&&l.hasOwnProperty(u)&&l[u]!=null)if(u==="style"){var o=l[u];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ns.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var c=s[u];if(o=l!=null?l[u]:void 0,s.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ns.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&he("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Xd=function(e,t,r,s){r!==s&&(t.flags|=4)};function Un(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function j0(e,t,r){var s=t.pendingProps;switch(io(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return qe(t.type)&&_l(),Oe(t),null;case 3:return s=t.stateNode,xn(),xe(Je),xe(Ue),xo(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Js(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,jt!==null&&(Oi(jt),jt=null))),Li(e,t),Oe(t),null;case 5:go(t);var l=zr(hs.current);if(r=t.type,e!==null&&t.stateNode!=null)Yd(e,t,r,s,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(I(166));return Oe(t),null}if(e=zr($t.current),Js(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[Pt]=t,s[ms]=a,e=(t.mode&1)!==0,r){case"dialog":he("cancel",s),he("close",s);break;case"iframe":case"object":case"embed":he("load",s);break;case"video":case"audio":for(l=0;l<Kn.length;l++)he(Kn[l],s);break;case"source":he("error",s);break;case"img":case"image":case"link":he("error",s),he("load",s);break;case"details":he("toggle",s);break;case"input":Wo(s,a),he("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},he("invalid",s);break;case"textarea":Ko(s,a),he("invalid",s)}si(r,a),l=null;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];i==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&Gs(s.textContent,o,e),l=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Gs(s.textContent,o,e),l=["children",""+o]):ns.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&he("scroll",s)}switch(r){case"input":Vs(s),Ho(s,a,!0);break;case"textarea":Vs(s),Yo(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Sl)}s=l,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ku(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(r,{is:s.is}):(e=i.createElement(r),r==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,r),e[Pt]=t,e[ms]=s,Kd(e,t,!1,!1),t.stateNode=e;e:{switch(i=li(r,s),r){case"dialog":he("cancel",e),he("close",e),l=s;break;case"iframe":case"object":case"embed":he("load",e),l=s;break;case"video":case"audio":for(l=0;l<Kn.length;l++)he(Kn[l],e);l=s;break;case"source":he("error",e),l=s;break;case"img":case"image":case"link":he("error",e),he("load",e),l=s;break;case"details":he("toggle",e),l=s;break;case"input":Wo(e,s),l=Za(e,s),he("invalid",e);break;case"option":l=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},l=be({},s,{value:void 0}),he("invalid",e);break;case"textarea":Ko(e,s),l=ri(e,s),he("invalid",e);break;default:l=s}si(r,l),o=l;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Nu(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Su(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ss(e,c):typeof c=="number"&&ss(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ns.hasOwnProperty(a)?c!=null&&a==="onScroll"&&he("scroll",e):c!=null&&Hi(e,a,c,i))}switch(r){case"input":Vs(e),Ho(e,s,!1);break;case"textarea":Vs(e),Yo(e);break;case"option":s.value!=null&&e.setAttribute("value",""+dr(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?an(e,!!s.multiple,a,!1):s.defaultValue!=null&&an(e,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Sl)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)Xd(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(I(166));if(r=zr(hs.current),zr($t.current),Js(t)){if(s=t.stateNode,r=t.memoizedProps,s[Pt]=t,(a=s.nodeValue!==r)&&(e=st,e!==null))switch(e.tag){case 3:Gs(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gs(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Pt]=t,t.stateNode=s}return Oe(t),null;case 13:if(xe(we),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&nt!==null&&t.mode&1&&!(t.flags&128))md(),hn(),t.flags|=98560,a=!1;else if(a=Js(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(I(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(I(317));a[Pt]=t}else hn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),a=!1}else jt!==null&&(Oi(jt),jt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||we.current&1?Te===0&&(Te=3):To())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return xn(),Li(e,t),e===null&&ds(t.stateNode.containerInfo),Oe(t),null;case 10:return po(t.type._context),Oe(t),null;case 17:return qe(t.type)&&_l(),Oe(t),null;case 19:if(xe(we),a=t.memoizedState,a===null)return Oe(t),null;if(s=(t.flags&128)!==0,i=a.rendering,i===null)if(s)Un(a,!1);else{if(Te!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=$l(e),i!==null){for(t.flags|=128,Un(a,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fe(we,we.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ne()>vn&&(t.flags|=128,s=!0,Un(a,!1),t.lanes=4194304)}else{if(!s)if(e=$l(i),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Un(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!ve)return Oe(t),null}else 2*Ne()-a.renderingStartTime>vn&&r!==1073741824&&(t.flags|=128,s=!0,Un(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ne(),t.sibling=null,r=we.current,fe(we,s?r&1|2:r&1),t):(Oe(t),null);case 22:case 23:return Co(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?rt&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function b0(e,t){switch(io(t),t.tag){case 1:return qe(t.type)&&_l(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xn(),xe(Je),xe(Ue),xo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return go(t),null;case 13:if(xe(we),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));hn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(we),null;case 4:return xn(),null;case 10:return po(t.type._context),null;case 22:case 23:return Co(),null;case 24:return null;default:return null}}var el=!1,Ie=!1,k0=typeof WeakSet=="function"?WeakSet:Set,J=null;function sn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){ke(e,t,s)}else r.current=null}function $i(e,t,r){try{r()}catch(s){ke(e,t,s)}}var Rc=!1;function S0(e,t){if(hi=jl,e=ed(),lo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var l=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,u=0,b=0,y=e,h=null;t:for(;;){for(var g;y!==r||l!==0&&y.nodeType!==3||(o=i+l),y!==a||s!==0&&y.nodeType!==3||(c=i+s),y.nodeType===3&&(i+=y.nodeValue.length),(g=y.firstChild)!==null;)h=y,y=g;for(;;){if(y===e)break t;if(h===r&&++u===l&&(o=i),h===a&&++b===s&&(c=i),(g=y.nextSibling)!==null)break;y=h,h=y.parentNode}y=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(gi={focusedElem:e,selectionRange:r},jl=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var T=E.memoizedProps,U=E.memoizedState,f=t.stateNode,d=f.getSnapshotBeforeUpdate(t.elementType===t.type?T:vt(t.type,T),U);f.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(C){ke(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return E=Rc,Rc=!1,E}function es(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&$i(t,r,a)}l=l.next}while(l!==s)}}function Xl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function zi(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Gd(e){var t=e.alternate;t!==null&&(e.alternate=null,Gd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Pt],delete t[ms],delete t[vi],delete t[a0],delete t[i0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jd(e){return e.tag===5||e.tag===3||e.tag===4}function Mc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ai(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Sl));else if(s!==4&&(e=e.child,e!==null))for(Ai(e,t,r),e=e.sibling;e!==null;)Ai(e,t,r),e=e.sibling}function Fi(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Fi(e,t,r),e=e.sibling;e!==null;)Fi(e,t,r),e=e.sibling}var Fe=null,wt=!1;function Xt(e,t,r){for(r=r.child;r!==null;)qd(e,t,r),r=r.sibling}function qd(e,t,r){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Ul,r)}catch{}switch(r.tag){case 5:Ie||sn(r,t);case 6:var s=Fe,l=wt;Fe=null,Xt(e,t,r),Fe=s,wt=l,Fe!==null&&(wt?(e=Fe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Fe.removeChild(r.stateNode));break;case 18:Fe!==null&&(wt?(e=Fe,r=r.stateNode,e.nodeType===8?La(e.parentNode,r):e.nodeType===1&&La(e,r),os(e)):La(Fe,r.stateNode));break;case 4:s=Fe,l=wt,Fe=r.stateNode.containerInfo,wt=!0,Xt(e,t,r),Fe=s,wt=l;break;case 0:case 11:case 14:case 15:if(!Ie&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var a=l,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&$i(r,t,i),l=l.next}while(l!==s)}Xt(e,t,r);break;case 1:if(!Ie&&(sn(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){ke(r,t,o)}Xt(e,t,r);break;case 21:Xt(e,t,r);break;case 22:r.mode&1?(Ie=(s=Ie)||r.memoizedState!==null,Xt(e,t,r),Ie=s):Xt(e,t,r);break;default:Xt(e,t,r)}}function Oc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new k0),t.forEach(function(s){var l=z0.bind(null,e,s);r.has(s)||(r.add(s),s.then(l,l))})}}function yt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];try{var a=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:Fe=o.stateNode,wt=!1;break e;case 3:Fe=o.stateNode.containerInfo,wt=!0;break e;case 4:Fe=o.stateNode.containerInfo,wt=!0;break e}o=o.return}if(Fe===null)throw Error(I(160));qd(a,i,l),Fe=null,wt=!1;var c=l.alternate;c!==null&&(c.return=null),l.return=null}catch(u){ke(l,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zd(t,e),t=t.sibling}function Zd(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yt(t,e),Ct(e),s&4){try{es(3,e,e.return),Xl(3,e)}catch(T){ke(e,e.return,T)}try{es(5,e,e.return)}catch(T){ke(e,e.return,T)}}break;case 1:yt(t,e),Ct(e),s&512&&r!==null&&sn(r,r.return);break;case 5:if(yt(t,e),Ct(e),s&512&&r!==null&&sn(r,r.return),e.flags&32){var l=e.stateNode;try{ss(l,"")}catch(T){ke(e,e.return,T)}}if(s&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&ju(l,a),li(o,i);var u=li(o,a);for(i=0;i<c.length;i+=2){var b=c[i],y=c[i+1];b==="style"?Nu(l,y):b==="dangerouslySetInnerHTML"?Su(l,y):b==="children"?ss(l,y):Hi(l,b,y,u)}switch(o){case"input":ei(l,a);break;case"textarea":bu(l,a);break;case"select":var h=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?an(l,!!a.multiple,g,!1):h!==!!a.multiple&&(a.defaultValue!=null?an(l,!!a.multiple,a.defaultValue,!0):an(l,!!a.multiple,a.multiple?[]:"",!1))}l[ms]=a}catch(T){ke(e,e.return,T)}}break;case 6:if(yt(t,e),Ct(e),s&4){if(e.stateNode===null)throw Error(I(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(T){ke(e,e.return,T)}}break;case 3:if(yt(t,e),Ct(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{os(t.containerInfo)}catch(T){ke(e,e.return,T)}break;case 4:yt(t,e),Ct(e);break;case 13:yt(t,e),Ct(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(No=Ne())),s&4&&Oc(e);break;case 22:if(b=r!==null&&r.memoizedState!==null,e.mode&1?(Ie=(u=Ie)||b,yt(t,e),Ie=u):yt(t,e),Ct(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!b&&e.mode&1)for(J=e,b=e.child;b!==null;){for(y=J=b;J!==null;){switch(h=J,g=h.child,h.tag){case 0:case 11:case 14:case 15:es(4,h,h.return);break;case 1:sn(h,h.return);var E=h.stateNode;if(typeof E.componentWillUnmount=="function"){s=h,r=h.return;try{t=s,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(T){ke(s,r,T)}}break;case 5:sn(h,h.return);break;case 22:if(h.memoizedState!==null){Uc(y);continue}}g!==null?(g.return=h,J=g):Uc(y)}b=b.sibling}e:for(b=null,y=e;;){if(y.tag===5){if(b===null){b=y;try{l=y.stateNode,u?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=y.stateNode,c=y.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=_u("display",i))}catch(T){ke(e,e.return,T)}}}else if(y.tag===6){if(b===null)try{y.stateNode.nodeValue=u?"":y.memoizedProps}catch(T){ke(e,e.return,T)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;b===y&&(b=null),y=y.return}b===y&&(b=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:yt(t,e),Ct(e),s&4&&Oc(e);break;case 21:break;default:yt(t,e),Ct(e)}}function Ct(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Jd(r)){var s=r;break e}r=r.return}throw Error(I(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(ss(l,""),s.flags&=-33);var a=Mc(e);Fi(e,a,l);break;case 3:case 4:var i=s.stateNode.containerInfo,o=Mc(e);Ai(e,o,i);break;default:throw Error(I(161))}}catch(c){ke(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _0(e,t,r){J=e,ep(e)}function ep(e,t,r){for(var s=(e.mode&1)!==0;J!==null;){var l=J,a=l.child;if(l.tag===22&&s){var i=l.memoizedState!==null||el;if(!i){var o=l.alternate,c=o!==null&&o.memoizedState!==null||Ie;o=el;var u=Ie;if(el=i,(Ie=c)&&!u)for(J=l;J!==null;)i=J,c=i.child,i.tag===22&&i.memoizedState!==null?Vc(l):c!==null?(c.return=i,J=c):Vc(l);for(;a!==null;)J=a,ep(a),a=a.sibling;J=l,el=o,Ie=u}Ic(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,J=a):Ic(e)}}function Ic(e){for(;J!==null;){var t=J;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ie||Xl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ie)if(r===null)s.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:vt(t.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Sc(t,a,s);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Sc(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var b=u.memoizedState;if(b!==null){var y=b.dehydrated;y!==null&&os(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Ie||t.flags&512&&zi(t)}catch(h){ke(t,t.return,h)}}if(t===e){J=null;break}if(r=t.sibling,r!==null){r.return=t.return,J=r;break}J=t.return}}function Uc(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var r=t.sibling;if(r!==null){r.return=t.return,J=r;break}J=t.return}}function Vc(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Xl(4,t)}catch(c){ke(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var l=t.return;try{s.componentDidMount()}catch(c){ke(t,l,c)}}var a=t.return;try{zi(t)}catch(c){ke(t,a,c)}break;case 5:var i=t.return;try{zi(t)}catch(c){ke(t,i,c)}}}catch(c){ke(t,t.return,c)}if(t===e){J=null;break}var o=t.sibling;if(o!==null){o.return=t.return,J=o;break}J=t.return}}var N0=Math.ceil,Fl=Ht.ReactCurrentDispatcher,So=Ht.ReactCurrentOwner,ft=Ht.ReactCurrentBatchConfig,ie=0,ze=null,Ee=null,De=0,rt=0,ln=fr(0),Te=0,vs=null,Or=0,Gl=0,_o=0,ts=null,Xe=null,No=0,vn=1/0,Dt=null,Dl=!1,Di=null,or=null,tl=!1,rr=null,Rl=0,rs=0,Ri=null,pl=-1,ml=0;function We(){return ie&6?Ne():pl!==-1?pl:pl=Ne()}function cr(e){return e.mode&1?ie&2&&De!==0?De&-De:c0.transition!==null?(ml===0&&(ml=Mu()),ml):(e=ue,e!==0||(e=window.event,e=e===void 0?16:Wu(e.type)),e):1}function St(e,t,r,s){if(50<rs)throw rs=0,Ri=null,Error(I(185));js(e,r,s),(!(ie&2)||e!==ze)&&(e===ze&&(!(ie&2)&&(Gl|=r),Te===4&&er(e,De)),Ze(e,s),r===1&&ie===0&&!(t.mode&1)&&(vn=Ne()+500,Hl&&hr()))}function Ze(e,t){var r=e.callbackNode;cm(e,t);var s=wl(e,e===ze?De:0);if(s===0)r!==null&&Jo(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Jo(r),t===1)e.tag===0?o0(Bc.bind(null,e)):ud(Bc.bind(null,e)),s0(function(){!(ie&6)&&hr()}),r=null;else{switch(Ou(s)){case 1:r=Ji;break;case 4:r=Du;break;case 16:r=vl;break;case 536870912:r=Ru;break;default:r=vl}r=op(r,tp.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function tp(e,t){if(pl=-1,ml=0,ie&6)throw Error(I(327));var r=e.callbackNode;if(pn()&&e.callbackNode!==r)return null;var s=wl(e,e===ze?De:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ml(e,s);else{t=s;var l=ie;ie|=2;var a=np();(ze!==e||De!==t)&&(Dt=null,vn=Ne()+500,Ar(e,t));do try{T0();break}catch(o){rp(e,o)}while(!0);uo(),Fl.current=a,ie=l,Ee!==null?t=0:(ze=null,De=0,t=Te)}if(t!==0){if(t===2&&(l=ui(e),l!==0&&(s=l,t=Mi(e,l))),t===1)throw r=vs,Ar(e,0),er(e,s),Ze(e,Ne()),r;if(t===6)er(e,s);else{if(l=e.current.alternate,!(s&30)&&!E0(l)&&(t=Ml(e,s),t===2&&(a=ui(e),a!==0&&(s=a,t=Mi(e,a))),t===1))throw r=vs,Ar(e,0),er(e,s),Ze(e,Ne()),r;switch(e.finishedWork=l,e.finishedLanes=s,t){case 0:case 1:throw Error(I(345));case 2:Pr(e,Xe,Dt);break;case 3:if(er(e,s),(s&130023424)===s&&(t=No+500-Ne(),10<t)){if(wl(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){We(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=yi(Pr.bind(null,e,Xe,Dt),t);break}Pr(e,Xe,Dt);break;case 4:if(er(e,s),(s&4194240)===s)break;for(t=e.eventTimes,l=-1;0<s;){var i=31-kt(s);a=1<<i,i=t[i],i>l&&(l=i),s&=~a}if(s=l,s=Ne()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*N0(s/1960))-s,10<s){e.timeoutHandle=yi(Pr.bind(null,e,Xe,Dt),s);break}Pr(e,Xe,Dt);break;case 5:Pr(e,Xe,Dt);break;default:throw Error(I(329))}}}return Ze(e,Ne()),e.callbackNode===r?tp.bind(null,e):null}function Mi(e,t){var r=ts;return e.current.memoizedState.isDehydrated&&(Ar(e,t).flags|=256),e=Ml(e,t),e!==2&&(t=Xe,Xe=r,t!==null&&Oi(t)),e}function Oi(e){Xe===null?Xe=e:Xe.push.apply(Xe,e)}function E0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var l=r[s],a=l.getSnapshot;l=l.value;try{if(!_t(a(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t){for(t&=~_o,t&=~Gl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-kt(t),s=1<<r;e[r]=-1,t&=~s}}function Bc(e){if(ie&6)throw Error(I(327));pn();var t=wl(e,0);if(!(t&1))return Ze(e,Ne()),null;var r=Ml(e,t);if(e.tag!==0&&r===2){var s=ui(e);s!==0&&(t=s,r=Mi(e,s))}if(r===1)throw r=vs,Ar(e,0),er(e,t),Ze(e,Ne()),r;if(r===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pr(e,Xe,Dt),Ze(e,Ne()),null}function Eo(e,t){var r=ie;ie|=1;try{return e(t)}finally{ie=r,ie===0&&(vn=Ne()+500,Hl&&hr())}}function Ir(e){rr!==null&&rr.tag===0&&!(ie&6)&&pn();var t=ie;ie|=1;var r=ft.transition,s=ue;try{if(ft.transition=null,ue=1,e)return e()}finally{ue=s,ft.transition=r,ie=t,!(ie&6)&&hr()}}function Co(){rt=ln.current,xe(ln)}function Ar(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,n0(r)),Ee!==null)for(r=Ee.return;r!==null;){var s=r;switch(io(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&_l();break;case 3:xn(),xe(Je),xe(Ue),xo();break;case 5:go(s);break;case 4:xn();break;case 13:xe(we);break;case 19:xe(we);break;case 10:po(s.type._context);break;case 22:case 23:Co()}r=r.return}if(ze=e,Ee=e=ur(e.current,null),De=rt=t,Te=0,vs=null,_o=Gl=Or=0,Xe=ts=null,$r!==null){for(t=0;t<$r.length;t++)if(r=$r[t],s=r.interleaved,s!==null){r.interleaved=null;var l=s.next,a=r.pending;if(a!==null){var i=a.next;a.next=l,s.next=i}r.pending=s}$r=null}return e}function rp(e,t){do{var r=Ee;try{if(uo(),cl.current=Al,zl){for(var s=je.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}zl=!1}if(Mr=0,$e=Ce=je=null,Zn=!1,gs=0,So.current=null,r===null||r.return===null){Te=1,vs=t,Ee=null;break}e:{var a=e,i=r.return,o=r,c=t;if(t=De,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,b=o,y=b.tag;if(!(b.mode&1)&&(y===0||y===11||y===15)){var h=b.alternate;h?(b.updateQueue=h.updateQueue,b.memoizedState=h.memoizedState,b.lanes=h.lanes):(b.updateQueue=null,b.memoizedState=null)}var g=Pc(i);if(g!==null){g.flags&=-257,Lc(g,i,o,a,t),g.mode&1&&Tc(a,u,t),t=g,c=u;var E=t.updateQueue;if(E===null){var T=new Set;T.add(c),t.updateQueue=T}else E.add(c);break e}else{if(!(t&1)){Tc(a,u,t),To();break e}c=Error(I(426))}}else if(ve&&o.mode&1){var U=Pc(i);if(U!==null){!(U.flags&65536)&&(U.flags|=256),Lc(U,i,o,a,t),oo(yn(c,o));break e}}a=c=yn(c,o),Te!==4&&(Te=2),ts===null?ts=[a]:ts.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var f=Od(a,c,t);kc(a,f);break e;case 1:o=c;var d=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof d.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(or===null||!or.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t;var C=Id(a,o,t);kc(a,C);break e}}a=a.return}while(a!==null)}lp(r)}catch(w){t=w,Ee===r&&r!==null&&(Ee=r=r.return);continue}break}while(!0)}function np(){var e=Fl.current;return Fl.current=Al,e===null?Al:e}function To(){(Te===0||Te===3||Te===2)&&(Te=4),ze===null||!(Or&268435455)&&!(Gl&268435455)||er(ze,De)}function Ml(e,t){var r=ie;ie|=2;var s=np();(ze!==e||De!==t)&&(Dt=null,Ar(e,t));do try{C0();break}catch(l){rp(e,l)}while(!0);if(uo(),ie=r,Fl.current=s,Ee!==null)throw Error(I(261));return ze=null,De=0,Te}function C0(){for(;Ee!==null;)sp(Ee)}function T0(){for(;Ee!==null&&!em();)sp(Ee)}function sp(e){var t=ip(e.alternate,e,rt);e.memoizedProps=e.pendingProps,t===null?lp(e):Ee=t,So.current=null}function lp(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=b0(r,t),r!==null){r.flags&=32767,Ee=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Te=6,Ee=null;return}}else if(r=j0(r,t,rt),r!==null){Ee=r;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Te===0&&(Te=5)}function Pr(e,t,r){var s=ue,l=ft.transition;try{ft.transition=null,ue=1,P0(e,t,r,s)}finally{ft.transition=l,ue=s}return null}function P0(e,t,r,s){do pn();while(rr!==null);if(ie&6)throw Error(I(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(um(e,a),e===ze&&(Ee=ze=null,De=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||tl||(tl=!0,op(vl,function(){return pn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ft.transition,ft.transition=null;var i=ue;ue=1;var o=ie;ie|=4,So.current=null,S0(e,r),Zd(r,e),Gm(gi),jl=!!hi,gi=hi=null,e.current=r,_0(r),tm(),ie=o,ue=i,ft.transition=a}else e.current=r;if(tl&&(tl=!1,rr=e,Rl=l),a=e.pendingLanes,a===0&&(or=null),sm(r.stateNode),Ze(e,Ne()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],s(l.value,{componentStack:l.stack,digest:l.digest});if(Dl)throw Dl=!1,e=Di,Di=null,e;return Rl&1&&e.tag!==0&&pn(),a=e.pendingLanes,a&1?e===Ri?rs++:(rs=0,Ri=e):rs=0,hr(),null}function pn(){if(rr!==null){var e=Ou(Rl),t=ft.transition,r=ue;try{if(ft.transition=null,ue=16>e?16:e,rr===null)var s=!1;else{if(e=rr,rr=null,Rl=0,ie&6)throw Error(I(331));var l=ie;for(ie|=4,J=e.current;J!==null;){var a=J,i=a.child;if(J.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(J=u;J!==null;){var b=J;switch(b.tag){case 0:case 11:case 15:es(8,b,a)}var y=b.child;if(y!==null)y.return=b,J=y;else for(;J!==null;){b=J;var h=b.sibling,g=b.return;if(Gd(b),b===u){J=null;break}if(h!==null){h.return=g,J=h;break}J=g}}}var E=a.alternate;if(E!==null){var T=E.child;if(T!==null){E.child=null;do{var U=T.sibling;T.sibling=null,T=U}while(T!==null)}}J=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,J=i;else e:for(;J!==null;){if(a=J,a.flags&2048)switch(a.tag){case 0:case 11:case 15:es(9,a,a.return)}var f=a.sibling;if(f!==null){f.return=a.return,J=f;break e}J=a.return}}var d=e.current;for(J=d;J!==null;){i=J;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,J=x;else e:for(i=d;J!==null;){if(o=J,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Xl(9,o)}}catch(w){ke(o,o.return,w)}if(o===i){J=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,J=C;break e}J=o.return}}if(ie=l,hr(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Ul,e)}catch{}s=!0}return s}finally{ue=r,ft.transition=t}}return!1}function Qc(e,t,r){t=yn(r,t),t=Od(e,t,1),e=ir(e,t,1),t=We(),e!==null&&(js(e,1,t),Ze(e,t))}function ke(e,t,r){if(e.tag===3)Qc(e,e,r);else for(;t!==null;){if(t.tag===3){Qc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(or===null||!or.has(s))){e=yn(r,e),e=Id(t,e,1),t=ir(t,e,1),e=We(),t!==null&&(js(t,1,e),Ze(t,e));break}}t=t.return}}function L0(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=We(),e.pingedLanes|=e.suspendedLanes&r,ze===e&&(De&r)===r&&(Te===4||Te===3&&(De&130023424)===De&&500>Ne()-No?Ar(e,0):_o|=r),Ze(e,t)}function ap(e,t){t===0&&(e.mode&1?(t=Ws,Ws<<=1,!(Ws&130023424)&&(Ws=4194304)):t=1);var r=We();e=Qt(e,t),e!==null&&(js(e,t,r),Ze(e,r))}function $0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ap(e,r)}function z0(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(I(314))}s!==null&&s.delete(t),ap(e,r)}var ip;ip=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Je.current)Ge=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ge=!1,w0(e,t,r);Ge=!!(e.flags&131072)}else Ge=!1,ve&&t.flags&1048576&&dd(t,Cl,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;dl(e,t),e=t.pendingProps;var l=fn(t,Ue.current);dn(t,r),l=vo(null,t,s,e,l,r);var a=wo();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qe(s)?(a=!0,Nl(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,fo(t),l.updater=Yl,t.stateNode=l,l._reactInternals=t,_i(t,s,e,r),t=Ci(null,t,s,!0,a,r)):(t.tag=0,ve&&a&&ao(t),Ve(null,t,l,r),t=t.child),t;case 16:s=t.elementType;e:{switch(dl(e,t),e=t.pendingProps,l=s._init,s=l(s._payload),t.type=s,l=t.tag=F0(s),e=vt(s,e),l){case 0:t=Ei(null,t,s,e,r);break e;case 1:t=Ac(null,t,s,e,r);break e;case 11:t=$c(null,t,s,e,r);break e;case 14:t=zc(null,t,s,vt(s.type,e),r);break e}throw Error(I(306,s,""))}return t;case 0:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:vt(s,l),Ei(e,t,s,l,r);case 1:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:vt(s,l),Ac(e,t,s,l,r);case 3:e:{if(Qd(t),e===null)throw Error(I(387));s=t.pendingProps,a=t.memoizedState,l=a.element,xd(e,t),Ll(t,s,null,r);var i=t.memoizedState;if(s=i.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=yn(Error(I(423)),t),t=Fc(e,t,s,r,l);break e}else if(s!==l){l=yn(Error(I(424)),t),t=Fc(e,t,s,r,l);break e}else for(nt=ar(t.stateNode.containerInfo.firstChild),st=t,ve=!0,jt=null,r=hd(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hn(),s===l){t=Wt(e,t,r);break e}Ve(e,t,s,r)}t=t.child}return t;case 5:return yd(t),e===null&&bi(t),s=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,i=l.children,xi(s,l)?i=null:a!==null&&xi(s,a)&&(t.flags|=32),Bd(e,t),Ve(e,t,i,r),t.child;case 6:return e===null&&bi(t),null;case 13:return Wd(e,t,r);case 4:return ho(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=gn(t,null,s,r):Ve(e,t,s,r),t.child;case 11:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:vt(s,l),$c(e,t,s,l,r);case 7:return Ve(e,t,t.pendingProps,r),t.child;case 8:return Ve(e,t,t.pendingProps.children,r),t.child;case 12:return Ve(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,l=t.pendingProps,a=t.memoizedProps,i=l.value,fe(Tl,s._currentValue),s._currentValue=i,a!==null)if(_t(a.value,i)){if(a.children===l.children&&!Je.current){t=Wt(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){i=a.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=Ut(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var b=u.pending;b===null?c.next=c:(c.next=b.next,b.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),ki(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(I(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),ki(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Ve(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,s=t.pendingProps.children,dn(t,r),l=ht(l),s=s(l),t.flags|=1,Ve(e,t,s,r),t.child;case 14:return s=t.type,l=vt(s,t.pendingProps),l=vt(s.type,l),zc(e,t,s,l,r);case 15:return Ud(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:vt(s,l),dl(e,t),t.tag=1,qe(s)?(e=!0,Nl(t)):e=!1,dn(t,r),Md(t,s,l),_i(t,s,l,r),Ci(null,t,s,!0,e,r);case 19:return Hd(e,t,r);case 22:return Vd(e,t,r)}throw Error(I(156,t.tag))};function op(e,t){return Fu(e,t)}function A0(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mt(e,t,r,s){return new A0(e,t,r,s)}function Po(e){return e=e.prototype,!(!e||!e.isReactComponent)}function F0(e){if(typeof e=="function")return Po(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yi)return 11;if(e===Xi)return 14}return 2}function ur(e,t){var r=e.alternate;return r===null?(r=mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function fl(e,t,r,s,l,a){var i=2;if(s=e,typeof e=="function")Po(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Xr:return Fr(r.children,l,a,t);case Ki:i=8,l|=8;break;case Xa:return e=mt(12,r,t,l|2),e.elementType=Xa,e.lanes=a,e;case Ga:return e=mt(13,r,t,l),e.elementType=Ga,e.lanes=a,e;case Ja:return e=mt(19,r,t,l),e.elementType=Ja,e.lanes=a,e;case yu:return Jl(r,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gu:i=10;break e;case xu:i=9;break e;case Yi:i=11;break e;case Xi:i=14;break e;case Jt:i=16,s=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=mt(i,r,t,l),t.elementType=e,t.type=s,t.lanes=a,t}function Fr(e,t,r,s){return e=mt(7,e,s,t),e.lanes=r,e}function Jl(e,t,r,s){return e=mt(22,e,s,t),e.elementType=yu,e.lanes=r,e.stateNode={isHidden:!1},e}function Oa(e,t,r){return e=mt(6,e,null,t),e.lanes=r,e}function Ia(e,t,r){return t=mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function D0(e,t,r,s,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wa(0),this.expirationTimes=wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Lo(e,t,r,s,l,a,i,o,c){return e=new D0(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=mt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},fo(a),e}function R0(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function cp(e){if(!e)return pr;e=e._reactInternals;e:{if(Vr(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var r=e.type;if(qe(r))return cd(e,r,t)}return t}function up(e,t,r,s,l,a,i,o,c){return e=Lo(r,s,!0,e,l,a,i,o,c),e.context=cp(null),r=e.current,s=We(),l=cr(r),a=Ut(s,l),a.callback=t??null,ir(r,a,l),e.current.lanes=l,js(e,l,s),Ze(e,s),e}function ql(e,t,r,s){var l=t.current,a=We(),i=cr(l);return r=cp(r),t.context===null?t.context=r:t.pendingContext=r,t=Ut(a,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ir(l,t,i),e!==null&&(St(e,l,i,a),ol(e,l,i)),i}function Ol(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function $o(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}function M0(){return null}var dp=typeof reportError=="function"?reportError:function(e){console.error(e)};function zo(e){this._internalRoot=e}Zl.prototype.render=zo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));ql(e,t,null,null)};Zl.prototype.unmount=zo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ir(function(){ql(null,e,null,null)}),t[Bt]=null}};function Zl(e){this._internalRoot=e}Zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Zt.length&&t!==0&&t<Zt[r].priority;r++);Zt.splice(r,0,e),r===0&&Qu(e)}};function Ao(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ea(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hc(){}function O0(e,t,r,s,l){if(l){if(typeof s=="function"){var a=s;s=function(){var u=Ol(i);a.call(u)}}var i=up(t,s,e,0,null,!1,!1,"",Hc);return e._reactRootContainer=i,e[Bt]=i.current,ds(e.nodeType===8?e.parentNode:e),Ir(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof s=="function"){var o=s;s=function(){var u=Ol(c);o.call(u)}}var c=Lo(e,0,!1,null,null,!1,!1,"",Hc);return e._reactRootContainer=c,e[Bt]=c.current,ds(e.nodeType===8?e.parentNode:e),Ir(function(){ql(t,c,r,s)}),c}function ta(e,t,r,s,l){var a=r._reactRootContainer;if(a){var i=a;if(typeof l=="function"){var o=l;l=function(){var c=Ol(i);o.call(c)}}ql(t,i,e,l)}else i=O0(r,t,e,l,s);return Ol(i)}Iu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Hn(t.pendingLanes);r!==0&&(qi(t,r|1),Ze(t,Ne()),!(ie&6)&&(vn=Ne()+500,hr()))}break;case 13:Ir(function(){var s=Qt(e,1);if(s!==null){var l=We();St(s,e,1,l)}}),$o(e,1)}};Zi=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var r=We();St(t,e,134217728,r)}$o(e,134217728)}};Uu=function(e){if(e.tag===13){var t=cr(e),r=Qt(e,t);if(r!==null){var s=We();St(r,e,t,s)}$o(e,t)}};Vu=function(){return ue};Bu=function(e,t){var r=ue;try{return ue=e,t()}finally{ue=r}};ii=function(e,t,r){switch(t){case"input":if(ei(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var l=Wl(s);if(!l)throw Error(I(90));wu(s),ei(s,l)}}}break;case"textarea":bu(e,r);break;case"select":t=r.value,t!=null&&an(e,!!r.multiple,t,!1)}};Tu=Eo;Pu=Ir;var I0={usingClientEntryPoint:!1,Events:[ks,Zr,Wl,Eu,Cu,Eo]},Vn={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U0={bundleType:Vn.bundleType,version:Vn.version,rendererPackageName:Vn.rendererPackageName,rendererConfig:Vn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zu(e),e===null?null:e.stateNode},findFiberByHostInstance:Vn.findFiberByHostInstance||M0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{Ul=rl.inject(U0),Lt=rl}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I0;at.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ao(t))throw Error(I(200));return R0(e,t,null,r)};at.createRoot=function(e,t){if(!Ao(e))throw Error(I(299));var r=!1,s="",l=dp;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Lo(e,1,!1,null,null,r,!1,s,l),e[Bt]=t.current,ds(e.nodeType===8?e.parentNode:e),new zo(t)};at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=zu(t),e=e===null?null:e.stateNode,e};at.flushSync=function(e){return Ir(e)};at.hydrate=function(e,t,r){if(!ea(t))throw Error(I(200));return ta(null,e,t,!0,r)};at.hydrateRoot=function(e,t,r){if(!Ao(e))throw Error(I(405));var s=r!=null&&r.hydratedSources||null,l=!1,a="",i=dp;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=up(t,null,e,1,r??null,l,!1,a,i),e[Bt]=t.current,ds(e),s)for(e=0;e<s.length;e++)r=s[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new Zl(t)};at.render=function(e,t,r){if(!ea(t))throw Error(I(200));return ta(null,e,t,!1,r)};at.unmountComponentAtNode=function(e){if(!ea(e))throw Error(I(40));return e._reactRootContainer?(Ir(function(){ta(null,null,e,!1,function(){e._reactRootContainer=null,e[Bt]=null})}),!0):!1};at.unstable_batchedUpdates=Eo;at.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!ea(r))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return ta(e,t,r,!1,s)};at.version="18.3.1-next-f1338f8080-20240426";function pp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pp)}catch(e){console.error(e)}}pp(),pu.exports=at;var V0=pu.exports,Kc=V0;Ka.createRoot=Kc.createRoot,Ka.hydrateRoot=Kc.hydrateRoot;const B0="modulepreload",Q0=function(e){return"/"+e},Yc={},ra=function(t,r,s){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));l=Promise.allSettled(r.map(c=>{if(c=Q0(c),c in Yc)return;Yc[c]=!0;const u=c.endsWith(".css"),b=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${b}`))return;const y=document.createElement("link");if(y.rel=u?"stylesheet":B0,u||(y.as="script"),y.crossOrigin="",y.href=c,o&&y.setAttribute("nonce",o),document.head.appendChild(y),u)return new Promise((h,g)=>{y.addEventListener("load",h),y.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return l.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};function W0({connected:e}){return n.jsx("header",{className:"bg-white border-b-2 border-cream-300 sticky top-0 z-50 shadow-sm",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-4",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:" Ice Cream Social Transcription"}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${e?"bg-sage-100 text-sage-700 border border-sage-200":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:e?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block w-2 h-2 bg-sage-500 rounded-full mr-2 animate-pulse"}),"Worker Active"]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block w-2 h-2 bg-gray-400 rounded-full mr-2"}),"Connecting..."]})})})]})})})}function H0({stats:e}){const[t,r]=m.useState(!1),s=e.total_episodes||0,l=e.downloaded_episodes||0,a=e.transcribed_episodes||0,i=e.in_queue||0,o=e.failed||0,c=s>0?(a/s*100).toFixed(1):0;return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden mb-8",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 px-6 py-4 cursor-pointer select-none",onClick:()=>r(u=>!u),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Episodes"}),t&&n.jsxs("p",{className:"text-white/80 text-xs mt-1",children:[a," transcribed / ",s," total (",c,"%)"]})]}),n.jsx("svg",{className:`w-5 h-5 text-white/80 transition-transform ${t?"-rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})}),!t&&n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s}),n.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]}),n.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-700",children:l}),n.jsx("div",{className:"text-xs text-blue-600",children:"Downloaded"})]}),n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-700",children:a}),n.jsx("div",{className:"text-xs text-green-600",children:"Transcribed"})]}),n.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-amber-700",children:i}),n.jsx("div",{className:"text-xs text-amber-600",children:"In Queue"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Transcription Progress"}),n.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[a," of ",s," (",c,"%)"]})]}),n.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${c}%`}})})]}),o>0&&n.jsx("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded-lg text-center",children:n.jsxs("span",{className:"text-sm text-red-700 font-medium",children:[o," failed"]})})]})]})}function K0({activity:e}){const[t,r]=m.useState(!1),s=u=>{if(!u||u===null)return"Unknown";const b=Math.floor(u/60),y=Math.floor(u%60);return`${b}m ${y}s`},l=u=>{if(!u)return"Never";try{return new Date(u).toLocaleString()}catch{return"Invalid date"}},a=()=>{var u,b,y;if(!e)return n.jsxs("div",{className:"text-center py-8 text-gray-400",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("div",{children:"Connecting..."})]});if(e.status==="idle")return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"Pipeline Status"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:n.jsx("span",{className:"text-green-600 text-sm",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Ready to Process"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Worker is online and waiting"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx("span",{className:"text-gray-400 text-sm",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium text-gray-400",children:"Queue Empty"}),n.jsx("div",{className:"text-xs text-gray-400",children:"Add episodes to start transcribing"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((u=e.worker_info)==null?void 0:u.processed_today)||0}),n.jsx("div",{className:"text-xs text-gray-500",children:"Done Today"})]}),n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((b=e.worker_info)==null?void 0:b.model)||"medium"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Model"})]})]}),e.last_activity&&n.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Last completed: ",l(e.last_activity)]})]});if(e.status==="processing"||e.status==="transcribing"){const h=e.current_episode,g=e.stage||"transcribing",E=g==="downloading",T=g==="transcribing",U=g==="diarizing",f=g==="saving",d=T||U||f,x=U||f,C=f;return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-4 bg-white border border-sky-200 rounded-lg",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"Pipeline Status"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${d?"bg-green-100":E?"bg-amber-500":"bg-gray-100"}`,children:d?n.jsx("span",{className:"text-green-600 text-sm",children:""}):E?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx("span",{className:"text-gray-400 text-sm",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:`text-sm font-medium ${d?"text-gray-900":E?"text-amber-700":"text-gray-400"}`,children:d?"Audio Downloaded":"Downloading Audio"}),n.jsx("div",{className:`text-xs ${E?"text-amber-600":"text-gray-500"}`,children:E?"Fetching MP3 file...":"File ready for processing"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${x?"bg-green-100":T?"bg-sky-500":"bg-gray-100"}`,children:x?n.jsx("span",{className:"text-green-600 text-sm",children:""}):T?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx("span",{className:"text-gray-400 text-sm",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:`text-sm font-medium ${x?"text-gray-900":T?"text-sky-700":"text-gray-400"}`,children:x?"Transcription Complete":"Transcribing Audio"}),n.jsx("div",{className:`text-xs ${T?"text-sky-600":"text-gray-500"}`,children:T?`Using ${((y=e.worker_info)==null?void 0:y.model)||"medium"} model`:"Speech to text conversion"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${C?"bg-green-100":U?"bg-purple-500":"bg-gray-100"}`,children:C?n.jsx("span",{className:"text-green-600 text-sm",children:""}):U?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx("span",{className:"text-gray-400 text-sm",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:`text-sm font-medium ${C?"text-gray-900":U?"text-purple-700":"text-gray-400"}`,children:C?"Speakers Identified":"Speaker Diarization"}),n.jsx("div",{className:`text-xs ${U?"text-purple-600":"text-gray-500"}`,children:U?"Identifying speakers with pyannote":"Who said what"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${f?"bg-green-500":"bg-gray-100"}`,children:f?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx("span",{className:"text-gray-400 text-sm",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:`text-sm font-medium ${f?"text-green-700":"text-gray-400"}`,children:f?"Saving...":"Save Transcript"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Write to database"})]})]})]})]}),h&&T&&n.jsxs("div",{className:"p-4 rounded-lg border bg-sky-50 border-sky-200",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sky-600 mb-2",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Transcribing"})]}),n.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:h.title}),h.duration&&n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Math.floor(h.duration/60)," min audio"]}),e.progress!==null&&e.progress>0&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-xs text-sky-600",children:"Transcription Progress"}),n.jsxs("span",{className:"text-xs font-bold text-sky-700",children:["~",e.progress,"%"]})]}),n.jsx("div",{className:"h-2 rounded-full overflow-hidden bg-sky-100",children:n.jsx("div",{className:"h-full transition-all duration-500 bg-sky-500",style:{width:`${e.progress}%`}})})]}),n.jsxs("div",{className:"flex gap-4 mt-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Elapsed: "}),n.jsx("span",{className:"font-medium text-gray-900",children:s(e.elapsed_seconds)})]}),e.estimated_remaining_seconds!==null&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Remaining: "}),n.jsxs("span",{className:"font-medium text-gray-900",children:["~",s(e.estimated_remaining_seconds)]})]})]})]}),h&&U&&n.jsxs("div",{className:"p-4 rounded-lg border-2 bg-purple-50 border-purple-300",children:[n.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-2",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Speaker Diarization"})]}),n.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:h.title}),n.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Identifying who said what with pyannote"}),e.progress!==null&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-xs text-purple-600",children:"Diarization Progress"}),n.jsxs("span",{className:"text-xs font-bold text-purple-700",children:["~",e.progress,"%"]})]}),n.jsx("div",{className:"h-3 rounded-full overflow-hidden bg-purple-100",children:n.jsx("div",{className:"h-full transition-all duration-500 bg-gradient-to-r from-purple-500 to-purple-600",style:{width:`${e.progress}%`}})})]}),n.jsx("div",{className:"flex gap-4 mt-3 text-xs",children:n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Elapsed: "}),n.jsx("span",{className:"font-medium text-gray-900",children:s(e.elapsed_seconds)})]})})]}),h&&E&&n.jsxs("div",{className:"p-4 rounded-lg border bg-amber-50 border-amber-200",children:[n.jsxs("div",{className:"flex items-center gap-2 text-amber-600 mb-2",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Downloading"})]}),n.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:h.title})]}),h&&f&&n.jsxs("div",{className:"p-4 rounded-lg border bg-green-50 border-green-200",children:[n.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Saving"})]}),n.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:h.title})]})]})}return n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[n.jsxs("div",{className:"text-red-700 font-semibold",children:["Unknown Status: ",e.status]}),n.jsx("pre",{className:"text-xs mt-2 text-red-600",children:JSON.stringify(e,null,2)})]})},i=(e==null?void 0:e.stage)||"idle",o=i==="diarizing"?"from-purple-600 to-purple-700":i==="transcribing"?"from-sky-600 to-sky-700":i==="downloading"?"from-amber-500 to-amber-600":"from-slate-700 to-slate-800",c=()=>{if(!e||e.status==="idle")return"Waiting for queue items";switch(i){case"downloading":return"Downloading audio...";case"transcribing":return"Transcribing audio...";case"diarizing":return"Identifying speakers...";case"saving":return"Saving results...";default:return"Processing..."}};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:`bg-gradient-to-r ${o} px-6 py-4 transition-colors duration-500 cursor-pointer select-none`,onClick:()=>r(u=>!u),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:"Processing Pipeline"}),n.jsx("p",{className:"text-white/80 text-xs mt-1",children:c()})]}),n.jsx("svg",{className:`w-5 h-5 text-white/80 transition-transform ${t?"-rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})}),!t&&n.jsx("div",{className:"p-4",children:a()})]})}const _s=typeof window<"u"&&window.__TAURI__!==void 0;console.log("Tauri detection:",{isTauri:_s,hasWindow:typeof window<"u",hasTauriGlobal:typeof window<"u"&&window.__TAURI__!==void 0,tauriObject:typeof window<"u"?window.__TAURI__:"N/A"});async function Y0(){if(!_s)throw new Error("Not running in Tauri");const{invoke:e}=await ra(async()=>{const{invoke:t}=await Promise.resolve().then(()=>sf);return{invoke:t}},void 0);return e}async function X0(){if(!_s)throw new Error("Not running in Tauri");const{listen:e}=await ra(async()=>{const{listen:t}=await import("./event-CTp9b6dn.js");return{listen:t}},[]);return e}async function Q(e,t={}){return(await Y0())(e,t)}const tt={async getEpisodes(e={}){console.log("Tauri getEpisodes called with:",e);const t=await Q("get_episodes",{filters:e});return console.log("Tauri getEpisodes result:",t),t},async getEpisode(e){return Q("get_episode",{id:e})},async refreshFeed(e="patreon",t=!1){console.log("Tauri refreshFeed called:",e,t);const r=await Q("refresh_feed",{source:e,force:t});return console.log("Tauri refreshFeed result:",r),r},async getTranscript(e){console.log("Tauri getTranscript called for episode:",e);const t=await Q("get_transcript",{episodeId:e});return console.log("Tauri getTranscript result:",t),t},async getFeedSources(){console.log("Tauri getFeedSources called");const e=await Q("get_feed_sources");return console.log("Tauri getFeedSources result:",e),e},async downloadEpisode(e){console.log("Tauri downloadEpisode called for:",e);const t=await Q("download_episode",{episodeId:e});return console.log("Tauri downloadEpisode result:",t),t},async updateSpeakerNames(e,t){console.log("Tauri updateSpeakerNames called for:",e,t);const r=await Q("update_speaker_names",{episodeId:e,speakerNames:t});return console.log("Tauri updateSpeakerNames result:",r),r},async saveTranscriptEdits(e,t){console.log("Tauri saveTranscriptEdits called for:",e);const r=await Q("save_transcript_edits",{episodeId:e,edits:t});return console.log("Tauri saveTranscriptEdits result:",r),r},async retryDiarization(e){console.log("Tauri retryDiarization called for:",e);const t=await Q("retry_diarization",{episodeId:e});return console.log("Tauri retryDiarization result:",t),t},async saveVoiceSamples(e,t){console.log("Tauri saveVoiceSamples called for:",e,t);const r=await Q("save_voice_samples",{episodeId:e,samples:t});return console.log("Tauri saveVoiceSamples result:",r),r},async getAudioPath(e){return console.log("Tauri getAudioPath called for:",e),await Q("get_audio_path",{episodeId:e})},async analyzeEpisodeContent(e,t=!0){console.log("Tauri analyzeEpisodeContent called for:",e);const r=await Q("analyze_episode_content",{episodeId:e,useLlm:t});return console.log("Tauri analyzeEpisodeContent result:",r),r},async reprocessDiarization(e){console.log("Tauri reprocessDiarization called for:",e);const t=await Q("reprocess_diarization",{episodeId:e});return console.log("Tauri reprocessDiarization result:",t),t}},Kr={async getQueue(){return Q("get_queue")},async addToQueue(e,t=0){return Q("add_to_queue",{episodeId:e,priority:t})},async removeFromQueue(e){return Q("remove_from_queue",{episodeId:e})},async stopCurrent(){return Q("stop_current_transcription")},async retryTranscription(e){return Q("retry_transcription",{episodeId:e})},async getStatus(){return Q("get_queue_status")}},G0={async getStats(){console.log("Tauri getStats called");const e=await Q("get_stats");return console.log("Tauri getStats result:",e),e}},J0={async getStatus(){return Q("get_worker_status")}};async function q0(e){if(!_s)return console.log("Not in Tauri, skipping event listeners"),()=>{};const t=await X0(),r=[];if(e.onStatusUpdate){const s=await t("status_update",l=>{e.onStatusUpdate(l.payload)});r.push(s)}if(e.onQueueUpdate){const s=await t("queue_update",l=>{e.onQueueUpdate(l.payload)});r.push(s)}if(e.onStatsUpdate){const s=await t("stats_update",l=>{e.onStatsUpdate(l.payload)});r.push(s)}if(e.onTranscriptionComplete){const s=await t("transcription_complete",l=>{e.onTranscriptionComplete(l.payload)});r.push(s)}if(e.onTranscriptionFailed){const s=await t("transcription_failed",l=>{e.onTranscriptionFailed(l.payload)});r.push(s)}return()=>{r.forEach(s=>s())}}const Ua={async getSetting(e){return Q("get_setting",{key:e})},async setSetting(e,t){return Q("set_setting",{key:e,value:t})},async getAllSettings(){return Q("get_all_settings")}},Gt={async getSpeakers(){return Q("get_speakers")},async createSpeaker(e,t=null,r=!1){return Q("create_speaker",{name:e,shortName:t,isHost:r})},async updateSpeaker(e,t,r=null,s=!1){return Q("update_speaker",{id:e,name:t,shortName:r,isHost:s})},async deleteSpeaker(e){return Q("delete_speaker",{id:e})},async getSpeakerStats(){return Q("get_speaker_stats")},async linkEpisodeSpeaker(e,t,r){return Q("link_episode_speaker",{episodeId:e,diarizationLabel:t,speakerId:r})},async getVoiceLibrary(){return Q("get_voice_library")},async getVoiceSamplePath(e){return Q("get_voice_sample_path",{speakerName:e})}},pe={async getChapterTypes(){return Q("get_chapter_types")},async createChapterType(e,t,r,s){return Q("create_chapter_type",{name:e,description:t,color:r,icon:s})},async getEpisodeChapters(e){return Q("get_episode_chapters",{episodeId:e})},async createEpisodeChapter(e,t,r,s,l,a,i){return Q("create_episode_chapter",{episodeId:e,chapterTypeId:t,title:r,startTime:s,endTime:l,startSegmentIdx:a,endSegmentIdx:i})},async deleteEpisodeChapter(e){return Q("delete_episode_chapter",{chapterId:e})},async getCharacters(){return Q("get_characters")},async createCharacter(e,t,r,s){return Q("create_character",{name:e,shortName:t,description:r,catchphrase:s})},async updateCharacter(e,t,r,s,l){return Q("update_character",{id:e,name:t,shortName:r,description:s,catchphrase:l})},async deleteCharacter(e){return Q("delete_character",{id:e})},async addCharacterAppearance(e,t,r,s,l){return Q("add_character_appearance",{characterId:e,episodeId:t,startTime:r,endTime:s,segmentIdx:l})},async getSponsors(){return Q("get_sponsors")},async createSponsor(e,t,r,s){return Q("create_sponsor",{name:e,tagline:t,description:r,isReal:s})},async updateSponsor(e,t,r,s,l){return Q("update_sponsor",{id:e,name:t,tagline:r,description:s,isReal:l})},async deleteSponsor(e){return Q("delete_sponsor",{id:e})},async addSponsorMention(e,t,r,s,l){return Q("add_sponsor_mention",{sponsorId:e,episodeId:t,startTime:r,endTime:s,segmentIdx:l})},async getCharacterAppearancesForEpisode(e){return Q("get_character_appearances_for_episode",{episodeId:e})},async deleteCharacterAppearance(e){return Q("delete_character_appearance",{id:e})},async getAudioDrops(){return Q("get_audio_drops")},async createAudioDrop(e,t=null,r=null,s=null){return Q("create_audio_drop",{name:e,transcriptText:t,description:r,category:s})},async deleteAudioDrop(e){return Q("delete_audio_drop",{id:e})},async addAudioDropInstance(e,t,r=null,s=null,l=null,a=null){return Q("add_audio_drop_instance",{audioDropId:e,episodeId:t,segmentIdx:r,startTime:s,endTime:l,notes:a})},async getAudioDropInstances(e){return Q("get_audio_drop_instances",{episodeId:e})},async deleteAudioDropInstance(e){return Q("delete_audio_drop_instance",{id:e})},async createFlaggedSegment(e,t,r,s=null,l=null,a=null,i=null){return Q("create_flagged_segment",{episodeId:e,segmentIdx:t,flagType:r,correctedSpeaker:s,characterId:l,notes:a,speakerIds:i})},async getFlaggedSegments(e){return Q("get_flagged_segments",{episodeId:e})},async updateFlaggedSegment(e,t=null,r=null,s=null,l=null,a=null,i=null){return Q("update_flagged_segment",{id:e,flagType:t,correctedSpeaker:r,characterId:s,notes:l,speakerIds:a,resolved:i})},async deleteFlaggedSegment(e){return Q("delete_flagged_segment",{id:e})},async getUnresolvedFlagCount(e){return Q("get_unresolved_flag_count",{episodeId:e})}},Er={async searchTranscripts(e,t=50,r=0){console.log("Tauri searchTranscripts called:",e);const s=await Q("search_transcripts",{query:e,limit:t,offset:r});return console.log("Tauri searchTranscripts result:",s),s},async getSearchStats(){return Q("get_search_stats")},async indexEpisodeTranscript(e,t){return console.log("Tauri indexEpisodeTranscript called for:",e),Q("index_episode_transcript",{episodeId:e,segments:t})},async indexAllTranscripts(){return console.log("Tauri indexAllTranscripts called"),Q("index_all_transcripts")},async getDetectedContent(e){return Q("get_detected_content",{episodeId:e})},async getDetectedContentByType(e){return Q("get_detected_content_by_type",{contentType:e})},async addDetectedContent(e,t,r,s,l,a,i,o,c){return Q("add_detected_content",{episodeId:e,contentType:t,name:r,description:s,startTime:l,endTime:a,segmentIdx:i,confidence:o,rawText:c})}},Ft={async getOllamaStatus(){return Q("get_ollama_status")},async getPrompts(){return Q("get_extraction_prompts")},async getPrompt(e){return Q("get_extraction_prompt",{promptId:e})},async createPrompt(e,t,r,s,l,a){return Q("create_extraction_prompt",{name:e,description:t,contentType:r,promptText:s,systemPrompt:l,outputSchema:a})},async updatePrompt(e,t,r,s,l,a,i,o){return Q("update_extraction_prompt",{promptId:e,name:t,description:r,contentType:s,promptText:l,systemPrompt:a,outputSchema:i,isActive:o})},async deletePrompt(e){return Q("delete_extraction_prompt",{promptId:e})},async runExtraction(e,t){return Q("run_extraction",{promptId:e,episodeId:t})},async testPrompt(e,t,r){return Q("test_extraction_prompt",{promptText:e,systemPrompt:t,sampleText:r})},async getExtractionRuns(e,t){return Q("get_extraction_runs",{episodeId:e,limit:t})}},B=_s,Be="/api/v2";class Va extends Error{constructor(t,r,s){super(t),this.name="APIError",this.status=r,this.data=s}}async function Qe(e,t={}){try{const r=await fetch(e,{headers:{"Content-Type":"application/json",...t.headers},...t}),s=await r.json();if(!r.ok)throw new Va(s.error||"API request failed",r.status,s);return s}catch(r){throw r instanceof Va?r:new Va(r.message,0,null)}}const ge={async getEpisodes(e={}){if(B)try{return await tt.getEpisodes(e)}catch(r){throw console.error("Tauri getEpisodes failed:",r),r}const t=new URLSearchParams(e).toString();return Qe(`${Be}/episodes?${t}`)},async getEpisode(e){if(B)try{return await tt.getEpisode(e)}catch(t){throw console.error("Tauri getEpisode failed:",t),t}return Qe(`${Be}/episodes/${e}`)},async refreshFeed(e="patreon",t=!1){if(B)try{return await tt.refreshFeed(e,t)}catch(r){throw console.error("Tauri refreshFeed failed:",r),r}return Qe(`${Be}/episodes/refresh-feed`,{method:"POST",body:JSON.stringify({source:e,force:t})})},async getRefreshStatus(e){return B?{status:"idle"}:Qe(`${Be}/episodes/refresh-status/${e}`)},async getFeedSources(){if(B)try{return await tt.getFeedSources()}catch(e){throw console.error("Tauri getFeedSources failed:",e),e}return Qe(`${Be}/feeds/sources`)},async getTranscript(e){if(B)try{return await tt.getTranscript(e)}catch(t){throw console.error("Tauri getTranscript failed:",t),t}return Qe(`${Be}/episodes/${e}/transcript`)},async updateSpeakerNames(e,t){if(B)try{return await tt.updateSpeakerNames(e,t)}catch(r){throw console.error("Tauri updateSpeakerNames failed:",r),r}throw new Error("Speaker name updates require Tauri")},async saveTranscriptEdits(e,t){if(B)try{return await tt.saveTranscriptEdits(e,t)}catch(r){throw console.error("Tauri saveTranscriptEdits failed:",r),r}throw new Error("Transcript edits require Tauri")},async retryDiarization(e){if(B)try{return await tt.retryDiarization(e)}catch(t){throw console.error("Tauri retryDiarization failed:",t),t}throw new Error("Diarization requires Tauri")},async saveVoiceSamples(e,t){if(B)try{return await tt.saveVoiceSamples(e,t)}catch(r){throw console.error("Tauri saveVoiceSamples failed:",r),r}throw new Error("Voice samples require Tauri")},async getAudioPath(e){if(B)try{return await tt.getAudioPath(e)}catch(t){throw console.error("Tauri getAudioPath failed:",t),t}throw new Error("Audio path requires Tauri")},async downloadEpisode(e){if(B)try{return await tt.downloadEpisode(e)}catch(t){throw console.error("Tauri downloadEpisode failed:",t),t}return Qe(`${Be}/episodes/${e}/download`,{method:"POST"})},async analyzeEpisodeContent(e,t=!0){if(B)try{return await tt.analyzeEpisodeContent(e,t)}catch(r){throw console.error("Tauri analyzeEpisodeContent failed:",r),r}throw new Error("Content analysis requires Tauri")},async reprocessDiarization(e){if(B)try{return await tt.reprocessDiarization(e)}catch(t){throw console.error("Tauri reprocessDiarization failed:",t),t}throw new Error("Reprocess diarization requires Tauri")}},bt={async getQueue(){if(B)try{return await Kr.getQueue()}catch(e){throw console.error("Tauri getQueue failed:",e),e}return Qe(`${Be}/queue`)},async addToQueue(e,t=0){if(B)try{return await Kr.addToQueue(e,t),{success:!0}}catch(r){throw console.error("Tauri addToQueue failed:",r),r}return Qe(`${Be}/queue/add`,{method:"POST",body:JSON.stringify({episode_id:e,priority:t})})},async removeFromQueue(e){if(B)try{return await Kr.removeFromQueue(e),{success:!0}}catch(t){throw console.error("Tauri removeFromQueue failed:",t),t}return Qe(`${Be}/queue/remove/${e}`,{method:"DELETE"})},async stopCurrent(){if(B)try{return await Kr.stopCurrent(),{success:!0}}catch(e){throw console.error("Tauri stopCurrent failed:",e),e}return Qe(`${Be}/queue/stop-current`,{method:"POST"})},async retryTranscription(e){if(B)try{return await Kr.retryTranscription(e),{success:!0}}catch(t){throw console.error("Tauri retryTranscription failed:",t),t}return Qe(`${Be}/queue/retry/${e}`,{method:"POST"})},async getStatus(){if(B)try{return await Kr.getStatus()}catch(e){throw console.error("Tauri getStatus failed:",e),e}return Qe(`${Be}/queue/status`)}},Z0={async getStats(){if(B)try{return await G0.getStats()}catch(e){throw console.error("Tauri getStats failed:",e),e}return Qe(`${Be}/stats`)}},ef={async getStatus(){if(B)try{return await J0.getStatus()}catch(e){throw console.error("Tauri workerStatus failed:",e),e}return Qe(`${Be}/worker/status`)}},tf=q0,Xc={async getSetting(e){if(B)try{return await Ua.getSetting(e)}catch(t){return console.error("Tauri getSetting failed:",t),null}return null},async setSetting(e,t){if(B)try{return await Ua.setSetting(e,t)}catch(r){throw console.error("Tauri setSetting failed:",r),r}throw new Error("Settings only available in Tauri mode")},async getAllSettings(){if(B)try{return await Ua.getAllSettings()}catch(e){return console.error("Tauri getAllSettings failed:",e),{}}return{}}},Rt={async getSpeakers(){if(B)try{return await Gt.getSpeakers()}catch(e){return console.error("Tauri getSpeakers failed:",e),[]}return[]},async createSpeaker(e,t=null,r=!1){if(B)return await Gt.createSpeaker(e,t,r);throw new Error("Speakers only available in Tauri mode")},async updateSpeaker(e,t,r=null,s=!1){if(B)return await Gt.updateSpeaker(e,t,r,s);throw new Error("Speakers only available in Tauri mode")},async deleteSpeaker(e){if(B)return await Gt.deleteSpeaker(e);throw new Error("Speakers only available in Tauri mode")},async getSpeakerStats(){if(B)try{return await Gt.getSpeakerStats()}catch(e){return console.error("Tauri getSpeakerStats failed:",e),[]}return[]},async linkEpisodeSpeaker(e,t,r){if(B)return await Gt.linkEpisodeSpeaker(e,t,r);throw new Error("Speakers only available in Tauri mode")},async getVoiceLibrary(){if(B)try{return await Gt.getVoiceLibrary()}catch(e){return console.error("Tauri getVoiceLibrary failed:",e),[]}return[]},async getVoiceSamplePath(e){if(B)try{return await Gt.getVoiceSamplePath(e)}catch(t){return console.error("Tauri getVoiceSamplePath failed:",t),null}return null}},ee={async getChapterTypes(){if(B)try{return await pe.getChapterTypes()}catch(e){return console.error("Tauri getChapterTypes failed:",e),[]}return[]},async createChapterType(e,t,r,s){if(B)return await pe.createChapterType(e,t,r,s);throw new Error("Content only available in Tauri mode")},async getEpisodeChapters(e){if(B)try{return await pe.getEpisodeChapters(e)}catch(t){return console.error("Tauri getEpisodeChapters failed:",t),[]}return[]},async createEpisodeChapter(e,t,r,s,l,a,i){if(B)return await pe.createEpisodeChapter(e,t,r,s,l,a,i);throw new Error("Content only available in Tauri mode")},async deleteEpisodeChapter(e){if(B)return await pe.deleteEpisodeChapter(e);throw new Error("Content only available in Tauri mode")},async getCharacters(){if(B)try{return await pe.getCharacters()}catch(e){return console.error("Tauri getCharacters failed:",e),[]}return[]},async createCharacter(e,t,r,s){if(B)return await pe.createCharacter(e,t,r,s);throw new Error("Content only available in Tauri mode")},async updateCharacter(e,t,r,s,l){if(B)return await pe.updateCharacter(e,t,r,s,l);throw new Error("Content only available in Tauri mode")},async deleteCharacter(e){if(B)return await pe.deleteCharacter(e);throw new Error("Content only available in Tauri mode")},async addCharacterAppearance(e,t,r,s,l){if(B)return await pe.addCharacterAppearance(e,t,r,s,l);throw new Error("Content only available in Tauri mode")},async getCharacterAppearancesForEpisode(e){if(B)try{return await pe.getCharacterAppearancesForEpisode(e)}catch(t){return console.error("Tauri getCharacterAppearancesForEpisode failed:",t),[]}return[]},async deleteCharacterAppearance(e){if(B)return await pe.deleteCharacterAppearance(e);throw new Error("Content only available in Tauri mode")},async getAudioDrops(){if(B)try{return await pe.getAudioDrops()}catch(e){return console.error("Tauri getAudioDrops failed:",e),[]}return[]},async createAudioDrop(e,t=null,r=null,s=null){if(B)return await pe.createAudioDrop(e,t,r,s);throw new Error("Content only available in Tauri mode")},async deleteAudioDrop(e){if(B)return await pe.deleteAudioDrop(e);throw new Error("Content only available in Tauri mode")},async addAudioDropInstance(e,t,r=null,s=null,l=null,a=null){if(B)return await pe.addAudioDropInstance(e,t,r,s,l,a);throw new Error("Content only available in Tauri mode")},async getAudioDropInstances(e){if(B)try{return await pe.getAudioDropInstances(e)}catch(t){return console.error("Tauri getAudioDropInstances failed:",t),[]}return[]},async deleteAudioDropInstance(e){if(B)return await pe.deleteAudioDropInstance(e);throw new Error("Content only available in Tauri mode")},async createFlaggedSegment(e,t,r,s=null,l=null,a=null,i=null){if(B)return await pe.createFlaggedSegment(e,t,r,s,l,a,i);throw new Error("Content only available in Tauri mode")},async getFlaggedSegments(e){if(B)try{return await pe.getFlaggedSegments(e)}catch(t){return console.error("Tauri getFlaggedSegments failed:",t),[]}return[]},async updateFlaggedSegment(e,t=null,r=null,s=null,l=null,a=null,i=null){if(B)return await pe.updateFlaggedSegment(e,t,r,s,l,a,i);throw new Error("Content only available in Tauri mode")},async deleteFlaggedSegment(e){if(B)return await pe.deleteFlaggedSegment(e);throw new Error("Content only available in Tauri mode")},async getUnresolvedFlagCount(e){if(B)try{return await pe.getUnresolvedFlagCount(e)}catch(t){return console.error("Tauri getUnresolvedFlagCount failed:",t),0}return 0},async getSponsors(){if(B)try{return await pe.getSponsors()}catch(e){return console.error("Tauri getSponsors failed:",e),[]}return[]},async createSponsor(e,t,r,s){if(B)return await pe.createSponsor(e,t,r,s);throw new Error("Content only available in Tauri mode")},async updateSponsor(e,t,r,s,l){if(B)return await pe.updateSponsor(e,t,r,s,l);throw new Error("Content only available in Tauri mode")},async deleteSponsor(e){if(B)return await pe.deleteSponsor(e);throw new Error("Content only available in Tauri mode")},async addSponsorMention(e,t,r,s,l){if(B)return await pe.addSponsorMention(e,t,r,s,l);throw new Error("Content only available in Tauri mode")}},hl={async searchTranscripts(e,t=50,r=0){if(B)try{return await Er.searchTranscripts(e,t,r)}catch(s){throw console.error("Tauri searchTranscripts failed:",s),s}throw new Error("Search only available in Tauri mode")},async getSearchStats(){if(B)try{return await Er.getSearchStats()}catch(e){return console.error("Tauri getSearchStats failed:",e),{indexed_segments:0,unindexed_episode_count:0}}return{indexed_segments:0,unindexed_episode_count:0}},async indexEpisodeTranscript(e,t){if(B)try{return await Er.indexEpisodeTranscript(e,t)}catch(r){throw console.error("Tauri indexEpisodeTranscript failed:",r),r}throw new Error("Search indexing only available in Tauri mode")},async indexAllTranscripts(){if(B)try{return await Er.indexAllTranscripts()}catch(e){throw console.error("Tauri indexAllTranscripts failed:",e),e}throw new Error("Search indexing only available in Tauri mode")},async getDetectedContent(e){if(B)try{return await Er.getDetectedContent(e)}catch(t){return console.error("Tauri getDetectedContent failed:",t),[]}return[]},async getDetectedContentByType(e){if(B)try{return await Er.getDetectedContentByType(e)}catch(t){return console.error("Tauri getDetectedContentByType failed:",t),[]}return[]},async addDetectedContent(e,t,r,s,l,a,i,o,c){if(B)return await Er.addDetectedContent(e,t,r,s,l,a,i,o,c);throw new Error("Search only available in Tauri mode")}},Cr={async getOllamaStatus(){return B?await Ft.getOllamaStatus():{running:!1,model:"",model_available:!1,available_models:[],error:"Not in Tauri mode"}},async getPrompts(){return B?await Ft.getPrompts():[]},async getPrompt(e){return B?await Ft.getPrompt(e):null},async createPrompt(e,t,r,s,l,a){if(B)return await Ft.createPrompt(e,t,r,s,l,a);throw new Error("Extraction only available in Tauri mode")},async updatePrompt(e,t,r,s,l,a,i,o){if(B)return await Ft.updatePrompt(e,t,r,s,l,a,i,o);throw new Error("Extraction only available in Tauri mode")},async deletePrompt(e){if(B)return await Ft.deletePrompt(e);throw new Error("Extraction only available in Tauri mode")},async runExtraction(e,t){if(B)return await Ft.runExtraction(e,t);throw new Error("Extraction only available in Tauri mode")},async testPrompt(e,t,r){if(B)return await Ft.testPrompt(e,t,r);throw new Error("Extraction only available in Tauri mode")},async getExtractionRuns(e,t){return B?await Ft.getExtractionRuns(e,t):[]}};function rf(e,t=!1){return window.__TAURI_INTERNALS__.transformCallback(e,t)}async function nf(e,t={},r){return window.__TAURI_INTERNALS__.invoke(e,t,r)}function na(e,t="asset"){return window.__TAURI_INTERNALS__.convertFileSrc(e,t)}const sf=Object.freeze(Object.defineProperty({__proto__:null,convertFileSrc:na,invoke:nf,transformCallback:rf},Symbol.toStringTag,{value:"Module"})),Ba=[{id:"wrong_speaker",label:"Wrong Speaker",icon:"",description:"Speaker assignment is incorrect",needsSpeaker:!0},{id:"character_voice",label:"Character Voice",icon:"",description:"This is a character speaking",needsCharacter:!0},{id:"multiple_speakers",label:"Multiple Speakers",icon:"",description:"Overlapping speech from multiple people"},{id:"audio_issue",label:"Audio Issue",icon:"",description:"Transcription error or audio problem"},{id:"other",label:"Other",icon:"",description:"Add a note about this segment",needsNotes:!0}],Gc={SPEAKER_00:{bg:"bg-blue-100",text:"text-blue-700",label:"bg-blue-200 text-blue-800",border:"border-blue-300",ring:"ring-blue-400"},SPEAKER_01:{bg:"bg-green-100",text:"text-green-700",label:"bg-green-200 text-green-800",border:"border-green-300",ring:"ring-green-400"},SPEAKER_02:{bg:"bg-orange-100",text:"text-orange-700",label:"bg-orange-200 text-orange-800",border:"border-orange-300",ring:"ring-orange-400"},SPEAKER_03:{bg:"bg-purple-100",text:"text-purple-700",label:"bg-purple-200 text-purple-800",border:"border-purple-300",ring:"ring-purple-400"},SPEAKER_04:{bg:"bg-pink-100",text:"text-pink-700",label:"bg-pink-200 text-pink-800",border:"border-pink-300",ring:"ring-pink-400"},SPEAKER_05:{bg:"bg-cyan-100",text:"text-cyan-700",label:"bg-cyan-200 text-cyan-800",border:"border-cyan-300",ring:"ring-cyan-400"},UNKNOWN:{bg:"bg-gray-100",text:"text-gray-600",label:"bg-gray-200 text-gray-600",border:"border-gray-300",ring:"ring-gray-400"}},Jc=[{id:"Matt Donnelly",short:"Matt"},{id:"Paul Mattingly",short:"Paul"},{id:"Jacob Smith",short:"Jacob"}],qc=e=>Gc[e]||Gc.UNKNOWN,Qa=e=>{if(!e||isNaN(e))return"00:00";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),s=Math.floor(e%60);return t>0?`${t}:${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${r}:${s.toString().padStart(2,"0")}`};function mp({episode:e,onClose:t}){const[r,s]=m.useState(null),[l,a]=m.useState(!0),[i,o]=m.useState(null),[c,u]=m.useState(""),[b,y]=m.useState("speakers"),[h,g]=m.useState({}),[E,T]=m.useState(!1),[U,f]=m.useState(null),[d,x]=m.useState(!1),[C,w]=m.useState(null),[j,F]=m.useState({}),[$,_]=m.useState(!1),[D,Z]=m.useState(!1),[Y,v]=m.useState(null),[R,L]=m.useState({}),[X,P]=m.useState({}),[A,H]=m.useState([]),[W,V]=m.useState(!1),[q,de]=m.useState([]),[oe,re]=m.useState([]),[le,ot]=m.useState([]),[Ns,kn]=m.useState([]),[Sn,Es]=m.useState(null),[Se,ye]=m.useState(null),[Ae,et]=m.useState(null),[gr,_n]=m.useState(!1),[Kt,Br]=m.useState(null),[zt,Yt]=m.useState(!1),[xr,Cs]=m.useState(""),[Nt,yr]=m.useState(!1),[Ye,Qr]=m.useState(0),[xt,Ts]=m.useState(0),[Et,sa]=m.useState(!0),[Nn,la]=m.useState(1),me=m.useRef(null),aa=m.useRef(null),ct=m.useRef({});m.useEffect(()=>{e!=null&&e.id&&vr()},[e]);const vr=async()=>{try{a(!0),o(null);const[p,S,O,G,te,ne,_e]=await Promise.all([ge.getTranscript(e.id),Rt.getVoiceLibrary().catch(()=>[]),ee.getChapterTypes().catch(()=>[]),ee.getEpisodeChapters(e.id).catch(()=>[]),ee.getFlaggedSegments(e.id).catch(()=>[]),ee.getCharacterAppearancesForEpisode(e.id).catch(()=>[]),ee.getCharacters().catch(()=>[])]);s(p),H(S),de(O),re(G),ot(ne),kn(_e);const Os={};te.forEach(zn=>{Os[zn.segment_idx]=zn}),P(Os),p.speaker_names&&g(p.speaker_names)}catch(p){console.error("Error loading transcript:",p),o(p.message||"Failed to load transcript")}finally{a(!1)}},ce=m.useMemo(()=>{if(!(r!=null&&r.segments_json))return null;try{const p=JSON.parse(r.segments_json);if(Array.isArray(p)&&p.length>0)return p}catch(p){console.error("Failed to parse segments JSON:",p)}return null},[r==null?void 0:r.segments_json]),se=m.useMemo(()=>{if(!ce)return[];const p=new Set;return ce.forEach(S=>{S.speaker&&S.speaker!=="UNKNOWN"&&p.add(S.speaker)}),Array.from(p).sort()},[ce]),wr=m.useMemo(()=>ce?ce.some(p=>p.speaker&&p.speaker!=="UNKNOWN"):!1,[ce]),Ps=p=>h[p]||p,Pe=m.useCallback(p=>{var S;if((S=p.timestamps)!=null&&S.from){const G=p.timestamps.from.replace(",",".").split(":");if(G.length===3)return parseFloat(G[0])*3600+parseFloat(G[1])*60+parseFloat(G[2])}return typeof p.start=="number"?p.start:0},[]),ut=m.useCallback(p=>{var S;if((S=p.timestamps)!=null&&S.to){const G=p.timestamps.to.replace(",",".").split(":");if(G.length===3)return parseFloat(G[0])*3600+parseFloat(G[1])*60+parseFloat(G[2])}return typeof p.end=="number"?p.end:Pe(p)+10},[Pe]),jr=m.useMemo(()=>{if(!ce||!Nt)return-1;for(let p=0;p<ce.length;p++){const S=Pe(ce[p]),O=ut(ce[p]);if(Ye>=S&&Ye<O)return p}return-1},[ce,Ye,Nt,Pe,ut]);m.useEffect(()=>{Et&&jr>=0&&ct.current[jr]&&ct.current[jr].scrollIntoView({behavior:"smooth",block:"center"})},[jr,Et]);const br=p=>{var S;if((S=p.timestamps)!=null&&S.from)return p.timestamps.from.replace(",",".").slice(0,8);if(typeof p.start=="number"){const O=Math.floor(p.start/60),G=Math.floor(p.start%60);return`${O.toString().padStart(2,"0")}:${G.toString().padStart(2,"0")}`}return""},En=p=>{if(!c||!p)return p;try{const S=new RegExp(`(${c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return p.split(S).map((G,te)=>S.test(G)?n.jsx("mark",{className:"bg-yellow-200",children:G},te):G)}catch{return p}},kr=m.useMemo(()=>{if(!ce)return null;if(!c)return ce;const p=c.toLowerCase();return ce.filter(S=>{var O;return(O=S.text)==null?void 0:O.toLowerCase().includes(p)})},[ce,c]),Cn=(p,S)=>{g(O=>({...O,[p]:S}))},Ls=async()=>{try{x(!0),await ge.updateSpeakerNames(e.id,h),T(!1)}catch(p){console.error("Failed to save speaker names:",p),alert("Failed to save speaker names: "+p.message)}finally{x(!1)}},$s=(p,S)=>{var O;return((O=j[S])==null?void 0:O.speaker)??p.speaker},Sr=(p,S)=>{var O;return((O=j[S])==null?void 0:O.text)??p.text},zs=p=>{w(C===p?null:p)},At=(p,S)=>{g(O=>({...O,[p]:S})),_(!0),w(null)},As=p=>{L(S=>{const O={...S};return O[p]?delete O[p]:O[p]=!0,O}),_(!0)},_r=async(p,S,O=null,G=null,te=null)=>{try{const ne=await ee.createFlaggedSegment(e.id,p,S,O,G,te);P(_e=>({..._e,[p]:{id:ne,episode_id:e.id,segment_idx:p,flag_type:S,corrected_speaker:O,character_id:G,notes:te,resolved:!1}})),ye(null),et(null)}catch(ne){console.error("Error creating flag:",ne),alert(`Failed to create flag: ${ne.message}`)}},Tn=async p=>{const S=X[p];if(S)try{await ee.deleteFlaggedSegment(S.id),P(O=>{const G={...O};return delete G[p],G})}catch(O){console.error("Error deleting flag:",O),alert(`Failed to delete flag: ${O.message}`)}},Pn=async(p,S)=>{const O=ce[p];if(O)try{const G=await ee.addCharacterAppearance(S,e.id,Pe(O),ut(O),p),te=await ee.getCharacterAppearancesForEpisode(e.id);ot(te),ye(null),et(null)}catch(G){console.error("Error adding character appearance:",G),alert(`Failed to add character: ${G.message}`)}},Ln=async(p,S)=>{if(S.trim())try{const O=await ee.createCharacter(S.trim(),null,null,null);await Pn(p,O);const G=await ee.getCharacters();kn(G),Cs("")}catch(O){console.error("Error creating character:",O),alert(`Failed to create character: ${O.message}`)}},ia=async p=>{try{await ee.deleteCharacterAppearance(p);const S=await ee.getCharacterAppearancesForEpisode(e.id);ot(S)}catch(S){console.error("Error removing character:",S)}},Fs=p=>le.find(S=>S.segment_idx===p),Nr=Object.keys(X).length;Object.values(X).filter(p=>!p.resolved).length;const Ds=async()=>{if(!W)try{V(!0),await ge.retryDiarization(e.id),await vr()}catch(p){console.error("Error running diarization:",p),alert(`Diarization failed: ${p.message||"Unknown error"}`)}finally{V(!1)}},oa=async(p,S)=>{if(!ce||S==null)return;const O=ce[S],G=O.start??Pe(O),te=O.end??ut(O);try{await ee.createEpisodeChapter(e.id,p,null,G,te,S,S);const ne=await ee.getEpisodeChapters(e.id);re(ne),ye(null),et(null)}catch(ne){console.error("Error creating chapter:",ne),alert(`Failed to create chapter: ${ne.message}`)}},ca=async p=>{try{await ee.deleteEpisodeChapter(p);const S=await ee.getEpisodeChapters(e.id);re(S)}catch(S){console.error("Error deleting chapter:",S)}},ua=async()=>{try{const p=await hl.getDetectedContent(e.id);Br(p)}catch(p){console.error("Error loading detected content:",p)}},da=async(p=!0)=>{if(!gr)try{_n(!0);const S=await ge.analyzeEpisodeContent(e.id,p),O=[...(S.characters||[]).map(G=>({...G,content_type:"character"})),...(S.commercials||[]).map(G=>({...G,content_type:"commercial"})),...(S.bits||[]).map(G=>({...G,content_type:"bit"}))];Br(O),Yt(!0)}catch(S){console.error("Error analyzing content:",S),alert(`Content analysis failed: ${S.message||"Unknown error"}`)}finally{_n(!1)}};m.useEffect(()=>{e!=null&&e.id&&ua()},[e==null?void 0:e.id]);const $n=p=>oe.find(S=>S.start_segment_idx<=p&&S.end_segment_idx>=p),Rs=m.useMemo(()=>{const p={};return Object.keys(R).forEach(S=>{const O=ce==null?void 0:ce[parseInt(S)];O!=null&&O.speaker&&(p[O.speaker]=(p[O.speaker]||0)+1)}),p},[R,ce]),pa=async()=>{if($)try{if(Z(!0),await ge.updateSpeakerNames(e.id,h),Object.keys(j).length>0&&await ge.saveTranscriptEdits(e.id,j),Object.keys(R).length>0&&ce){const p=Object.keys(R).map(S=>{const O=ce[parseInt(S)],G=h[O.speaker]||O.speaker;return{speaker:O.speaker,speakerName:G,startTime:Pe(O),endTime:ut(O),text:O.text}});try{await ge.saveVoiceSamples(e.id,p),console.log(`Saved ${p.length} voice samples`)}catch(S){console.error("Failed to save voice samples:",S)}}_(!1),F({}),L({}),vr()}catch(p){console.error("Failed to save edits:",p),alert("Failed to save edits: "+p.message)}finally{Z(!1)}};m.useEffect(()=>{const p=async()=>{try{const S=await ge.getAudioPath(e.id);S&&v(na(S))}catch(S){console.error("Failed to load audio path:",S)}};e!=null&&e.id&&p()},[e]),m.useEffect(()=>{const p=me.current;if(!p)return;const S=()=>Qr(p.currentTime),O=()=>Ts(p.duration),G=()=>yr(!0),te=()=>yr(!1),ne=()=>{yr(!1),Qr(0)};return p.addEventListener("timeupdate",S),p.addEventListener("durationchange",O),p.addEventListener("play",G),p.addEventListener("pause",te),p.addEventListener("ended",ne),()=>{p.removeEventListener("timeupdate",S),p.removeEventListener("durationchange",O),p.removeEventListener("play",G),p.removeEventListener("pause",te),p.removeEventListener("ended",ne)}},[Y]);const ma=()=>{me.current&&(Nt?me.current.pause():me.current.play())},Wr=p=>{me.current&&(me.current.currentTime=p,Qr(p))},Ms=p=>{var O;const S=Pe(p);Wr(S),Nt||(O=me.current)==null||O.play()},k=p=>{const S=p.currentTarget.getBoundingClientRect(),G=(p.clientX-S.left)/S.width*xt;Wr(G)},N=p=>{me.current&&Wr(Math.max(0,Math.min(xt,Ye+p)))},z=()=>{const p=[1,1.25,1.5,1.75,2],S=p.indexOf(Nn),O=p[(S+1)%p.length];la(O),me.current&&(me.current.playbackRate=O)},K=(e==null?void 0:e.title)||"Transcript";return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] flex flex-col shadow-2xl",onClick:p=>p.stopPropagation(),children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 truncate",children:K}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(r==null?void 0:r.language)&&n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:r.language}),r!=null&&r.has_diarization?n.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded text-xs flex items-center gap-1",children:[" ",r.num_speakers," speakers"]}):r&&n.jsx("button",{onClick:Ds,disabled:W,className:"px-2 py-0.5 bg-orange-100 hover:bg-orange-200 text-orange-700 rounded text-xs flex items-center gap-1 transition-colors disabled:opacity-50",title:"Run speaker diarization to identify who is speaking",children:W?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"animate-spin",children:""})," Running..."]}):n.jsxs(n.Fragment,{children:[" No speaker data - ",n.jsx("span",{className:"underline",children:"Run Diarization"})]})}),n.jsx("button",{onClick:()=>da(!0),disabled:gr,className:"px-2 py-0.5 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded text-xs flex items-center gap-1 transition-colors disabled:opacity-50",title:"Analyze transcript for characters, commercials, and bits",children:gr?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"animate-spin",children:""})," Analyzing..."]}):n.jsx(n.Fragment,{children:" Analyze Content"})}),Kt&&Kt.length>0&&n.jsxs("button",{onClick:()=>Yt(!zt),className:`px-2 py-0.5 rounded text-xs flex items-center gap-1 transition-colors ${zt?"bg-indigo-500 text-white":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`,children:[" ",Kt.length," items found"]})]})]}),n.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-2xl leading-none p-1",onClick:t,children:""})]})}),Y&&n.jsxs("div",{className:"px-6 py-3 bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-purple-100",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:ma,className:"w-12 h-12 flex items-center justify-center bg-purple-500 hover:bg-purple-600 text-white rounded-full shadow-md transition-colors",children:Nt?n.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),n.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):n.jsx("svg",{className:"w-5 h-5 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})}),n.jsx("button",{onClick:()=>N(-10),className:"p-2 text-gray-600 hover:text-purple-600 transition-colors",title:"Back 10s",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})})}),n.jsx("button",{onClick:()=>N(10),className:"p-2 text-gray-600 hover:text-purple-600 transition-colors",title:"Forward 10s",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"})})}),n.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[n.jsx("span",{className:"text-xs text-gray-500 w-12 text-right font-mono",children:Qa(Ye)}),n.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full cursor-pointer relative group",onClick:k,children:n.jsx("div",{className:"h-full bg-purple-500 rounded-full relative",style:{width:`${xt?Ye/xt*100:0}%`},children:n.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-4 h-4 bg-purple-600 rounded-full shadow opacity-0 group-hover:opacity-100 transition-opacity"})})}),n.jsx("span",{className:"text-xs text-gray-500 w-12 font-mono",children:Qa(xt)})]}),n.jsxs("button",{onClick:z,className:"px-2 py-1 text-xs font-medium text-gray-600 hover:text-purple-600 bg-white rounded border border-gray-200 transition-colors",title:"Playback speed",children:[Nn,"x"]}),n.jsx("button",{onClick:()=>sa(!Et),className:`p-2 rounded transition-colors ${Et?"text-purple-600 bg-purple-100":"text-gray-400 hover:text-gray-600"}`,title:Et?"Auto-scroll ON":"Auto-scroll OFF",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]}),n.jsx("audio",{ref:me,src:Y,preload:"metadata"})]}),zt&&Kt&&Kt.length>0&&n.jsxs("div",{className:"px-6 py-3 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-100 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-indigo-800",children:"Detected Content"}),n.jsx("button",{onClick:()=>Yt(!1),className:"text-indigo-400 hover:text-indigo-600 text-sm",children:"Hide"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Kt.map((p,S)=>n.jsxs("div",{className:`p-2 rounded-lg border cursor-pointer hover:shadow-md transition-all ${p.content_type==="character"?"bg-pink-50 border-pink-200":p.content_type==="commercial"?"bg-orange-50 border-orange-200":"bg-green-50 border-green-200"}`,onClick:()=>{p.start_time!=null&&(Wr(p.start_time),!Nt&&me.current&&me.current.play())},title:p.raw_text||p.description,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:p.content_type==="character"?"":p.content_type==="commercial"?"":""}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm text-gray-800 truncate",children:p.name}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx("span",{className:`px-1.5 py-0.5 rounded ${p.content_type==="character"?"bg-pink-200 text-pink-700":p.content_type==="commercial"?"bg-orange-200 text-orange-700":"bg-green-200 text-green-700"}`,children:p.content_type}),p.start_time!=null&&n.jsx("span",{className:"font-mono",children:Qa(p.start_time)}),p.confidence!=null&&n.jsxs("span",{children:[Math.round(p.confidence*100),"%"]})]})]})]}),p.description&&n.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1",children:p.description})]},S))})]}),n.jsx("div",{className:"px-6 py-4 flex-1 overflow-hidden min-h-0 flex flex-col",children:l?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-purple-200 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading transcript..."})]}):i?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),n.jsx("div",{className:"text-red-600 font-medium",children:i}),n.jsx("button",{onClick:vr,className:"mt-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"Try Again"})]}):r?n.jsxs(n.Fragment,{children:[wr&&se.length>0&&n.jsxs("div",{className:"mb-4 p-3 bg-purple-50 rounded-lg border border-purple-200 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Speaker Names"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-purple-600",children:"Click to preview"}),E?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>T(!1),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Ls,disabled:d,className:"text-xs px-2 py-1 bg-purple-500 hover:bg-purple-600 text-white rounded transition-colors disabled:opacity-50",children:d?"Saving...":"Save"})]}):n.jsx("button",{onClick:()=>T(!0),className:"text-xs px-2 py-1 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded transition-colors",children:"Edit Names"})]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:se.map(p=>{const S=qc(p),O=Ps(p),G=(ce==null?void 0:ce.findIndex(ne=>ne.speaker===p))??-1,te=G>=0?ce[G]:null;return n.jsxs("div",{className:`flex items-center gap-2 px-2 py-1 rounded ${S.bg} ${S.border} border cursor-pointer hover:shadow-md transition-shadow`,onClick:()=>{te&&!E&&(Ms(te),ct.current[G]&&ct.current[G].scrollIntoView({behavior:"smooth",block:"center"}))},title:E?"":`Click to hear ${p}`,children:[n.jsxs("span",{className:`text-xs ${S.text}`,children:[p,":"]}),E?n.jsx("input",{type:"text",value:h[p]||"",onChange:ne=>Cn(p,ne.target.value),placeholder:"Enter name...",className:"text-sm px-2 py-0.5 border border-gray-300 rounded w-24 focus:outline-none focus:ring-1 focus:ring-purple-500",onClick:ne=>ne.stopPropagation()}):n.jsx("span",{className:`text-sm font-medium ${S.text}`,children:O!==p?O:"(unnamed)"}),!E&&n.jsx("span",{className:"text-xs opacity-50",children:""}),!E&&O===p&&A.length>0&&n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:ne=>{ne.stopPropagation(),f(U===p?null:p)},className:"px-1.5 py-0.5 text-xs bg-red-100 hover:bg-red-200 text-red-600 rounded transition-colors",children:"Fix"}),U===p&&n.jsxs("div",{className:"absolute left-0 top-full z-20 mt-1 p-2 bg-white rounded-lg shadow-xl border border-gray-200 min-w-32",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Choose speaker:"}),n.jsxs("div",{className:"flex flex-col gap-1",children:[A.map(ne=>n.jsx("button",{onClick:_e=>{_e.stopPropagation(),Cn(p,ne.name),f(null),_(!0)},className:"px-2 py-1 text-xs text-left bg-yellow-50 hover:bg-yellow-100 text-yellow-800 rounded transition-colors",children:ne.short_name||ne.name},ne.name)),n.jsx("button",{onClick:ne=>{ne.stopPropagation(),f(null)},className:"px-2 py-1 text-xs text-gray-500 hover:bg-gray-100 rounded transition-colors mt-1 border-t",children:"Cancel"})]})]})]}),Rs[p]>0&&n.jsxs("span",{className:"px-1.5 py-0.5 bg-yellow-400 text-yellow-900 rounded text-xs font-medium",children:["",Rs[p]]})]},p)})})]}),n.jsxs("div",{className:"mb-4 flex gap-3 flex-shrink-0",children:[n.jsx("input",{type:"text",placeholder:"Search in transcript...",className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",value:c,onChange:p=>u(p.target.value)}),wr&&n.jsxs("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden",children:[n.jsx("button",{onClick:()=>y("speakers"),className:`px-3 py-2 text-sm font-medium transition-colors ${b==="speakers"?"bg-purple-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"By Speaker"}),n.jsx("button",{onClick:()=>y("plain"),className:`px-3 py-2 text-sm font-medium transition-colors ${b==="plain"?"bg-purple-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"Plain Text"})]})]}),n.jsx("div",{ref:aa,className:"bg-gray-50 p-4 rounded-lg text-sm leading-relaxed flex-1 overflow-y-auto",children:wr&&b==="speakers"&&kr?n.jsxs("div",{className:"space-y-3",children:[kr.map((p,S)=>{var Fo,Do,Ro,Mo;const O=$s(p,S),G=Sr(p,S),te=qc(O),ne=br(p),_e=h[O]||O,Os=C===S,zn=((Fo=j[S])==null?void 0:Fo.speaker)||((Do=j[S])==null?void 0:Do.text),fa=jr===S,fp=X[S];return n.jsxs("div",{ref:M=>ct.current[S]=M,className:`p-3 rounded-lg transition-all ${te.bg} ${fp?"ring-2 ring-red-500 bg-red-50":""} ${zn?"ring-2 ring-yellow-400":""} ${fa?`ring-2 ${te.ring} shadow-md`:""}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[n.jsxs("button",{onClick:()=>zs(S),className:`px-2 py-0.5 rounded text-xs font-medium ${te.label} hover:opacity-80 transition-opacity cursor-pointer`,title:"Click to change speaker",children:[_e,n.jsx("span",{className:"ml-1 opacity-50",children:""})]}),ne&&n.jsx("button",{onClick:()=>Ms(p),className:"text-xs text-gray-400 hover:text-purple-600 transition-colors",title:"Jump to this time",children:ne}),X[S]&&n.jsxs("span",{className:`px-1.5 py-0.5 rounded text-xs font-medium flex items-center gap-1 cursor-pointer ${X[S].flag_type==="wrong_speaker"?"bg-red-100 text-red-700":X[S].flag_type==="character_voice"?"bg-pink-100 text-pink-700":X[S].flag_type==="multiple_speakers"?"bg-orange-100 text-orange-700":X[S].flag_type==="audio_issue"?"bg-gray-100 text-gray-700":"bg-yellow-100 text-yellow-700"}`,title:`${((Ro=Ba.find(M=>M.id===X[S].flag_type))==null?void 0:Ro.label)||"Flagged"}${X[S].corrected_speaker?`  ${X[S].corrected_speaker}`:""}${X[S].notes?`: ${X[S].notes}`:""}`,onClick:M=>{M.stopPropagation(),confirm("Remove this flag?")&&Tn(S)},children:[((Mo=Ba.find(M=>M.id===X[S].flag_type))==null?void 0:Mo.icon)||"",X[S].corrected_speaker&&n.jsxs("span",{className:"text-[10px]",children:["",X[S].corrected_speaker]})]}),(()=>{const M=Fs(S);return M&&n.jsxs("span",{className:"px-1.5 py-0.5 rounded text-xs font-medium bg-pink-100 text-pink-700 flex items-center gap-1 cursor-pointer",title:`Character: ${M.character_name}`,onClick:Le=>{Le.stopPropagation(),confirm(`Remove ${M.character_name} from this segment?`)&&ia(M.id)},children:[" ",M.character_name]})})(),(()=>{const M=$n(S);return M&&n.jsxs("span",{className:"px-1.5 py-0.5 rounded text-xs font-medium cursor-pointer",style:{backgroundColor:M.chapter_type_color+"33",color:M.chapter_type_color},title:`${M.chapter_type_name}${M.title?": "+M.title:""} (click to remove)`,onClick:Le=>{Le.stopPropagation(),confirm(`Remove chapter "${M.chapter_type_name}"?`)&&ca(M.id)},children:[M.chapter_type_icon," ",M.chapter_type_name]})})(),R[S]&&n.jsx("span",{className:"px-1.5 py-0.5 bg-yellow-400 text-yellow-900 rounded text-xs font-medium cursor-pointer",title:"Voice sample marked (click to unmark)",onClick:M=>{M.stopPropagation(),As(S)},children:""}),n.jsxs("div",{className:"relative ml-auto",children:[n.jsx("button",{onClick:M=>{M.stopPropagation(),ye(Se===S?null:S),et(null)},className:`p-1 rounded transition-colors ${Se===S?"bg-purple-500 text-white":"bg-gray-100 text-gray-400 hover:bg-gray-200 hover:text-gray-600"}`,title:"Segment actions",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),Se===S&&n.jsxs("div",{className:"absolute right-0 top-full z-30 mt-1 p-1 bg-white rounded-lg shadow-xl border border-gray-200 min-w-48",children:[n.jsxs("button",{onClick:M=>{M.stopPropagation(),et(Ae==="speaker"?null:"speaker")},className:`w-full px-3 py-2 text-xs text-left rounded flex items-center gap-2 transition-colors ${Ae==="speaker"?"bg-purple-100 text-purple-700":"hover:bg-gray-100"}`,children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Change Speaker"}),n.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),n.jsxs("button",{onClick:M=>{M.stopPropagation(),et(Ae==="flag"?null:"flag")},className:`w-full px-3 py-2 text-xs text-left rounded flex items-center gap-2 transition-colors ${Ae==="flag"?"bg-red-100 text-red-700":"hover:bg-gray-100"}`,children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Flag Issue"}),n.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),n.jsxs("button",{onClick:M=>{M.stopPropagation(),et(Ae==="character"?null:"character")},className:`w-full px-3 py-2 text-xs text-left rounded flex items-center gap-2 transition-colors ${Ae==="character"?"bg-pink-100 text-pink-700":"hover:bg-gray-100"}`,children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Mark Character"}),n.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),n.jsxs("button",{onClick:M=>{M.stopPropagation(),As(S),ye(null)},className:"w-full px-3 py-2 text-xs text-left rounded flex items-center gap-2 hover:bg-gray-100 transition-colors",children:[n.jsx("span",{children:R[S]?"":""}),n.jsx("span",{children:R[S]?"Unmark Voice Sample":"Mark Voice Sample"})]}),n.jsxs("button",{onClick:M=>{M.stopPropagation(),et(Ae==="chapter"?null:"chapter")},className:`w-full px-3 py-2 text-xs text-left rounded flex items-center gap-2 transition-colors ${Ae==="chapter"?"bg-indigo-100 text-indigo-700":"hover:bg-gray-100"}`,children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Mark Chapter"}),n.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),Ae==="speaker"&&n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100",children:[n.jsxs("div",{className:"px-3 py-1 text-[10px] text-gray-400 uppercase",children:["Assign name to ",p.speaker,":"]}),A.map(M=>n.jsxs("button",{onClick:Le=>{Le.stopPropagation(),At(p.speaker,M.name),ye(null)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-yellow-50 text-yellow-800",children:[n.jsx("span",{children:""}),n.jsx("span",{children:M.short_name||M.name})]},M.name)),A.length===0&&Jc.map(M=>n.jsx("button",{onClick:Le=>{Le.stopPropagation(),At(p.speaker,M.id),ye(null)},className:"w-full px-3 py-1.5 text-xs text-left rounded hover:bg-purple-50 text-purple-800",children:M.short},M.id))]}),Ae==="flag"&&n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100",children:[n.jsx("div",{className:"px-3 py-1 text-[10px] text-gray-400 uppercase",children:"Flag type:"}),Ba.map(M=>n.jsxs("button",{onClick:Le=>{if(Le.stopPropagation(),M.needsSpeaker){const An=prompt(`Who should this be assigned to?

Current: ${p.speaker}
Enter name:`);An&&_r(S,M.id,An,null,null)}else if(M.needsCharacter)et("flag-character");else if(M.needsNotes){const An=prompt("Add a note about this segment:");An&&_r(S,M.id,null,null,An)}else _r(S,M.id,null,null,null)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-red-50",title:M.description,children:[n.jsx("span",{children:M.icon}),n.jsx("span",{children:M.label})]},M.id)),X[S]&&n.jsxs("button",{onClick:M=>{M.stopPropagation(),Tn(S)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-gray-100 text-gray-500 mt-1 border-t border-gray-100",children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Remove Flag"})]})]}),Ae==="flag-character"&&n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100",children:[n.jsx("div",{className:"px-3 py-1 text-[10px] text-gray-400 uppercase",children:"Which character?"}),Ns.slice(0,8).map(M=>n.jsxs("button",{onClick:Le=>{Le.stopPropagation(),_r(S,"character_voice",null,M.id,null)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-pink-50 text-pink-800",children:[n.jsx("span",{children:""}),n.jsx("span",{children:M.name})]},M.id)),n.jsx("button",{onClick:M=>{M.stopPropagation(),et("flag")},className:"w-full px-3 py-1 text-xs text-gray-500 hover:bg-gray-100 rounded mt-1 border-t",children:" Back"})]}),Ae==="character"&&n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100",children:[n.jsx("div",{className:"px-3 py-1 text-[10px] text-gray-400 uppercase",children:"Select character:"}),Ns.slice(0,8).map(M=>n.jsxs("button",{onClick:Le=>{Le.stopPropagation(),Pn(S,M.id)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-pink-50 text-pink-800",children:[n.jsx("span",{children:""}),n.jsx("span",{children:M.name}),M.appearance_count>0&&n.jsxs("span",{className:"ml-auto text-[10px] text-gray-400",children:["(",M.appearance_count,")"]})]},M.id)),n.jsx("div",{className:"px-2 py-1 mt-1 border-t border-gray-100",children:n.jsx("input",{type:"text",placeholder:"+ New character...",value:xr,onChange:M=>Cs(M.target.value),onKeyDown:M=>{M.key==="Enter"&&xr.trim()&&(M.stopPropagation(),Ln(S,xr))},className:"w-full px-2 py-1 text-xs border rounded",onClick:M=>M.stopPropagation()})})]}),Ae==="chapter"&&n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100",children:[n.jsx("div",{className:"px-3 py-1 text-[10px] text-gray-400 uppercase",children:"Chapter type:"}),q.map(M=>n.jsxs("button",{onClick:Le=>{Le.stopPropagation(),oa(M.id,S)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-indigo-50",children:[n.jsx("span",{children:M.icon}),n.jsx("span",{style:{color:M.color},children:M.name})]},M.id))]})]})]}),fa&&n.jsx("span",{className:"text-xs text-purple-600 font-medium animate-pulse",children:" Playing"}),zn&&n.jsx("span",{className:"text-xs text-yellow-600 font-medium",children:"edited"})]}),Os&&n.jsxs("div",{className:"mb-2 p-2 bg-white rounded border shadow-lg",children:[n.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Assign name to ",n.jsx("span",{className:"font-mono font-medium",children:p.speaker}),":"]}),A.length>0&&n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"text-xs text-yellow-600 mb-1 flex items-center gap-1",children:[n.jsx("span",{children:""})," Voice Library:"]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:A.map(M=>{var Le;return n.jsxs("button",{onClick:()=>At(p.speaker,M.name),className:"px-2 py-1 text-xs bg-yellow-100 hover:bg-yellow-200 text-yellow-800 rounded transition-colors flex items-center gap-1",children:[n.jsx("span",{className:"w-4 h-4 rounded-full bg-yellow-500 text-white text-[10px] flex items-center justify-center font-bold",children:((Le=M.short_name)==null?void 0:Le.charAt(0))||M.name.charAt(0)}),M.short_name||M.name.split(" ")[0]]},M.name)})})]}),A.length===0&&n.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Jc.map(M=>n.jsx("button",{onClick:()=>At(p.speaker,M.id),className:"px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 text-purple-800 rounded transition-colors",children:M.short},M.id))}),n.jsx("div",{className:"flex gap-2",children:n.jsx("input",{type:"text",placeholder:"Or type custom name...",className:"flex-1 px-2 py-1 text-xs border rounded",onKeyDown:M=>{M.key==="Enter"&&M.target.value&&At(p.speaker,M.target.value)}})}),n.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:['This will update all "',p.speaker,'" segments']})]}),n.jsx("p",{className:`${te.text} ${fa?"font-medium":""}`,children:En(G==null?void 0:G.trim())})]},S)}),kr.length===0&&c&&n.jsx("p",{className:"text-gray-400 text-center py-4",children:"No matches found"})]}):n.jsx("div",{className:"whitespace-pre-wrap font-sans",children:En(r.full_text||"No transcript text available")})}),$&&n.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center justify-between flex-shrink-0",children:[n.jsxs("div",{className:"text-sm text-yellow-700 flex flex-wrap items-center gap-2",children:[n.jsx("span",{children:"Unsaved changes"}),Object.keys(R).length>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-yellow-200 rounded text-xs",children:[" ",Object.keys(R).length," voice sample",Object.keys(R).length!==1?"s":""]}),Nr>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-red-200 text-red-700 rounded text-xs",children:[" ",Nr," flagged segment",Nr!==1?"s":""]})]}),n.jsx("button",{onClick:pa,disabled:D,className:"px-3 py-1 bg-yellow-500 hover:bg-yellow-600 text-white rounded text-sm font-medium disabled:opacity-50",children:D?"Saving...":"Save Changes"})]}),r.transcript_path&&n.jsxs("div",{className:"mt-3 text-xs text-gray-400 truncate flex-shrink-0",children:[" ",r.transcript_path]})]}):n.jsx("div",{className:"text-center py-12 text-gray-400",children:"No transcript available"})}),n.jsx("div",{className:"px-6 py-3 border-t border-gray-200 flex justify-end flex-shrink-0",children:n.jsx("button",{className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors",onClick:t,children:"Close"})})]})})}function lf({episode:e,onNotification:t,onUpdate:r,queue:s}){const[l,a]=m.useState(!1),[i,o]=m.useState(!1),[c,u]=m.useState(!1),[b,y]=m.useState(!1),[h,g]=m.useState(null),[E,T]=m.useState(!1),U=async($=0)=>{a(!0);try{await bt.addToQueue(e.id,$),t==null||t(`Added "${e.title}" to queue`,"success"),r==null||r()}catch(_){t==null||t(`Error adding to queue: ${_.message}`,"error")}finally{a(!1)}},f=async()=>{o(!0);try{await bt.removeFromQueue(e.id),t==null||t(`Removed "${e.title}" from queue`,"success"),r==null||r()}catch($){t==null||t(`Error removing from queue: ${$.message}`,"error")}finally{o(!1)}},d=async()=>{if(c){u(!1);return}T(!0);try{const $=await ge.getTranscript(e.id);g($),u(!0)}catch($){t==null||t(`Error loading transcript: ${$.message||$}`,"error")}finally{T(!1)}},x=$=>{if(!$)return"Unknown duration";const _=Math.floor($/3600),D=Math.floor($%3600/60);return _>0?`${_}h ${D}m`:`${D}m`},C=$=>$?`${($/(1024*1024)).toFixed(1)} MB`:"",w=$=>{if(!$)return null;try{return new Date($).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return null}},j=()=>{var Z,Y,v;if(!s)return null;if(((Z=s.processing)==null?void 0:Z.findIndex(R=>{var L;return(((L=R.episode)==null?void 0:L.id)||R.episode_id)===e.id}))>=0)return{status:"processing",position:1};const _=(Y=s.pending)==null?void 0:Y.findIndex(R=>{var L;return(((L=R.episode)==null?void 0:L.id)||R.episode_id)===e.id});return _>=0?{status:"pending",position:_+1}:((v=s.failed)==null?void 0:v.findIndex(R=>{var L;return(((L=R.episode)==null?void 0:L.id)||R.episode_id)===e.id}))>=0?{status:"failed",position:null}:null},F=()=>{const $=[],_=j();return e.transcription_status==="completed"&&e.is_transcribed?($.push(n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:" Transcribed"},"transcribed")),e.has_diarization&&$.push(n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:[" ",e.num_speakers||2," speakers"]},"diarized")),n.jsx("div",{className:"flex flex-wrap gap-1",children:$})):(_==null?void 0:_.status)==="processing"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:[n.jsx("div",{className:"w-3 h-3 border-2 border-blue-300 border-t-blue-800 rounded-full animate-spin"}),"Processing"]}):(_==null?void 0:_.status)==="pending"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[n.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),"Queue #",_.position]}):(_==null?void 0:_.status)==="failed"||e.transcription_status==="failed"?n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200",children:" Failed"}):e.is_in_queue?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[n.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),"In Queue"]}):e.transcription_status==="processing"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:[n.jsx("div",{className:"w-3 h-3 border-2 border-blue-300 border-t-blue-800 rounded-full animate-spin"}),"Processing"]}):e.is_downloaded?n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:" Downloaded"}):n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 border border-gray-200",children:"Pending"})};return n.jsxs("div",{className:"bg-cream-50 border border-cream-200 rounded-lg p-4 hover:bg-cream-100 transition-all hover:shadow-md",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[e.episode_number&&n.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-coral-400 to-coral-600 rounded-lg flex items-center justify-center shadow-sm",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs font-medium text-white/80",children:"#"}),n.jsx("div",{className:"text-lg font-bold text-white leading-none",children:e.episode_number})]})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[n.jsx("h3",{className:"font-semibold text-gray-900 leading-tight flex-1",children:e.title}),F()]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-600 mb-3",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),x(e.duration)]}),e.file_size>0&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),C(e.file_size)]}),w(e.published_date)&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),w(e.published_date)]}),n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:e.feed_source==="patreon"?" Patreon":" Apple"})]}),e.description&&n.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:e.description.replace(/<[^>]*>/g,"")}),n.jsx("div",{className:"flex items-center gap-2",children:e.is_in_queue?n.jsx("button",{onClick:f,disabled:i,className:"px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-red-300 border-t-red-700 rounded-full animate-spin"}),"Removing..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Remove from Queue"]})}):e.is_transcribed?n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-lg font-medium text-sm transition-colors flex items-center gap-2 shadow-sm",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),"View Transcript"]}),n.jsx("button",{onClick:d,disabled:E,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-sm transition-colors flex items-center gap-2 disabled:opacity-50",children:E?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-700 rounded-full animate-spin"}),"Loading..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c?"Hide Preview":"Quick Preview"]})})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>U(0),disabled:l,className:"px-4 py-2 bg-coral-500 hover:bg-coral-600 text-white rounded-lg font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add to Queue"]})}),n.jsxs("button",{onClick:()=>U(10),disabled:l,className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Add with high priority",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Priority"]})]})})]})]}),c&&h&&n.jsx("div",{className:"mt-4 border-t border-cream-200 pt-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-4 max-h-96 overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("h4",{className:"font-semibold text-gray-900",children:["Transcript ",h.episode_number&&`(Episode ${h.episode_number})`]}),n.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[h.language&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",children:[" ",h.language.toUpperCase()]}),h.model_used&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",children:[" ",h.model_used]}),h.has_diarization?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-700",children:[" ",h.num_speakers," speakers",h.diarization_method&&n.jsxs("span",{className:"text-purple-500 text-[10px]",children:["(",h.diarization_method,")"]})]}):n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-500",children:" No speaker data"})]}),n.jsx("div",{className:"prose prose-sm max-w-none text-gray-700 whitespace-pre-wrap font-mono text-xs leading-relaxed",children:h.full_text})]})}),b&&n.jsx(mp,{episode:e,onClose:()=>y(!1)})]})}function af({currentPage:e,totalPages:t,onPageChange:r,disabled:s}){const l=()=>{const a=[];if(t<=7)for(let o=1;o<=t;o++)a.push(o);else{a.push(1),e>3&&a.push("...");const o=Math.max(2,e-1),c=Math.min(t-1,e+1);for(let u=o;u<=c;u++)a.includes(u)||a.push(u);e<t-2&&a.push("..."),a.includes(t)||a.push(t)}return a};return n.jsxs("div",{className:"mt-8 flex items-center justify-center gap-1",children:[n.jsx("button",{onClick:()=>r(e-1),disabled:s||e===1,className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-100 text-gray-600",children:" Prev"}),l().map((a,i)=>a==="..."?n.jsx("span",{className:"px-2 py-2 text-gray-400",children:"..."},`ellipsis-${i}`):n.jsx("button",{onClick:()=>r(a),disabled:s,className:`min-w-[40px] px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e===a?"bg-coral-500 text-white":"hover:bg-gray-100 text-gray-600"} disabled:opacity-50`,children:a},a)),n.jsx("button",{onClick:()=>r(e+1),disabled:s||e===t,className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-100 text-gray-600",children:"Next "})]})}function of({episodes:e,loading:t,total:r,filters:s,onFilterChange:l,onNotification:a,onEpisodesChange:i,queue:o}){const[c,u]=m.useState(s.search||""),b=g=>{g.preventDefault(),l({search:c})},y=g=>{l({sort_by:g,sort_desc:s.sort_by===g?!s.sort_desc:!0})},h=g=>{l({[g]:!s[g]})};return n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6 space-y-4",children:[n.jsxs("form",{onSubmit:b,className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Search episodes by title or description...",className:"flex-1 px-4 py-2 border border-cream-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-coral-500 focus:border-transparent",value:c,onChange:g=>u(g.target.value)}),n.jsx("button",{type:"submit",className:"px-6 py-2 bg-coral-500 hover:bg-coral-600 text-white rounded-lg font-medium transition-colors",children:"Search"}),s.search&&n.jsx("button",{type:"button",onClick:()=>{u(""),l({search:""})},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Clear"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filters:"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s.transcribed_only,onChange:()=>h("transcribed_only"),className:"w-4 h-4 text-coral-500 border-gray-300 rounded focus:ring-coral-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Transcribed Only"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:s.in_queue_only,onChange:()=>h("in_queue_only"),className:"w-4 h-4 text-coral-500 border-gray-300 rounded focus:ring-coral-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"In Queue Only"})]})]}),n.jsx("div",{className:"h-6 w-px bg-gray-300"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),["published_date","title","episode_number","has_diarization"].map(g=>n.jsxs("button",{onClick:()=>y(g),className:`
                  px-3 py-1 rounded-lg text-sm font-medium transition-colors
                  ${s.sort_by===g?"bg-coral-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
                `,children:[g==="published_date"&&"Date",g==="title"&&"Title",g==="episode_number"&&"Episode #",g==="has_diarization"&&"Diarized",s.sort_by===g&&n.jsx("span",{className:"ml-1",children:s.sort_desc?"":""})]},g))]})]}),n.jsx("div",{className:"text-sm text-gray-600",children:t&&e.length===0?"Loading...":n.jsxs(n.Fragment,{children:["Showing ",s.offset+1,"-",Math.min(s.offset+e.length,r)," of ",r.toLocaleString()," episodes",s.search&&` matching "${s.search}"`]})})]}),t&&e.length===0?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 border-4 border-coral-200 border-t-coral-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading episodes..."})]})}):e.length===0?n.jsx("div",{className:"text-center py-20",children:n.jsx("div",{className:"text-gray-400 text-lg",children:s.search||s.transcribed_only||s.in_queue_only?"No episodes found matching your filters":"No episodes available"})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"space-y-3",children:e.map(g=>n.jsx(lf,{episode:g,onNotification:a,onUpdate:i,queue:o},g.id))}),r>0&&n.jsx(af,{currentPage:Math.floor(s.offset/s.limit)+1,totalPages:Math.ceil(r/s.limit),onPageChange:g=>l({offset:(g-1)*s.limit}),disabled:t})]})]})}function cf({onNotification:e,refreshKey:t,queue:r}){var j,F,$,_,D,Z,Y;const[s,l]=m.useState("patreon"),[a,i]=m.useState([]),[o,c]=m.useState(!0),[u,b]=m.useState(0),[y,h]=m.useState({search:"",transcribed_only:!1,in_queue_only:!1,sort_by:"published_date",sort_desc:!0,limit:20,offset:0}),[g,E]=m.useState([]),[T,U]=m.useState(!1);m.useEffect(()=>{f()},[]),m.useEffect(()=>{d()},[s,y]),m.useEffect(()=>{t>0&&d()},[t]);const f=async()=>{try{const v=await ge.getFeedSources();E(v)}catch(v){console.error("Error loading feed sources:",v)}},d=async()=>{c(!0);try{const v={...y,feed_source:s},R=await ge.getEpisodes(v);i(R.episodes||[]),b(R.total||0)}catch(v){console.error("Error loading episodes:",v),e==null||e("Error loading episodes","error")}finally{c(!1)}},x=async()=>{U(!0);try{const v=await ge.refreshFeed(s,!1);if(v&&typeof v.added<"u")e==null||e(`Feed refreshed: ${v.added} added, ${v.updated} updated`,"success"),d(),U(!1);else{e==null||e(`Feed refresh started for ${s}`,"success");const R=async()=>{const L=await ge.getRefreshStatus(s);L.status==="completed"?(e==null||e(`Feed refreshed: ${L.added||0} added, ${L.updated||0} updated`,"success"),d(),U(!1)):L.status==="error"?(e==null||e(`Feed refresh failed: ${L.error}`,"error"),U(!1)):L.is_refreshing?setTimeout(R,2e3):U(!1)};setTimeout(R,2e3)}}catch(v){e==null||e(`Error refreshing feed: ${v.message||v}`,"error"),U(!1)}},C=v=>{h(R=>{const L="offset"in v?v.offset:0;return{...R,...v,offset:L}})},w=g.find(v=>v.id===s);return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-coral-500 to-coral-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Browse Episodes"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-white/90 text-sm",children:[u.toLocaleString()," episodes"]}),n.jsxs("button",{onClick:d,disabled:o,className:"px-3 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium text-sm transition-colors disabled:opacity-50 flex items-center gap-2",title:"Reload episode list from database (updates transcription status)",children:[n.jsx("svg",{className:`w-4 h-4 ${o?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reload"]}),n.jsx("button",{onClick:x,disabled:T||!(w!=null&&w.enabled),className:"px-3 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Check RSS feed for new episodes",children:T?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Syncing..."]}):n.jsx(n.Fragment,{children:"Sync Feed"})})]})]})}),r&&(((j=r.processing)==null?void 0:j.length)>0||((F=r.pending)==null?void 0:F.length)>0||(($=r.failed)==null?void 0:$.length)>0)&&n.jsxs("div",{className:"px-6 py-2 bg-gradient-to-r from-yellow-50 to-orange-50 border-b border-yellow-200 flex items-center gap-4 text-sm",children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Queue:"}),((_=r.processing)==null?void 0:_.length)>0&&n.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),r.processing.length," processing"]}),((D=r.pending)==null?void 0:D.length)>0&&n.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full",children:[n.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),r.pending.length," pending"]}),((Z=r.failed)==null?void 0:Z.length)>0&&n.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-red-100 text-red-700 rounded-full",children:[n.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),r.failed.length," failed"]}),((Y=r.completed)==null?void 0:Y.length)>0&&n.jsxs("span",{className:"text-green-600 text-xs",children:[r.completed.length," recently completed"]})]}),n.jsx("div",{className:"border-b border-cream-200 bg-cream-50",children:n.jsx("div",{className:"flex",children:g.map(v=>n.jsxs("button",{onClick:()=>l(v.id),disabled:!v.enabled,className:`
                flex-1 px-6 py-4 font-medium text-sm transition-colors relative
                ${s===v.id?"text-coral-600 bg-white":"text-gray-600 hover:text-gray-800 hover:bg-cream-100"}
                ${v.enabled?"cursor-pointer":"opacity-50 cursor-not-allowed"}
              `,children:[n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx("span",{className:"text-lg",children:v.icon}),n.jsx("span",{children:v.name}),!v.enabled&&n.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded",children:"Coming Soon"})]}),s===v.id&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-coral-500"})]},v.id))})}),n.jsx("div",{className:"p-6",children:n.jsx(of,{episodes:a,loading:o,total:u,filters:y,onFilterChange:C,onNotification:e,onEpisodesChange:d,queue:r})})]})}function uf({onNotification:e,onViewTranscript:t}){var _,D,Z,Y;const[r,s]=m.useState({pending:[],processing:[],completed:[],failed:[]}),[l,a]=m.useState({pending:0,processing:0,completed:0,failed:0,total:0}),[i,o]=m.useState(!0),[c,u]=m.useState(null),[b,y]=m.useState(!1),[h,g]=m.useState(null),[E,T]=m.useState(null);m.useEffect(()=>{U();const v=setInterval(U,5e3);return()=>clearInterval(v)},[]);const U=async()=>{try{const[v,R]=await Promise.all([bt.getQueue(),bt.getStatus()]);s(v.queue||{pending:[],processing:[],completed:[],failed:[]}),a(R),o(!1)}catch(v){console.error("Error loading queue:",v),o(!1)}},f=async v=>{u(v);try{await bt.removeFromQueue(v),e==null||e("Episode removed from queue","success"),U()}catch(R){e==null||e(`Error removing episode: ${R.message}`,"error")}finally{u(null)}},d=async()=>{y(!0);try{await bt.stopCurrent(),e==null||e("Stopping current transcription...","success"),U()}catch(v){e==null||e(`Error stopping transcription: ${v.message}`,"error")}finally{y(!1)}},x=async v=>{g(v);try{await bt.retryTranscription(v),e==null||e("Episode queued for retry","success"),U()}catch(R){e==null||e(`Error retrying transcription: ${R.message}`,"error")}finally{g(null)}},C=async v=>{T(v);try{await ge.downloadEpisode(v),e==null||e("Episode downloaded successfully","success"),U()}catch(R){e==null||e(`Error downloading episode: ${R.message}`,"error")}finally{T(null)}},w=v=>{if(!v)return"";const R=Math.floor(v/3600),L=Math.floor(v%3600/60);return R>0?`${R}h ${L}m`:`${L}m`},j=v=>{if(!v)return"";try{const R=new Date(v),X=new Date-R,P=Math.floor(X/6e4),A=Math.floor(X/36e5),H=Math.floor(X/864e5);return P<1?"just now":P<60?`${P}m ago`:A<24?`${A}h ago`:`${H}d ago`}catch{return""}},F=({item:v})=>{const{episode:R,queue_item:L}=v;return n.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-green-50 border border-green-100 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[n.jsx("span",{className:"text-green-500 text-sm",children:""}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("div",{className:"font-medium text-gray-900 text-sm truncate",children:R.title}),n.jsx("div",{className:"text-xs text-gray-500",children:j(L==null?void 0:L.completed_date)})]})]}),n.jsx("button",{onClick:()=>t==null?void 0:t(R.id),className:"flex-shrink-0 px-3 py-1.5 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg font-medium text-xs transition-colors flex items-center gap-1",children:" View"})]})},$=({item:v,type:R,onRemove:L,onRetry:X,onDownload:P})=>{const{episode:A,queue_item:H}=v,W=c===A.id,V=h===A.id,q=E===A.id,oe=(re=>({patreon:{icon:"",label:"Patreon",color:"text-orange-600"},apple:{icon:"",label:"Apple Podcasts",color:"text-purple-600"},local:{icon:"",label:"Local File",color:"text-blue-600"}})[re]||{icon:"",label:re||"Unknown",color:"text-gray-600"})(A.feed_source);return n.jsx("div",{className:`border rounded-lg p-4 hover:shadow-sm transition-shadow ${R==="failed"?"bg-red-50 border-red-200":R==="processing"?"bg-blue-50 border-blue-200":R==="completed"?"bg-green-50 border-green-200":"bg-white border-cream-200"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[R==="pending"&&n.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center shadow-sm",children:n.jsx("div",{className:"text-white font-bold text-sm",children:(H==null?void 0:H.priority)||0})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:A.title}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-600",children:[A.episode_number&&n.jsxs("span",{children:["Ep #",A.episode_number]}),A.duration&&n.jsx("span",{children:w(A.duration)}),n.jsxs("span",{className:oe.color,children:[oe.icon," ",oe.label]}),!A.is_downloaded&&n.jsx("span",{className:"text-red-500 text-xs",children:"Not downloaded"})]}),R==="failed"&&(H==null?void 0:H.error_message)&&n.jsxs("div",{className:"mt-2 p-2 bg-red-100 border border-red-200 rounded",children:[n.jsx("div",{className:"text-xs font-semibold text-red-700 mb-1",children:"Error:"}),n.jsx("div",{className:"text-sm text-red-900",children:H.error_message}),n.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Retries: ",H.retry_count||0,"/3"]})]}),R==="processing"&&n.jsxs("div",{className:"mt-2 text-blue-600 font-medium flex items-center gap-2 text-sm",children:[n.jsx("div",{className:"w-3 h-3 border-2 border-blue-300 border-t-blue-600 rounded-full animate-spin"}),n.jsx("span",{children:"Processing..."})]}),n.jsxs("div",{className:"mt-3 flex gap-2",children:[A.is_transcribed&&t&&n.jsx("button",{onClick:()=>t(A.id),className:"px-3 py-1.5 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg font-medium text-xs transition-colors flex items-center gap-1",title:"View transcript",children:" View Transcript"}),R==="pending"&&L&&n.jsx("button",{onClick:()=>L(A.id),disabled:W,className:"px-3 py-1.5 bg-gray-100 hover:bg-red-100 text-gray-700 hover:text-red-700 rounded-lg font-medium text-xs transition-colors disabled:opacity-50 flex items-center gap-1",title:"Remove from queue",children:W?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-3 h-3 border-2 border-gray-300 border-t-red-600 rounded-full animate-spin"}),"Removing..."]}):n.jsx(n.Fragment,{children:" Remove"})}),R==="failed"&&X&&n.jsx("button",{onClick:()=>X(A.id),disabled:V,className:"px-3 py-1.5 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg font-medium text-xs transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",title:"Retry transcription",children:V?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-3 h-3 border-2 border-blue-300 border-t-blue-700 rounded-full animate-spin"}),"Retrying..."]}):n.jsx(n.Fragment,{children:" Retry"})}),R==="failed"&&!A.is_downloaded&&A.audio_url&&P&&n.jsx("button",{onClick:()=>P(A.id),disabled:q,className:"px-3 py-1.5 bg-amber-100 hover:bg-amber-200 text-amber-700 rounded-lg font-medium text-xs transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",title:"Download episode first",children:q?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-3 h-3 border-2 border-amber-300 border-t-amber-700 rounded-full animate-spin"}),"Downloading..."]}):n.jsx(n.Fragment,{children:" Download"})})]})]})]})})};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Transcription Queue"}),n.jsx("div",{className:"flex items-center gap-2 text-white/90 text-sm",children:n.jsxs("span",{className:"px-3 py-1 bg-white/20 rounded-lg font-medium",children:[l.total," total"]})})]})}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 p-6 bg-cream-50 border-b border-cream-200",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.pending}),n.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.processing}),n.jsx("div",{className:"text-sm text-gray-600",children:"Processing"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.completed}),n.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.failed}),n.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]})]}),n.jsx("div",{className:"p-6",children:i?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"w-8 h-8 border-4 border-purple-200 border-t-purple-500 rounded-full animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[r.processing&&r.processing.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),"Currently Processing"]}),n.jsx("button",{onClick:d,disabled:b,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:b?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-red-300 border-t-red-700 rounded-full animate-spin"}),"Stopping..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})}),"Stop"]})})]}),n.jsx("div",{className:"space-y-2",children:r.processing.map((v,R)=>n.jsx($,{item:v,type:"processing"},R))})]}),r.pending&&r.pending.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),"Pending (",r.pending.length,")"]}),n.jsx("div",{className:"space-y-2",children:r.pending.map((v,R)=>n.jsx($,{item:v,type:"pending",onRemove:f},R))})]}),r.completed&&r.completed.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2 text-sm",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Recently Completed (",r.completed.length,")"]}),n.jsx("div",{className:"space-y-1",children:r.completed.slice(0,3).map((v,R)=>n.jsx(F,{item:v},R))})]}),r.failed&&r.failed.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Failed"]}),n.jsx("div",{className:"space-y-2",children:r.failed.slice(0,5).map((v,R)=>n.jsx($,{item:v,type:"failed",onRetry:x,onDownload:C},R))})]}),!((_=r.pending)!=null&&_.length)&&!((D=r.processing)!=null&&D.length)&&!((Z=r.completed)!=null&&Z.length)&&!((Y=r.failed)!=null&&Y.length)&&n.jsxs("div",{className:"text-center py-12 text-gray-400",children:[n.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),n.jsx("div",{className:"text-lg font-medium",children:"Queue is empty"}),n.jsx("div",{className:"text-sm mt-1",children:"Add episodes from the browser above to start transcribing"})]})]})})]})}const df=e=>{if(!e)return"Unknown duration";const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?`${t}h ${r}m`:`${r}m`},pf=e=>{if(!e)return null;try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return null}};function mf(e,t){return(t==null?void 0:t.status)==="processing"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-100 text-blue-700 border border-blue-200",children:[n.jsx("span",{className:"w-2 h-2 border border-blue-300 border-t-blue-700 rounded-full animate-spin"}),"Processing"]}):(t==null?void 0:t.status)==="pending"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-yellow-100 text-yellow-700 border border-yellow-200",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse"}),"Queue #",t.priority]}):(t==null?void 0:t.status)==="failed"||e.transcription_status==="failed"?n.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-red-100 text-red-700 border border-red-200",children:"Failed"}):e.is_transcribed?n.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-green-100 text-green-700 border border-green-200",children:" Transcribed"}):e.is_downloaded?n.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-100 text-blue-700 border border-blue-200",children:"Downloaded"}):n.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-gray-100 text-gray-600 border border-gray-200",children:"Pending"})}function ff({selectedEpisodeId:e,onSelectEpisode:t,onNotification:r}){const[s,l]=m.useState([]),[a,i]=m.useState(!0),[o,c]=m.useState(0),[u,b]=m.useState(""),[y,h]=m.useState({}),[g,E]=m.useState("patreon"),[T,U]=m.useState("published_date"),[f,d]=m.useState(!0),[x,C]=m.useState(!1),[w,j]=m.useState({transcribed_only:!1,in_queue_only:!1,limit:50,offset:0});m.useEffect(()=>{F()},[w,u,g,T,f]),m.useEffect(()=>{$();const L=setInterval($,5e3);return()=>clearInterval(L)},[]);const F=async()=>{try{i(!0);const L=await ge.getEpisodes({...w,search:u,...g!=="all"?{feed_source:g}:{},sort_by:T,sort_desc:f});l(L.episodes||[]),c(L.total||0)}catch(L){console.error("Error loading episodes:",L)}finally{i(!1)}},$=async()=>{var L,X,P;try{const A=await bt.getQueue(),H=A.queue||A,W={};(L=H.processing)==null||L.forEach(V=>{var q;W[((q=V.episode)==null?void 0:q.id)||V.episode_id]={status:"processing"}}),(X=H.pending)==null||X.forEach((V,q)=>{var de;W[((de=V.episode)==null?void 0:de.id)||V.episode_id]={status:"pending",priority:q+1}}),(P=H.failed)==null||P.forEach(V=>{var q;W[((q=V.episode)==null?void 0:q.id)||V.episode_id]={status:"failed"}}),h(W)}catch(A){console.error("Error loading queue:",A)}},_=async(L,X=0)=>{try{await bt.addToQueue(L,X),r==null||r("Added to queue","success"),$()}catch(P){r==null||r(`Error: ${P.message}`,"error")}},D=async L=>{try{await bt.removeFromQueue(L),r==null||r("Removed from queue","success"),$()}catch(X){r==null||r(`Error: ${X.message}`,"error")}},Z=()=>{j(L=>({...L,offset:L.offset+L.limit}))},Y=async()=>{try{C(!0),await ge.refreshFeed(g!=="all"?g:"patreon",!1),r==null||r("Feed synced","success"),await F()}catch(L){r==null||r(`Sync error: ${L.message}`,"error")}finally{C(!1)}},v=[{key:"published_date",label:"Date"},{key:"title",label:"Title"},{key:"episode_number",label:"Ep#"},{key:"has_diarization",label:"Diarized"}],R={processing:Object.values(y).filter(L=>L.status==="processing").length,pending:Object.values(y).filter(L=>L.status==="pending").length,failed:Object.values(y).filter(L=>L.status==="failed").length};return n.jsxs("div",{className:"h-full flex flex-col bg-white border-r border-gray-200",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Episodes"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:F,disabled:a,title:"Reload episodes",className:"p-1.5 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded-md transition-colors",children:n.jsx("svg",{className:`w-4 h-4 ${a?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),n.jsx("button",{onClick:Y,disabled:x,title:"Sync RSS feed",className:"p-1.5 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded-md transition-colors",children:n.jsx("svg",{className:`w-4 h-4 ${x?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})})})]})]}),n.jsx("input",{type:"text",placeholder:"Search episodes...",value:u,onChange:L=>b(L.target.value),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsxs("div",{className:"flex gap-2 mt-3 text-xs",children:[R.processing>0&&n.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:[R.processing," processing"]}),R.pending>0&&n.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full",children:[R.pending," pending"]}),R.failed>0&&n.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full",children:[R.failed," failed"]})]}),n.jsxs("div",{className:"flex gap-2 mt-3 flex-wrap",children:[n.jsx("button",{onClick:()=>j(L=>({...L,transcribed_only:!L.transcribed_only,offset:0})),className:`px-2 py-1 text-xs rounded-full transition-colors ${w.transcribed_only?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Transcribed"}),n.jsx("button",{onClick:()=>j(L=>({...L,in_queue_only:!L.in_queue_only,offset:0})),className:`px-2 py-1 text-xs rounded-full transition-colors ${w.in_queue_only?"bg-yellow-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"In Queue"}),n.jsx("span",{className:"w-px bg-gray-200 mx-0.5"}),["patreon","apple","all"].map(L=>n.jsx("button",{onClick:()=>{E(L),j(X=>({...X,offset:0}))},className:`px-2 py-1 text-xs rounded-full transition-colors ${g===L?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:L==="patreon"?" Patreon":L==="apple"?" Apple":" All"},L))]}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-3",children:[n.jsx("span",{className:"text-[11px] text-gray-500 font-medium",children:"Sort:"}),v.map(L=>{const X=T===L.key;return n.jsxs("button",{onClick:()=>{X?d(P=>!P):(U(L.key),d(!0)),j(P=>({...P,offset:0}))},className:`px-2 py-0.5 text-[11px] rounded-full transition-colors ${X?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[L.label,X?f?" ":" ":""]},L.key)})]}),o>0&&n.jsxs("div",{className:"mt-2 text-[11px] text-gray-400",children:["Showing ",w.offset+1,"",Math.min(w.offset+s.length,o)," of ",o,u&&n.jsxs("span",{children:[' matching "',n.jsx("span",{className:"text-gray-600",children:u}),'"']})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a&&s.length===0?n.jsxs("div",{className:"p-4 text-center text-gray-500",children:[n.jsx("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),"Loading..."]}):n.jsx("div",{className:"divide-y divide-gray-100",children:s.map(L=>{const X=y[L.id],P=e===L.id,A=pf(L.published_date),H=L.feed_source==="patreon"?" Patreon":" Apple";return n.jsxs("div",{onClick:()=>t==null?void 0:t(L),className:`p-3 cursor-pointer transition-colors ${P?"bg-purple-50 border-l-4 border-purple-500":"hover:bg-gray-50 border-l-4 border-transparent"}`,children:[n.jsx("div",{className:"font-medium text-sm text-gray-800 line-clamp-2 mb-1",children:L.title}),n.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-gray-500 mb-1 flex-wrap",children:[L.episode_number&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"font-medium text-gray-600",children:["Ep. ",L.episode_number]}),n.jsx("span",{children:""})]}),n.jsx("span",{children:H}),A&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{children:A})]})]}),n.jsx("div",{className:"text-[11px] text-gray-400 mb-1.5",children:df(L.duration)}),L.description&&n.jsx("p",{className:"text-[11px] text-gray-400 line-clamp-2 mb-2 leading-relaxed",children:L.description.replace(/<[^>]*>/g,"")}),n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[mf(L,X),L.has_diarization&&L.is_transcribed&&n.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-100 text-purple-700 border border-purple-200",children:[" ",L.num_speakers||2," speakers"]}),L.is_transcribed&&n.jsx("button",{onClick:W=>{W.stopPropagation(),t==null||t(L)},className:"px-2 py-0.5 text-[10px] font-medium bg-purple-100 text-purple-700 hover:bg-purple-200 rounded transition-colors",children:"View"}),!L.is_transcribed&&L.is_downloaded&&!X&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:W=>{W.stopPropagation(),_(L.id)},className:"px-2 py-0.5 text-[10px] font-medium bg-yellow-100 text-yellow-700 hover:bg-yellow-200 rounded transition-colors",children:"+ Queue"}),n.jsx("button",{onClick:W=>{W.stopPropagation(),_(L.id,10)},className:"px-2 py-0.5 text-[10px] font-medium bg-yellow-400 text-yellow-900 hover:bg-yellow-500 rounded transition-colors",title:"Add with high priority",children:" Priority"})]}),(X==null?void 0:X.status)==="pending"&&n.jsx("button",{onClick:W=>{W.stopPropagation(),D(L.id)},className:"px-2 py-0.5 text-[10px] font-medium bg-red-100 text-red-700 hover:bg-red-200 rounded transition-colors",children:"Remove"})]})]},L.id)})}),s.length<o&&n.jsx("div",{className:"p-4",children:n.jsxs("button",{onClick:Z,disabled:a,className:"w-full py-2 text-sm text-purple-600 hover:text-purple-800 disabled:opacity-50",children:["Load More (",s.length," of ",o,")"]})})]})]})}const Wa=[{id:"wrong_speaker",label:"Wrong Speaker",icon:"",needsSpeaker:!0},{id:"character_voice",label:"Character Voice",icon:"",needsCharacter:!0},{id:"multiple_speakers",label:"Multiple Speakers",icon:"",needsSpeakers:!0},{id:"audio_issue",label:"Audio Issue",icon:""},{id:"other",label:"Other",icon:"",needsNotes:!0}],Zc={SPEAKER_00:{bg:"bg-blue-100",text:"text-blue-700",label:"bg-blue-200 text-blue-800",border:"border-blue-300",ring:"ring-blue-400",hex:"#dbeafe",borderHex:"#93c5fd"},SPEAKER_01:{bg:"bg-green-100",text:"text-green-700",label:"bg-green-200 text-green-800",border:"border-green-300",ring:"ring-green-400",hex:"#dcfce7",borderHex:"#86efac"},SPEAKER_02:{bg:"bg-orange-100",text:"text-orange-700",label:"bg-orange-200 text-orange-800",border:"border-orange-300",ring:"ring-orange-400",hex:"#ffedd5",borderHex:"#fdba74"},SPEAKER_03:{bg:"bg-purple-100",text:"text-purple-700",label:"bg-purple-200 text-purple-800",border:"border-purple-300",ring:"ring-purple-400",hex:"#f3e8ff",borderHex:"#c084fc"},SPEAKER_04:{bg:"bg-pink-100",text:"text-pink-700",label:"bg-pink-200 text-pink-800",border:"border-pink-300",ring:"ring-pink-400",hex:"#fce7f3",borderHex:"#f9a8d4"},SPEAKER_05:{bg:"bg-cyan-100",text:"text-cyan-700",label:"bg-cyan-200 text-cyan-800",border:"border-cyan-300",ring:"ring-cyan-400",hex:"#cffafe",borderHex:"#67e8f9"},UNKNOWN:{bg:"bg-gray-100",text:"text-gray-600",label:"bg-gray-200 text-gray-600",border:"border-gray-300",ring:"ring-gray-400",hex:"#f3f4f6",borderHex:"#d1d5db"}},eu=e=>Zc[e]||Zc.UNKNOWN,Ha=e=>{if(!e||isNaN(e))return"00:00";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),s=Math.floor(e%60);return t>0?`${t}:${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${r}:${s.toString().padStart(2,"0")}`};function hf({episode:e,onNotification:t,onFlaggedSegmentsChange:r,onCharacterAppearancesChange:s,onChaptersChange:l,onMarkedSamplesChange:a,onSpeakersChange:i,onSpeakerNamesChange:o,onVoiceLibraryChange:c,onAudioDropInstancesChange:u,onAudioDropsChange:b,onSegmentsChange:y,selectedSegmentIdx:h,onSelectedSegmentChange:g}){const[E,T]=m.useState(null),[U,f]=m.useState(!0),[d,x]=m.useState(null),[C,w]=m.useState(""),[j,F]=m.useState("speakers"),[$,_]=m.useState({}),[D,Z]=m.useState([]),[Y,v]=m.useState([]),[R,L]=m.useState([]),[X,P]=m.useState(!1),[A,H]=m.useState(!1),[W,V]=m.useState({}),[q,de]=m.useState([]),[oe,re]=m.useState([]),[le,ot]=m.useState({}),[Ns,kn]=m.useState([]),[Sn,Es]=m.useState([]),[Se,ye]=m.useState(null),[Ae,et]=m.useState(""),[gr,_n]=m.useState(""),[Kt,Br]=m.useState(null),[zt,Yt]=m.useState([]),[xr,Cs]=m.useState(null),[Nt,yr]=m.useState(!1),[Ye,Qr]=m.useState(0),[xt,Ts]=m.useState(0),[Et,sa]=m.useState(!0),[Nn,la]=m.useState(1),me=m.useRef(null),aa=m.useRef(null),ct=m.useRef({});m.useEffect(()=>{e!=null&&e.id&&(vr(),ce())},[e==null?void 0:e.id]);const vr=async()=>{try{f(!0),x(null);const[k,N,z,K,p,S,O,G,te]=await Promise.all([ge.getTranscript(e.id),Rt.getVoiceLibrary().catch(()=>[]),ee.getChapterTypes().catch(()=>[]),ee.getEpisodeChapters(e.id).catch(()=>[]),ee.getFlaggedSegments(e.id).catch(()=>[]),ee.getCharacterAppearancesForEpisode(e.id).catch(()=>[]),ee.getCharacters().catch(()=>[]),ee.getAudioDrops().catch(()=>[]),ee.getAudioDropInstances(e.id).catch(()=>[])]);T(k),Z(N),L(z),v(O),kn(G),b==null||b(G),Es(te),u==null||u(te),re(K),de(S),l==null||l(K),s==null||s(S);const ne={};p.forEach(_e=>{ne[_e.segment_idx]=_e}),V(ne),r==null||r(ne),k.speaker_names&&_(k.speaker_names)}catch(k){console.error("Error loading transcript:",k),x(k.message||"Failed to load transcript")}finally{f(!1)}},ce=async()=>{try{const k=await ge.getAudioPath(e.id);k&&Cs(na(k))}catch(k){console.error("Failed to load audio path:",k)}},se=m.useMemo(()=>{if(!(E!=null&&E.segments_json))return null;try{const k=JSON.parse(E.segments_json);return Array.isArray(k)&&k.length>0?k:null}catch{return null}},[E==null?void 0:E.segments_json]);m.useEffect(()=>{y==null||y(se)},[se]);const wr=m.useMemo(()=>{if(!se)return[];const k=new Set;return se.forEach(N=>{N.speaker&&N.speaker!=="UNKNOWN"&&k.add(N.speaker)}),Array.from(k).sort()},[se]);m.useEffect(()=>{i==null||i(wr)},[wr]),m.useEffect(()=>{o==null||o($)},[$]),m.useEffect(()=>{c==null||c(D)},[D]);const Ps=m.useMemo(()=>(se==null?void 0:se.some(k=>k.speaker&&k.speaker!=="UNKNOWN"))??!1,[se]),Pe=m.useCallback(k=>{var N;if((N=k.timestamps)!=null&&N.from){const K=k.timestamps.from.replace(",",".").split(":");if(K.length===3)return parseFloat(K[0])*3600+parseFloat(K[1])*60+parseFloat(K[2])}return typeof k.start=="number"?k.start:0},[]),ut=m.useCallback(k=>{var N;if((N=k.timestamps)!=null&&N.to){const K=k.timestamps.to.replace(",",".").split(":");if(K.length===3)return parseFloat(K[0])*3600+parseFloat(K[1])*60+parseFloat(K[2])}return typeof k.end=="number"?k.end:Pe(k)+10},[Pe]),jr=k=>{var N;return(N=k.timestamps)!=null&&N.from?k.timestamps.from.replace(",",".").slice(0,8):typeof k.start=="number"?Ha(k.start):""},br=m.useMemo(()=>{if(!se||Ye<=0)return-1;for(let k=0;k<se.length;k++){const N=Pe(se[k]),z=ut(se[k]);if(Ye>=N&&Ye<z)return k}return-1},[se,Ye,Pe,ut]);m.useEffect(()=>{Et&&br>=0&&ct.current[br]&&ct.current[br].scrollIntoView({behavior:"smooth",block:"center"})},[br,Et]),m.useEffect(()=>{const k=me.current;if(!k)return;const N=()=>Qr(k.currentTime),z=()=>Ts(k.duration),K=()=>yr(!0),p=()=>yr(!1),S=()=>{yr(!1)};return k.addEventListener("timeupdate",N),k.addEventListener("durationchange",z),k.addEventListener("play",K),k.addEventListener("pause",p),k.addEventListener("ended",S),k.duration&&!isNaN(k.duration)&&Ts(k.duration),()=>{k.removeEventListener("timeupdate",N),k.removeEventListener("durationchange",z),k.removeEventListener("play",K),k.removeEventListener("pause",p),k.removeEventListener("ended",S)}},[xr,U]);const En=()=>{me.current&&(Nt?me.current.pause():me.current.play().catch(k=>{console.error("Audio play failed:",k),t==null||t("Audio playback failed  file may be missing","error")}))},kr=k=>{me.current&&(me.current.currentTime=k,Qr(k))},Cn=k=>{const N=Pe(k);kr(N),!Nt&&me.current&&me.current.play().catch(z=>console.error("Audio play failed:",z))},Ls=k=>{var N;se!=null&&se[k]&&(Cn(se[k]),(N=ct.current[k])==null||N.scrollIntoView({behavior:"smooth",block:"center"}))},$s=k=>{me.current&&kr(Math.max(0,Math.min(xt,Ye+k)))},Sr=async(k,N,z=null,K=null,p=null,S=null)=>{try{const O=S?JSON.stringify(S):null,G=await ee.createFlaggedSegment(e.id,k,N,z,K,p,O),te={...W,[k]:{id:G,episode_id:e.id,segment_idx:k,flag_type:N,corrected_speaker:z,character_id:K,notes:p,speaker_ids:O,resolved:!1}};V(te),r==null||r(te),ye(null),Br(null),Yt([])}catch(O){t==null||t(`Failed to create flag: ${O.message}`,"error")}},zs=async k=>{const N=W[k];if(N)try{await ee.deleteFlaggedSegment(N.id);const z={...W};delete z[k],V(z),r==null||r(z)}catch(z){t==null||t(`Failed to delete flag: ${z.message}`,"error")}},At=async(k,N)=>{const z=se[k];if(z)try{await ee.addCharacterAppearance(N,e.id,Pe(z),ut(z),k);const K=await ee.getCharacterAppearancesForEpisode(e.id);de(K),s==null||s(K),ye(null)}catch(K){t==null||t(`Failed to add character: ${K.message}`,"error")}},As=async(k,N)=>{if(N.trim())try{const z=await ee.createCharacter(N.trim(),null,null,null);await At(k,z);const K=await ee.getCharacters();v(K),et("")}catch(z){t==null||t(`Failed to create character: ${z.message}`,"error")}},_r=async k=>{try{await ee.deleteCharacterAppearance(k);const N=await ee.getCharacterAppearancesForEpisode(e.id);de(N),s==null||s(N)}catch(N){t==null||t(`Failed to remove character: ${N.message}`,"error")}},Tn=async(k,N)=>{if(!se||N==null)return;const z=se[N],K=z.start??Pe(z),p=z.end??ut(z);try{await ee.createEpisodeChapter(e.id,k,null,K,p,N,N);const S=await ee.getEpisodeChapters(e.id);re(S),l==null||l(S),ye(null)}catch(S){t==null||t(`Failed to create chapter: ${S.message}`,"error")}},Pn=async k=>{try{await ee.deleteEpisodeChapter(k);const N=await ee.getEpisodeChapters(e.id);re(N),l==null||l(N)}catch(N){t==null||t(`Failed to delete chapter: ${N.message}`,"error")}},Ln=async(k,N)=>{const z=se[k];if(z)try{await ee.addAudioDropInstance(N,e.id,k,Pe(z),ut(z));const K=await ee.getAudioDropInstances(e.id);Es(K),u==null||u(K),ye(null)}catch(K){t==null||t(`Failed to add audio drop: ${K.message}`,"error")}},ia=async(k,N)=>{if(N.trim())try{const z=await ee.createAudioDrop(N.trim());await Ln(k,z);const K=await ee.getAudioDrops();kn(K),_n("")}catch(z){t==null||t(`Failed to create audio drop: ${z.message}`,"error")}},Fs=async k=>{try{await ee.deleteAudioDropInstance(k);const N=await ee.getAudioDropInstances(e.id);Es(N),u==null||u(N)}catch(N){t==null||t(`Failed to remove audio drop: ${N.message}`,"error")}},Nr=k=>{const N={...le};N[k]?delete N[k]:N[k]=!0,ot(N),a==null||a(N),P(!0)},Ds=(k,N)=>{_(z=>({...z,[k]:N})),P(!0),ye(null)},oa=k=>q.find(N=>N.segment_idx===k),ca=k=>oe.find(N=>N.start_segment_idx<=k&&N.end_segment_idx>=k),ua=k=>Sn.filter(N=>N.segment_idx===k),da=k=>{const N=Sn.filter(K=>K.audio_drop_id===k.audio_drop_id);return{position:N.findIndex(K=>K.id===k.id)+1,total:N.length}},$n=m.useMemo(()=>{if(!se)return null;if(!C)return se;const k=C.toLowerCase();return se.filter(N=>{var z;return(z=N.text)==null?void 0:z.toLowerCase().includes(k)})},[se,C]),Rs=async()=>{if(X)try{if(H(!0),await ge.updateSpeakerNames(e.id,$),Object.keys(le).length>0&&se){const k=Object.keys(le).map(N=>{const z=se[parseInt(N)];return{speaker:z.speaker,speakerName:$[z.speaker]||z.speaker,startTime:Pe(z),endTime:ut(z),text:z.text}});await ge.saveVoiceSamples(e.id,k).catch(()=>{})}P(!1),t==null||t("Changes saved","success")}catch(k){t==null||t(`Failed to save: ${k.message}`,"error")}finally{H(!1)}},pa=m.useCallback(k=>{if(!se)return;const N=se.findIndex(z=>z.speaker===k);N>=0&&Ls(N)},[se]);m.useEffect(()=>{const k=N=>{var z,K;if(!(N.target.tagName==="INPUT"||N.target.tagName==="TEXTAREA"||N.target.isContentEditable)&&se)switch(N.key){case"j":case"J":{N.preventDefault();const p=h!=null?Math.min(h+1,se.length-1):0;g==null||g(p),(z=ct.current[p])==null||z.scrollIntoView({behavior:"smooth",block:"center"});break}case"k":case"K":{N.preventDefault();const p=h!=null?Math.max(h-1,0):0;g==null||g(p),(K=ct.current[p])==null||K.scrollIntoView({behavior:"smooth",block:"center"});break}case" ":{N.preventDefault(),En();break}case"f":case"F":{h!=null&&(N.preventDefault(),ye(Se==="flag"?null:"flag"));break}case"c":case"C":{h!=null&&(N.preventDefault(),ye(Se==="character"?null:"character"));break}case"h":case"H":{h!=null&&(N.preventDefault(),ye(Se==="chapter"?null:"chapter"));break}case"Escape":{N.preventDefault(),Se?ye(null):g==null||g(null);break}}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[se,h,Se]),m.useEffect(()=>(typeof window<"u"&&(window.__transcriptEditorSeekToSegment=Ls,window.__transcriptEditorSeekToSpeaker=pa,window.__transcriptEditorAssignSpeakerName=Ds,window.__transcriptEditorAddAudioDrop=Ln,window.__transcriptEditorCreateFlag=Sr,window.__transcriptEditorAddCharacter=At,window.__transcriptEditorCreateChapter=Tn,window.__transcriptEditorDeleteFlag=zs,window.__transcriptEditorRemoveCharacter=_r,window.__transcriptEditorDeleteChapter=Pn,window.__transcriptEditorToggleVoiceSample=Nr,window.__transcriptEditorRemoveAudioDrop=Fs),()=>{typeof window<"u"&&(delete window.__transcriptEditorSeekToSegment,delete window.__transcriptEditorSeekToSpeaker,delete window.__transcriptEditorAssignSpeakerName,delete window.__transcriptEditorAddAudioDrop,delete window.__transcriptEditorCreateFlag,delete window.__transcriptEditorAddCharacter,delete window.__transcriptEditorCreateChapter,delete window.__transcriptEditorDeleteFlag,delete window.__transcriptEditorRemoveCharacter,delete window.__transcriptEditorDeleteChapter,delete window.__transcriptEditorToggleVoiceSample,delete window.__transcriptEditorRemoveAudioDrop)}));const ma=(k,N)=>{if(k==="flag")return Kt===N?n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Select speakers present"}),wr.map(z=>{const K=$[z]||z,p=zt.includes(z),S=eu(z);return n.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 text-sm rounded hover:bg-gray-50 cursor-pointer",onClick:O=>O.stopPropagation(),children:[n.jsx("input",{type:"checkbox",checked:p,onChange:O=>{O.stopPropagation(),Yt(G=>p?G.filter(te=>te!==z):[...G,z])},className:"rounded"}),n.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:S.hex}}),n.jsx("span",{children:K})]},z)}),n.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-100",children:[n.jsxs("button",{onClick:z=>{z.stopPropagation(),zt.length>=2&&Sr(N,"multiple_speakers",null,null,null,zt)},disabled:zt.length<2,className:"px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:["Save (",zt.length," selected)"]}),n.jsx("button",{onClick:z=>{z.stopPropagation(),Br(null),Yt([])},className:"px-3 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200",children:"Cancel"})]})]}):n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Flag type"}),Wa.map(z=>n.jsxs("button",{onClick:K=>{if(K.stopPropagation(),z.needsSpeaker){const p=prompt("Who should this be?");p&&Sr(N,z.id,p)}else if(z.needsSpeakers)Br(N),Yt([]);else if(z.needsNotes){const p=prompt("Add a note:");p&&Sr(N,z.id,null,null,p)}else Sr(N,z.id)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-red-50 flex items-center gap-2",children:[n.jsx("span",{children:z.icon})," ",z.label]},z.id))]});if(k==="character")return n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Character"}),Y.slice(0,8).map(z=>n.jsxs("button",{onClick:K=>{K.stopPropagation(),At(N,z.id)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-pink-50 text-pink-800 flex items-center gap-2",children:[n.jsx("span",{children:""})," ",z.name]},z.id)),n.jsx("input",{type:"text",placeholder:"+ New character...",value:Ae,onChange:z=>et(z.target.value),onKeyDown:z=>{z.key==="Enter"&&Ae.trim()&&As(N,Ae)},className:"w-full mt-1 px-2 py-1.5 text-sm border rounded",onClick:z=>z.stopPropagation()})]});if(k==="chapter")return n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Chapter type"}),R.map(z=>n.jsxs("button",{onClick:K=>{K.stopPropagation(),Tn(z.id,N)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-indigo-50 flex items-center gap-2",children:[n.jsx("span",{children:z.icon})," ",n.jsx("span",{style:{color:z.color},children:z.name})]},z.id))]});if(k==="speaker"){const z=se==null?void 0:se[N];return z?n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Assign speaker"}),D.map(K=>n.jsxs("button",{onClick:p=>{p.stopPropagation(),Ds(z.speaker,K.name)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-yellow-50 text-yellow-800 flex items-center gap-2",children:[n.jsx("span",{children:""})," ",K.short_name||K.name]},K.name))]}):null}return k==="audiodrop"?n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Audio drop"}),Ns.map(z=>n.jsxs("button",{onClick:K=>{K.stopPropagation(),Ln(N,z.id)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-teal-50 text-teal-800 flex items-center gap-2",children:[n.jsx("span",{children:""})," ",z.name]},z.id)),n.jsx("input",{type:"text",placeholder:"+ New drop...",value:gr,onChange:z=>_n(z.target.value),onKeyDown:z=>{z.key==="Enter"&&gr.trim()&&ia(N,gr)},className:"w-full mt-1 px-2 py-1.5 text-sm border rounded",onClick:z=>z.stopPropagation()})]}):null},Wr=k=>{var O,G;const N=W[k],z=oa(k),K=ca(k),p=ua(k),S=le[k];return!N&&!z&&!K&&p.length===0&&!S?null:n.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2 pt-2 border-t border-gray-200/50",children:[N&&n.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium cursor-pointer ${N.flag_type==="wrong_speaker"?"bg-red-100 text-red-700":N.flag_type==="character_voice"?"bg-pink-100 text-pink-700":"bg-yellow-100 text-yellow-700"}`,onClick:te=>{te.stopPropagation(),zs(k)},title:"Click to remove flag",children:[((O=Wa.find(te=>te.id===N.flag_type))==null?void 0:O.icon)||""," ",N.flag_type==="multiple_speakers"&&N.speaker_ids?(()=>{try{return`Multiple: ${JSON.parse(N.speaker_ids).map(_e=>$[_e]||_e).join(", ")}`}catch{return"Multiple Speakers"}})():((G=Wa.find(te=>te.id===N.flag_type))==null?void 0:G.label)||"Flag"]}),z&&n.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-pink-100 text-pink-700 cursor-pointer",onClick:te=>{te.stopPropagation(),_r(z.id)},title:"Click to remove",children:[" ",z.character_name]}),K&&n.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium cursor-pointer",style:{backgroundColor:K.chapter_type_color+"33",color:K.chapter_type_color},onClick:te=>{te.stopPropagation(),Pn(K.id)},title:"Click to remove",children:[K.chapter_type_icon," ",K.chapter_type_name]}),p.map(te=>{const ne=da(te);return n.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-teal-100 text-teal-700 cursor-pointer",onClick:_e=>{_e.stopPropagation(),Fs(te.id)},title:`${te.audio_drop_name}${ne.total>1?` (${ne.position} of ${ne.total})`:""}  click to remove`,children:[" ",te.audio_drop_name]},te.id)}),S&&n.jsx("span",{className:"px-2 py-1 bg-yellow-400 text-yellow-900 rounded text-xs font-medium cursor-pointer",onClick:te=>{te.stopPropagation(),Nr(k)},children:" Sample"})]})},Ms=k=>h!==k?null:n.jsx("div",{className:"overflow-hidden transition-all duration-200 ease-in-out",style:{maxHeight:h===k?"500px":"0"},children:n.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:[n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{onClick:N=>{N.stopPropagation(),ye(Se==="flag"?null:"flag")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${Se==="flag"?"bg-red-100 text-red-700 ring-1 ring-red-300":"bg-white text-gray-600 hover:bg-red-50 border border-gray-200"}`,children:" Flag"}),n.jsx("button",{onClick:N=>{N.stopPropagation(),ye(Se==="character"?null:"character")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${Se==="character"?"bg-pink-100 text-pink-700 ring-1 ring-pink-300":"bg-white text-gray-600 hover:bg-pink-50 border border-gray-200"}`,children:" Character"}),n.jsx("button",{onClick:N=>{N.stopPropagation(),ye(Se==="chapter"?null:"chapter")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${Se==="chapter"?"bg-indigo-100 text-indigo-700 ring-1 ring-indigo-300":"bg-white text-gray-600 hover:bg-indigo-50 border border-gray-200"}`,children:" Chapter"}),n.jsx("button",{onClick:N=>{N.stopPropagation(),ye(Se==="audiodrop"?null:"audiodrop")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${Se==="audiodrop"?"bg-teal-100 text-teal-700 ring-1 ring-teal-300":"bg-white text-gray-600 hover:bg-teal-50 border border-gray-200"}`,children:" Drop"}),n.jsx("button",{onClick:N=>{N.stopPropagation(),Nr(k)},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${le[k]?"bg-yellow-300 text-yellow-900 ring-1 ring-yellow-400":"bg-white text-gray-600 hover:bg-yellow-50 border border-gray-200"}`,children:le[k]?" Unmark":" Sample"}),n.jsx("button",{onClick:N=>{N.stopPropagation(),ye(Se==="speaker"?null:"speaker")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${Se==="speaker"?"bg-purple-100 text-purple-700 ring-1 ring-purple-300":"bg-white text-gray-600 hover:bg-purple-50 border border-gray-200"}`,children:" Speaker"})]}),Se&&ma(Se,k)]})});return e?U?n.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-purple-200 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading transcript..."})]})}):d?n.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),n.jsx("div",{className:"text-red-600 font-medium mb-4",children:d}),n.jsx("button",{onClick:vr,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"Try Again"})]})}):E?n.jsxs("div",{className:"h-full flex flex-col bg-white",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex-shrink-0",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-800 truncate",children:e.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500 flex-wrap",children:[(E==null?void 0:E.language)&&n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 rounded text-xs",children:E.language}),(E==null?void 0:E.has_diarization)&&n.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded text-xs",children:[" ",E.num_speakers," speakers"]}),oe.length>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded text-xs",children:[" ",oe.length," chapters"]}),q.length>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-pink-100 text-pink-700 rounded text-xs",children:[" ",q.length," characters"]}),Sn.length>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-teal-100 text-teal-700 rounded text-xs",children:[" ",Sn.length," drops"]}),Object.keys(W).length>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded text-xs",children:[" ",Object.keys(W).length," flags"]}),e.is_transcribed&&n.jsx("button",{onClick:async()=>{if(confirm("Reprocess diarization for this episode? This will use any speaker corrections as hints to improve results."))try{await ge.reprocessDiarization(e.id),t==null||t("Episode queued for re-diarization with hints","success")}catch(k){t==null||t(`Failed to queue re-diarization: ${k.message}`,"error")}},className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded text-xs hover:bg-orange-200 transition-colors cursor-pointer",title:"Reprocess diarization using speaker correction flags as hints",children:" Reprocess Diarization"}),X&&n.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded text-xs",children:"Unsaved changes"})]})]}),xr&&n.jsxs("div",{className:"px-4 py-3 bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-purple-100 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:En,className:"w-10 h-10 flex items-center justify-center bg-purple-500 hover:bg-purple-600 text-white rounded-full shadow-md transition-colors",children:Nt?n.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),n.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):n.jsx("svg",{className:"w-4 h-4 ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})}),n.jsx("button",{onClick:()=>$s(-10),className:"p-2 text-gray-600 hover:text-purple-600",children:"-10s"}),n.jsx("button",{onClick:()=>$s(10),className:"p-2 text-gray-600 hover:text-purple-600",children:"+10s"}),n.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-gray-500 w-12 text-right font-mono",children:Ha(Ye)}),n.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full cursor-pointer",onClick:k=>{const N=k.currentTarget.getBoundingClientRect(),z=(k.clientX-N.left)/N.width;kr(z*xt)},children:n.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${xt?Ye/xt*100:0}%`}})}),n.jsx("span",{className:"text-xs text-gray-500 w-12 font-mono",children:Ha(xt)})]}),n.jsxs("button",{onClick:()=>{const k=[1,1.25,1.5,1.75,2],N=k[(k.indexOf(Nn)+1)%k.length];la(N),me.current&&(me.current.playbackRate=N)},className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white rounded border",children:[Nn,"x"]}),n.jsx("button",{onClick:()=>sa(!Et),className:`p-2 rounded ${Et?"text-purple-600 bg-purple-100":"text-gray-400"}`,title:"Auto-scroll",children:""})]}),n.jsx("audio",{ref:me,src:xr,preload:"metadata"})]}),n.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex gap-3 flex-shrink-0 items-center",children:[n.jsx("input",{type:"text",placeholder:"Search in transcript...",className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",value:C,onChange:k=>w(k.target.value)}),Ps&&n.jsxs("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden",children:[n.jsx("button",{onClick:()=>F("speakers"),className:`px-3 py-2 text-sm ${j==="speakers"?"bg-purple-500 text-white":"bg-white text-gray-600"}`,children:"By Speaker"}),n.jsx("button",{onClick:()=>F("plain"),className:`px-3 py-2 text-sm ${j==="plain"?"bg-purple-500 text-white":"bg-white text-gray-600"}`,children:"Plain"})]}),X&&n.jsx("button",{onClick:Rs,disabled:A,className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg text-sm font-medium disabled:opacity-50",children:A?"Saving...":"Save"})]}),n.jsx("div",{className:"px-4 py-1.5 border-b border-gray-100 bg-gray-50/50 flex-shrink-0",children:n.jsxs("span",{className:"text-[10px] text-gray-400",children:[n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"J"}),"/",n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"K"})," navigate",n.jsx("span",{className:"mx-2",children:""}),n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"Space"})," play/pause",n.jsx("span",{className:"mx-2",children:""}),n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"F"})," flag",n.jsx("span",{className:"mx-2",children:""}),n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"C"})," character",n.jsx("span",{className:"mx-2",children:""}),n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"H"})," chapter",n.jsx("span",{className:"mx-2",children:""}),n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"Esc"})," close"]})}),n.jsx("div",{ref:aa,className:"flex-1 overflow-y-auto p-4",children:Ps&&j==="speakers"&&$n?n.jsx("div",{className:"space-y-3",children:$n.map((k,N)=>{var ne;const z=eu(k.speaker),K=$[k.speaker]||k.speaker,p=br===N,S=h===N,O=W[N],G=N>0?$n[N-1]:null,te=G&&G.speaker===k.speaker;return n.jsxs("div",{ref:_e=>ct.current[N]=_e,className:`group rounded-lg overflow-hidden transition-all cursor-pointer border ${S?"ring-2 ring-purple-500 shadow-md border-purple-300":p?`ring-2 ${z.ring} shadow-md border-transparent`:O?"ring-1 ring-red-300 border-red-200":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,onClick:()=>{g==null||g(S?null:N),ye(null)},children:[n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"w-[100px] flex-shrink-0 flex items-start justify-center pt-4 pb-3",style:{backgroundColor:z.hex},onClick:_e=>{_e.stopPropagation(),g==null||g(N),ye("speaker")},children:te?n.jsx("span",{className:"text-[10px] text-gray-400",children:""}):n.jsx("span",{className:"text-xs font-semibold text-gray-700 text-center leading-tight cursor-pointer hover:underline",children:K})}),n.jsxs("div",{className:"flex-1 min-w-0 px-5 py-4",style:{borderLeft:`4px solid ${z.borderHex}`},children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("button",{onClick:_e=>{_e.stopPropagation(),Cn(k)},className:"text-xs text-gray-400 hover:text-purple-600 font-mono",children:jr(k)}),p&&n.jsx("span",{className:"text-xs text-purple-600 font-medium animate-pulse",children:" NOW"})]}),n.jsx("p",{className:`text-gray-700 leading-relaxed ${p?"font-medium":""}`,children:(ne=k.text)==null?void 0:ne.trim()}),Wr(N)]})]}),Ms(N)]},N)})}):n.jsx("div",{className:"whitespace-pre-wrap",children:E.full_text||"No transcript text available"})})]}):n.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("p",{children:"No transcript available for this episode"})]})}):n.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("p",{children:"Select an episode to view transcript"})]})})}const gf=[{id:"wrong_speaker",label:"Wrong Speaker",icon:"",color:"red"},{id:"character_voice",label:"Character Voice",icon:"",color:"pink"},{id:"multiple_speakers",label:"Multiple Speakers",icon:"",color:"orange"},{id:"audio_issue",label:"Audio Issue",icon:"",color:"gray"},{id:"other",label:"Other",icon:"",color:"yellow"}];function Bn({active:e,onClick:t,children:r,count:s}){return n.jsxs("button",{onClick:t,className:`flex-1 px-2 py-2 text-xs font-medium transition-colors relative ${e?"text-purple-700 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700 border-b-2 border-transparent"}`,children:[r,s>0&&n.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded-full text-[10px] ${e?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"}`,children:s})]})}const xf={SPEAKER_00:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},SPEAKER_01:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},SPEAKER_02:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300"},SPEAKER_03:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},SPEAKER_04:{bg:"bg-pink-100",text:"text-pink-700",border:"border-pink-300"},SPEAKER_05:{bg:"bg-cyan-100",text:"text-cyan-700",border:"border-cyan-300"}},yf=e=>xf[e]||{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"};function vf({episode:e,flaggedSegments:t={},characterAppearances:r=[],episodeChapters:s=[],characters:l=[],chapterTypes:a=[],voiceLibrary:i=[],markedSamples:o={},speakers:c=[],speakerNames:u={},audioDropInstances:b=[],audioDrops:y=[],segments:h=null,selectedSegmentIdx:g=null,onCreateFlag:E,onDeleteFlag:T,onAddCharacter:U,onRemoveCharacter:f,onCreateChapter:d,onDeleteChapter:x,onToggleVoiceSample:C,onSeekToSegment:w,onAssignSpeakerName:j,onSeekToSpeaker:F,onRemoveAudioDrop:$}){const[_,D]=m.useState("flags"),[Z,Y]=m.useState(!1),[v,R]=m.useState(null),L=Object.keys(t).length,X=r.length,P=s.length,A=Object.keys(o).length,H=c.length,W=b.length;return Z?n.jsxs("div",{className:"w-12 h-full bg-gray-50 border-l border-gray-200 flex flex-col items-center py-4",children:[n.jsx("button",{onClick:()=>Y(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Expand panel",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),n.jsxs("div",{className:"mt-4 space-y-3",children:[L>0&&n.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-xs font-medium",children:L}),X>0&&n.jsx("div",{className:"w-8 h-8 rounded-full bg-pink-100 text-pink-600 flex items-center justify-center text-xs font-medium",children:X}),P>0&&n.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs font-medium",children:P}),W>0&&n.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center text-xs font-medium",children:W})]})]}):n.jsxs("div",{className:"w-72 h-full bg-gray-50 border-l border-gray-200 flex flex-col",children:[n.jsxs("div",{className:"p-3 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[n.jsx("h3",{className:"font-semibold text-gray-700 text-sm",children:"Properties"}),n.jsx("button",{onClick:()=>Y(!0),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Collapse panel",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),H>0&&n.jsxs("div",{className:"p-3 border-b border-gray-200 bg-purple-50 flex-shrink-0",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("span",{className:"text-xs font-medium text-purple-800 flex items-center gap-1",children:[" ",H," speakers"]})}),n.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(V=>{const q=yf(V),de=u[V],oe=v===V;return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>F==null?void 0:F(V),className:`px-2 py-1 rounded text-xs font-medium flex items-center gap-1 ${q.bg} ${q.text} ${q.border} border hover:shadow-sm transition-all`,title:`Click to hear ${V}`,children:[de||V,n.jsx("span",{className:"opacity-50 text-[10px]",children:""})]}),!de&&i.length>0&&n.jsx("button",{onClick:re=>{re.stopPropagation(),R(oe?null:V)},className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white rounded-full text-[10px] font-bold hover:bg-red-600",title:"Assign name",children:"!"}),oe&&n.jsxs("div",{className:"absolute left-0 top-full z-20 mt-1 p-2 bg-white rounded-lg shadow-xl border border-gray-200 min-w-32",children:[n.jsx("div",{className:"text-[10px] text-gray-500 mb-1",children:"Assign:"}),i.map(re=>n.jsx("button",{onClick:le=>{le.stopPropagation(),j==null||j(V,re.name),R(null)},className:"block w-full px-2 py-1 text-xs text-left hover:bg-yellow-50 text-yellow-800 rounded",children:re.short_name||re.name},re.name)),n.jsx("button",{onClick:()=>R(null),className:"block w-full px-2 py-1 text-xs text-gray-400 hover:text-gray-600 mt-1 border-t",children:"Cancel"})]})]},V)})})]}),n.jsxs("div",{className:"flex border-b border-gray-200 flex-shrink-0 overflow-x-auto",children:[n.jsx(Bn,{active:_==="flags",onClick:()=>D("flags"),count:L,children:"Flags"}),n.jsx(Bn,{active:_==="characters",onClick:()=>D("characters"),count:X,children:"Chars"}),n.jsx(Bn,{active:_==="chapters",onClick:()=>D("chapters"),count:P,children:"Chaps"}),n.jsx(Bn,{active:_==="drops",onClick:()=>D("drops"),count:W,children:"Drops"}),n.jsx(Bn,{active:_==="samples",onClick:()=>D("samples"),count:A,children:"Samples"})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-3",children:[_==="flags"&&n.jsx("div",{className:"space-y-2",children:L===0?n.jsxs("p",{className:"text-xs text-gray-500 text-center py-4",children:["No flagged segments.",n.jsx("br",{}),"Use the ... menu on segments to flag issues."]}):Object.entries(t).map(([V,q])=>{const de=gf.find(oe=>oe.id===q.flag_type);return n.jsxs("div",{className:`p-2 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow ${q.flag_type==="wrong_speaker"?"bg-red-50 border-red-200":q.flag_type==="character_voice"?"bg-pink-50 border-pink-200":q.flag_type==="multiple_speakers"?"bg-orange-50 border-orange-200":q.flag_type==="audio_issue"?"bg-gray-50 border-gray-200":"bg-yellow-50 border-yellow-200"}`,onClick:()=>w==null?void 0:w(parseInt(V)),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:(de==null?void 0:de.icon)||""}),n.jsx("span",{className:"text-xs font-medium",children:(de==null?void 0:de.label)||"Flag"})]}),n.jsx("button",{onClick:oe=>{oe.stopPropagation(),T==null||T(parseInt(V))},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:["Segment #",V,q.corrected_speaker&&n.jsxs("span",{className:"ml-2",children:[" ",q.corrected_speaker]})]}),q.notes&&n.jsxs("div",{className:"text-xs text-gray-600 mt-1 italic",children:['"',q.notes,'"']})]},q.id)})}),_==="characters"&&n.jsx("div",{className:"space-y-2",children:X===0?n.jsxs("p",{className:"text-xs text-gray-500 text-center py-4",children:["No character appearances marked.",n.jsx("br",{}),"Use the ... menu on segments to mark characters."]}):r.map(V=>n.jsxs("div",{className:"p-2 rounded-lg bg-pink-50 border border-pink-200 cursor-pointer hover:shadow-sm transition-shadow",onClick:()=>w==null?void 0:w(V.segment_idx),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:""}),n.jsx("span",{className:"text-xs font-medium text-pink-800",children:V.character_name})]}),n.jsx("button",{onClick:q=>{q.stopPropagation(),f==null||f(V.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:["Segment #",V.segment_idx]})]},V.id))}),_==="chapters"&&n.jsx("div",{className:"space-y-2",children:P===0?n.jsxs("p",{className:"text-xs text-gray-500 text-center py-4",children:["No chapters marked.",n.jsx("br",{}),"Use the ... menu on segments to mark chapters."]}):s.map(V=>n.jsxs("div",{className:"p-2 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow",style:{backgroundColor:V.chapter_type_color+"20",borderColor:V.chapter_type_color+"60"},onClick:()=>w==null?void 0:w(V.start_segment_idx),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:V.chapter_type_icon}),n.jsx("span",{className:"text-xs font-medium",style:{color:V.chapter_type_color},children:V.chapter_type_name})]}),n.jsx("button",{onClick:q=>{q.stopPropagation(),x==null||x(V.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),V.title&&n.jsx("div",{className:"text-xs text-gray-700 mt-1",children:V.title}),n.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:["Segments #",V.start_segment_idx," - #",V.end_segment_idx]})]},V.id))}),_==="drops"&&n.jsx("div",{className:"space-y-2",children:W===0?n.jsxs("p",{className:"text-xs text-gray-500 text-center py-4",children:["No audio drops tagged.",n.jsx("br",{}),"Select a segment and use the Audio Drop action."]}):b.map(V=>{const q=b.filter(re=>re.audio_drop_id===V.audio_drop_id),de=q.findIndex(re=>re.id===V.id)+1,oe=q.length;return n.jsxs("div",{className:"p-2 rounded-lg bg-teal-50 border border-teal-200 cursor-pointer hover:shadow-sm transition-shadow",onClick:()=>w==null?void 0:w(V.segment_idx),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:""}),n.jsxs("span",{className:"text-xs font-medium text-teal-800",children:[V.audio_drop_name,oe>1&&n.jsxs("span",{className:"text-[10px] text-teal-500 ml-1",children:["(",de,"/",oe,")"]})]})]}),n.jsx("button",{onClick:re=>{re.stopPropagation(),$==null||$(V.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:["Segment #",V.segment_idx]})]},V.id)})}),_==="samples"&&n.jsx("div",{className:"space-y-2",children:A===0?n.jsxs("p",{className:"text-xs text-gray-500 text-center py-4",children:["No voice samples marked.",n.jsx("br",{}),"Use the ... menu on segments to mark good voice samples."]}):n.jsxs("div",{children:[n.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[A," sample",A!==1?"s":""," marked"]}),Object.keys(o).map(V=>n.jsx("div",{className:"p-2 rounded-lg bg-yellow-50 border border-yellow-200 cursor-pointer hover:shadow-sm transition-shadow",onClick:()=>w==null?void 0:w(parseInt(V)),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:""}),n.jsxs("span",{className:"text-xs font-medium text-yellow-800",children:["Segment #",V]})]}),n.jsx("button",{onClick:q=>{q.stopPropagation(),C==null||C(parseInt(V))},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},V))]})})]}),e&&n.jsx("div",{className:"p-3 border-t border-gray-200 flex-shrink-0",children:n.jsx("div",{className:"text-xs text-gray-500 truncate",title:e.title,children:e.title})})]})}function wf({onNotification:e}){var oe;const[t,r]=m.useState(null),[s,l]=m.useState(!1),[a,i]=m.useState({}),[o,c]=m.useState([]),[u,b]=m.useState([]),[y,h]=m.useState({}),[g,E]=m.useState([]),[T,U]=m.useState([]),[f,d]=m.useState([]),[x,C]=m.useState([]),[w,j]=m.useState({}),[F,$]=m.useState([]),[_,D]=m.useState([]),[Z,Y]=m.useState(null),[v,R]=m.useState(null),L=m.useCallback(re=>{r(re),l(!0),i({}),c([]),b([]),h({}),C([]),j({}),$([]),D([]),Y(null),R(null)},[]),X=m.useCallback(re=>{var le;(le=window.__transcriptEditorDeleteFlag)==null||le.call(window,re)},[]),P=m.useCallback(re=>{var le;(le=window.__transcriptEditorRemoveCharacter)==null||le.call(window,re)},[]),A=m.useCallback(re=>{var le;(le=window.__transcriptEditorDeleteChapter)==null||le.call(window,re)},[]),H=m.useCallback(re=>{var le;(le=window.__transcriptEditorToggleVoiceSample)==null||le.call(window,re)},[]),W=m.useCallback(re=>{typeof window<"u"&&window.__transcriptEditorSeekToSegment&&window.__transcriptEditorSeekToSegment(re)},[]),V=m.useCallback(re=>{var le;(le=window.__transcriptEditorRemoveAudioDrop)==null||le.call(window,re)},[]),q=m.useCallback(re=>{typeof window<"u"&&window.__transcriptEditorSeekToSpeaker&&window.__transcriptEditorSeekToSpeaker(re)},[]),de=m.useCallback((re,le)=>{j(ot=>({...ot,[re]:le})),typeof window<"u"&&window.__transcriptEditorAssignSpeakerName&&window.__transcriptEditorAssignSpeakerName(re,le)},[]);return n.jsxs("div",{className:"h-[calc(100vh-220px)] flex bg-gray-100 rounded-xl overflow-hidden shadow-lg border border-gray-200",children:[s?n.jsxs("div",{className:"w-12 h-full bg-white border-r border-gray-200 flex flex-col items-center py-4 flex-shrink-0",children:[n.jsx("button",{onClick:()=>l(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Browse episodes",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})}),t&&n.jsx("div",{className:"mt-4 flex-1 flex items-start justify-center overflow-hidden",children:n.jsx("span",{className:"text-[10px] text-gray-500 font-medium whitespace-nowrap",style:{writingMode:"vertical-rl",textOrientation:"mixed"},title:t.title,children:((oe=t.title)==null?void 0:oe.length)>40?t.title.slice(0,40)+"":t.title})})]}):n.jsxs("div",{className:"w-80 flex-shrink-0 flex flex-col h-full",children:[n.jsx("div",{className:"px-3 py-2 border-b border-gray-200 bg-white flex items-center justify-end flex-shrink-0",children:n.jsx("button",{onClick:()=>l(!0),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Collapse sidebar",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})}),n.jsx("div",{className:"flex-1 min-h-0",children:n.jsx(ff,{selectedEpisodeId:t==null?void 0:t.id,onSelectEpisode:L,onNotification:e})})]}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx(hf,{episode:t,onNotification:e,onFlaggedSegmentsChange:i,onCharacterAppearancesChange:c,onChaptersChange:b,onMarkedSamplesChange:h,onSpeakersChange:C,onSpeakerNamesChange:j,onVoiceLibraryChange:d,onAudioDropInstancesChange:$,onAudioDropsChange:D,onSegmentsChange:Y,selectedSegmentIdx:v,onSelectedSegmentChange:R})}),n.jsx(vf,{episode:t,flaggedSegments:a,characterAppearances:o,episodeChapters:u,characters:g,chapterTypes:T,voiceLibrary:f,markedSamples:y,speakers:x,speakerNames:w,audioDropInstances:F,audioDrops:_,segments:Z,selectedSegmentIdx:v,onDeleteFlag:X,onRemoveCharacter:P,onDeleteChapter:A,onToggleVoiceSample:H,onSeekToSegment:W,onAssignSpeakerName:de,onSeekToSpeaker:q,onRemoveAudioDrop:V})]})}function jf({message:e,type:t="success",onClose:r}){m.useEffect(()=>{const l=setTimeout(r,5e3);return()=>clearTimeout(l)},[r]);const s={success:"bg-sage-50 border-sage-500 text-sage-800",error:"bg-red-50 border-red-500 text-red-800"};return n.jsx("div",{className:"fixed top-20 right-4 z-50 animate-slide-in",children:n.jsx("div",{className:`${s[t]} border-l-4 rounded-lg shadow-lg p-4 max-w-md`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-medium",children:e}),n.jsx("button",{className:"ml-4 text-gray-400 hover:text-gray-600",onClick:r,children:""})]})})})}function bf({onNotification:e}){const[t,r]=m.useState([]),[s,l]=m.useState([]),[a,i]=m.useState([]),[o,c]=m.useState(!0),[u,b]=m.useState(!1),[y,h]=m.useState(null),[g,E]=m.useState({name:"",shortName:"",isHost:!1}),[T,U]=m.useState(null),f=m.useRef(null);m.useEffect(()=>{d()},[]);const d=async()=>{c(!0);try{const[v,R,L]=await Promise.all([Rt.getSpeakers(),Rt.getSpeakerStats(),Rt.getVoiceLibrary()]);r(v),l(R),i(L)}catch(v){console.error("Error loading speakers:",v),e==null||e("Error loading speakers","error")}finally{c(!1)}},x=async()=>{if(!g.name.trim()){e==null||e("Name is required","error");return}try{await Rt.createSpeaker(g.name.trim(),g.shortName.trim()||null,g.isHost),e==null||e(`Speaker "${g.name}" added`,"success"),E({name:"",shortName:"",isHost:!1}),b(!1),d()}catch(v){e==null||e(`Error adding speaker: ${v.message}`,"error")}},C=async()=>{if(!(!y||!g.name.trim()))try{await Rt.updateSpeaker(y.id,g.name.trim(),g.shortName.trim()||null,g.isHost),e==null||e(`Speaker "${g.name}" updated`,"success"),h(null),E({name:"",shortName:"",isHost:!1}),d()}catch(v){e==null||e(`Error updating speaker: ${v.message}`,"error")}},w=async v=>{if(confirm(`Delete speaker "${v.name}"?`))try{await Rt.deleteSpeaker(v.id),e==null||e(`Speaker "${v.name}" deleted`,"success"),d()}catch(R){e==null||e(`Error deleting speaker: ${R.message}`,"error")}},j=v=>{h(v),E({name:v.name,shortName:v.short_name||"",isHost:v.is_host}),b(!1)},F=()=>{h(null),E({name:"",shortName:"",isHost:!1})},$=v=>{if(!v)return"0m";const R=Math.floor(v/3600),L=Math.floor(v%3600/60);return R>0?`${R}h ${L}m`:`${L}m`},_=async v=>{try{const R=await Rt.getVoiceSamplePath(v);R&&f.current?(f.current.src=na(R),f.current.play(),U(v)):e==null||e("No voice sample available","info")}catch(R){console.error("Error playing sample:",R)}},D=()=>{f.current&&(f.current.pause(),f.current.currentTime=0),U(null)},Z=t.map(v=>{const R=s.find(X=>X.id===v.id)||{},L=a.find(X=>X.name===v.name);return{...v,...R,voiceInfo:L}}),Y=a.filter(v=>!t.find(R=>R.name===v.name));return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Speakers"}),n.jsx("button",{onClick:()=>{b(!0),h(null),E({name:"",shortName:"",isHost:!1})},className:"px-3 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium text-sm transition-colors",children:"+ Add Speaker"})]})}),n.jsxs("div",{className:"p-6",children:[a.length>0&&n.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("h3",{className:"font-medium text-yellow-800",children:"Voice Library"}),n.jsxs("span",{className:"text-sm text-yellow-600",children:["(",a.length," speakers with voice samples)"]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(v=>n.jsxs("button",{onClick:()=>T===v.name?D():_(v.name),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${T===v.name?"bg-yellow-400 border-yellow-500 shadow-md":"bg-white border-yellow-300 hover:bg-yellow-100"}`,children:[n.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${T===v.name?"bg-yellow-600":"bg-yellow-500"}`,children:v.short_name.charAt(0).toUpperCase()}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-gray-800 text-sm",children:v.name}),n.jsxs("div",{className:"text-xs text-gray-500",children:[v.sample_count," sample",v.sample_count!==1?"s":""]})]}),n.jsx("span",{className:`ml-1 transition-transform ${T===v.name?"animate-pulse":""}`,children:T===v.name?"":""})]},v.name))}),n.jsx("p",{className:"text-xs text-yellow-700 mt-3",children:"Voice samples improve automatic speaker identification during diarization. Add more samples in the Transcript viewer by marking good clips."})]}),(u||y)&&n.jsxs("div",{className:"mb-6 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[n.jsx("h3",{className:"font-medium text-purple-800 mb-3",children:y?"Edit Speaker":"Add New Speaker"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),n.jsx("input",{type:"text",value:g.name,onChange:v=>E({...g,name:v.target.value}),placeholder:"e.g., Matt Donnelly",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Name"}),n.jsx("input",{type:"text",value:g.shortName,onChange:v=>E({...g,shortName:v.target.value}),placeholder:"e.g., Matt",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),n.jsx("div",{className:"flex items-end gap-4",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:g.isHost,onChange:v=>E({...g,isHost:v.target.checked}),className:"w-4 h-4 text-purple-500 border-gray-300 rounded focus:ring-purple-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Is Host"})]})})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{onClick:y?C:x,className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium text-sm transition-colors",children:y?"Update":"Add Speaker"}),n.jsx("button",{onClick:()=>{b(!1),F()},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-sm transition-colors",children:"Cancel"})]})]}),o?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-purple-200 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading speakers..."})]}):Z.length===0&&Y.length===0?n.jsx("div",{className:"text-center py-12 text-gray-400",children:"No speakers yet. Add hosts and guests to track them across episodes."}):n.jsxs("div",{className:"space-y-3",children:[Z.map(v=>n.jsx("div",{className:`p-4 rounded-lg border ${v.is_host?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${v.is_host?"bg-purple-500":"bg-gray-400"}`,children:(v.short_name||v.name).charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-gray-800",children:v.name}),v.short_name&&n.jsxs("span",{className:"text-sm text-gray-500",children:["(",v.short_name,")"]}),v.is_host&&n.jsx("span",{className:"px-2 py-0.5 bg-purple-200 text-purple-700 rounded text-xs font-medium",children:"Host"}),v.voiceInfo&&n.jsxs("span",{className:"px-2 py-0.5 bg-yellow-200 text-yellow-700 rounded text-xs font-medium",children:[" ",v.voiceInfo.sample_count," sample",v.voiceInfo.sample_count!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[n.jsxs("span",{children:[v.episode_count||0," episodes"]}),n.jsx("span",{children:$(v.total_speaking_time)}),n.jsxs("span",{children:[v.total_segments||0," segments"]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[v.voiceInfo&&n.jsx("button",{onClick:()=>T===v.name?D():_(v.name),className:`px-3 py-1 text-sm rounded transition-colors ${T===v.name?"bg-yellow-400 text-yellow-900":"text-yellow-600 hover:bg-yellow-100"}`,children:T===v.name?" Stop":" Play"}),n.jsx("button",{onClick:()=>j(v),className:"px-3 py-1 text-sm text-purple-600 hover:bg-purple-100 rounded transition-colors",children:"Edit"}),!v.is_host&&n.jsx("button",{onClick:()=>w(v),className:"px-3 py-1 text-sm text-red-600 hover:bg-red-100 rounded transition-colors",children:"Delete"})]})]})},v.id)),Y.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-sm text-gray-500 mt-6 mb-2",children:"Voice Library Only (not in speakers list):"}),Y.map(v=>n.jsx("div",{className:"p-4 rounded-lg border bg-yellow-50 border-yellow-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold bg-yellow-500",children:v.short_name.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-gray-800",children:v.name}),n.jsxs("span",{className:"px-2 py-0.5 bg-yellow-200 text-yellow-700 rounded text-xs font-medium",children:[" ",v.sample_count," sample",v.sample_count!==1?"s":""]})]}),n.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Has voice samples but not added as speaker"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>T===v.name?D():_(v.name),className:`px-3 py-1 text-sm rounded transition-colors ${T===v.name?"bg-yellow-400 text-yellow-900":"text-yellow-600 hover:bg-yellow-100"}`,children:T===v.name?" Stop":" Play"}),n.jsx("button",{onClick:()=>{E({name:v.name,shortName:v.short_name,isHost:!1}),b(!0)},className:"px-3 py-1 text-sm text-purple-600 hover:bg-purple-100 rounded transition-colors",children:"Add as Speaker"})]})]})},v.name))]})]})]}),n.jsx("audio",{ref:f,onEnded:()=>U(null),onError:()=>U(null)})]})}function kf({onNotification:e}){const[t,r]=m.useState([]),[s,l]=m.useState([]),[a,i]=m.useState(!0),[o,c]=m.useState(!1),[u,b]=m.useState(null),[y,h]=m.useState({name:"",shortName:"",description:"",catchphrase:""}),[g,E]=m.useState({characterName:"",episodeId:"",timestamp:""}),[T,U]=m.useState(!1);m.useEffect(()=>{f(),d()},[]);const f=async()=>{i(!0);try{const _=await ee.getCharacters();r(_)}catch(_){console.error("Error loading characters:",_),e==null||e("Error loading characters","error")}finally{i(!1)}},d=async()=>{try{const _=await ge.getEpisodes({feed_source:"patreon",limit:500,sort_by:"episode_number",sort_desc:!0});l(_.episodes||[])}catch(_){console.error("Error loading episodes:",_)}},x=async()=>{if(!g.characterName.trim()){e==null||e("Enter a character name","warning");return}if(!g.episodeId){e==null||e("Select an episode","warning");return}U(!0);try{let _=t.find(Y=>Y.name.toLowerCase()===g.characterName.trim().toLowerCase());if(!_){const Y=await ee.createCharacter(g.characterName.trim(),null,null,null),v=await ee.getCharacters();r(v),_=v.find(R=>R.id===Y),e==null||e(`Created new character: ${g.characterName}`,"info")}let D=null;if(g.timestamp.trim()){const Y=g.timestamp.split(":").map(Number);Y.length===2?D=Y[0]*60+Y[1]:Y.length===3&&(D=Y[0]*3600+Y[1]*60+Y[2])}await ee.addCharacterAppearance(_.id,parseInt(g.episodeId),D,null,null);const Z=s.find(Y=>Y.id===parseInt(g.episodeId));e==null||e(`Added ${_.name} to episode ${(Z==null?void 0:Z.episode_number)||g.episodeId}`,"success"),E({characterName:"",episodeId:"",timestamp:""}),f()}catch(_){e==null||e(`Error: ${_.message}`,"error")}finally{U(!1)}},C=async()=>{if(!y.name.trim()){e==null||e("Name is required","error");return}try{await ee.createCharacter(y.name.trim(),y.shortName.trim()||null,y.description.trim()||null,y.catchphrase.trim()||null),e==null||e(`Character "${y.name}" added`,"success"),h({name:"",shortName:"",description:"",catchphrase:""}),c(!1),f()}catch(_){e==null||e(`Error adding character: ${_.message}`,"error")}},w=async()=>{if(!(!u||!y.name.trim()))try{await ee.updateCharacter(u.id,y.name.trim(),y.shortName.trim()||null,y.description.trim()||null,y.catchphrase.trim()||null),e==null||e(`Character "${y.name}" updated`,"success"),b(null),h({name:"",shortName:"",description:"",catchphrase:""}),f()}catch(_){e==null||e(`Error updating character: ${_.message}`,"error")}},j=async _=>{if(confirm(`Delete character "${_.name}"?`))try{await ee.deleteCharacter(_.id),e==null||e(`Character "${_.name}" deleted`,"success"),f()}catch(D){e==null||e(`Error deleting character: ${D.message}`,"error")}},F=_=>{b(_),h({name:_.name,shortName:_.short_name||"",description:_.description||"",catchphrase:_.catchphrase||""}),c(!1)},$=()=>{b(null),h({name:"",shortName:"",description:"",catchphrase:""})};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-pink-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"ICS Characters"}),n.jsx("p",{className:"text-pink-100 text-sm",children:"Recurring characters from bits & commercials"})]}),n.jsx("button",{onClick:()=>{c(!0),b(null),h({name:"",shortName:"",description:"",catchphrase:""})},className:"px-3 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium text-sm transition-colors",children:"+ Add Character"})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[n.jsxs("h3",{className:"font-medium text-green-800 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:""})," Quick Add Character Appearance"]}),n.jsx("p",{className:"text-sm text-green-700 mb-3",children:"Know a character appears in an episode? Add it here. Creates the character if it's new."}),n.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[n.jsxs("div",{className:"flex-1 min-w-[200px]",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Character Name"}),n.jsx("input",{type:"text",value:g.characterName,onChange:_=>E({...g,characterName:_.target.value}),placeholder:"e.g., Count Absorbo",list:"character-suggestions",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),n.jsx("datalist",{id:"character-suggestions",children:t.map(_=>n.jsx("option",{value:_.name},_.id))})]}),n.jsxs("div",{className:"flex-1 min-w-[200px]",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Episode"}),n.jsxs("select",{value:g.episodeId,onChange:_=>E({...g,episodeId:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[n.jsx("option",{value:"",children:"Select episode..."}),s.map(_=>n.jsxs("option",{value:_.id,children:[_.episode_number?`#${_.episode_number}`:""," ",_.title]},_.id))]})]}),n.jsxs("div",{className:"w-32",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timestamp"}),n.jsx("input",{type:"text",value:g.timestamp,onChange:_=>E({...g,timestamp:_.target.value}),placeholder:"MM:SS",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),n.jsx("button",{onClick:x,disabled:T,className:"px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white rounded-lg font-medium transition-colors",children:T?"Adding...":"Add"})]})]}),(o||u)&&n.jsxs("div",{className:"mb-6 p-4 bg-pink-50 rounded-lg border border-pink-200",children:[n.jsx("h3",{className:"font-medium text-pink-800 mb-3",children:u?"Edit Character":"Add New Character (with details)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:y.name,onChange:_=>h({...y,name:_.target.value}),placeholder:"e.g., Sweet Bean",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Name"}),n.jsx("input",{type:"text",value:y.shortName,onChange:_=>h({...y,shortName:_.target.value}),placeholder:"e.g., Bean",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catchphrase"}),n.jsx("input",{type:"text",value:y.catchphrase,onChange:_=>h({...y,catchphrase:_.target.value}),placeholder:"e.g., It's me, Sweet Bean!",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("input",{type:"text",value:y.description,onChange:_=>h({...y,description:_.target.value}),placeholder:"e.g., Matt's lovable character",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{onClick:u?w:C,className:"px-4 py-2 bg-pink-500 hover:bg-pink-600 text-white rounded-lg font-medium text-sm transition-colors",children:u?"Update":"Add Character"}),n.jsx("button",{onClick:()=>{c(!1),$()},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-sm transition-colors",children:"Cancel"})]})]}),a?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-pink-200 border-t-pink-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading characters..."})]}):t.length===0?n.jsx("div",{className:"text-center py-12 text-gray-400",children:"No characters yet. Use Quick Add above to add characters!"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(_=>n.jsxs("div",{className:"p-4 rounded-lg border bg-gradient-to-br from-pink-50 to-purple-50 border-pink-200 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-pink-500 text-white flex items-center justify-center font-bold text-lg",children:(_.short_name||_.name).charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-800",children:_.name}),_.short_name&&n.jsxs("span",{className:"text-xs text-gray-500",children:["(",_.short_name,")"]})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>F(_),className:"p-1 text-pink-600 hover:bg-pink-100 rounded transition-colors",title:"Edit",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),n.jsx("button",{onClick:()=>j(_),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Delete",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]}),_.catchphrase&&n.jsxs("p",{className:"text-sm text-pink-600 italic mb-2",children:['"',_.catchphrase,'"']}),_.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:_.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-2",children:[n.jsxs("span",{className:"font-medium text-pink-600",children:[_.appearance_count||0," appearances"]}),_.first_episode_title&&n.jsxs("span",{className:"truncate",children:["First: ",_.first_episode_title]})]})]},_.id))})]})]})}function Sf({onNotification:e}){const[t,r]=m.useState([]),[s,l]=m.useState(!0),[a,i]=m.useState(!1),[o,c]=m.useState(null),[u,b]=m.useState({name:"",tagline:"",description:"",isReal:!1}),[y,h]=m.useState("all");m.useEffect(()=>{g()},[]);const g=async()=>{l(!0);try{const j=await ee.getSponsors();r(j)}catch(j){console.error("Error loading sponsors:",j),e==null||e("Error loading sponsors","error")}finally{l(!1)}},E=async()=>{if(!u.name.trim()){e==null||e("Name is required","error");return}try{await ee.createSponsor(u.name.trim(),u.tagline.trim()||null,u.description.trim()||null,u.isReal),e==null||e(`Sponsor "${u.name}" added`,"success"),b({name:"",tagline:"",description:"",isReal:!1}),i(!1),g()}catch(j){e==null||e(`Error adding sponsor: ${j.message}`,"error")}},T=async()=>{if(!(!o||!u.name.trim()))try{await ee.updateSponsor(o.id,u.name.trim(),u.tagline.trim()||null,u.description.trim()||null,u.isReal),e==null||e(`Sponsor "${u.name}" updated`,"success"),c(null),b({name:"",tagline:"",description:"",isReal:!1}),g()}catch(j){e==null||e(`Error updating sponsor: ${j.message}`,"error")}},U=async j=>{if(confirm(`Delete sponsor "${j.name}"?`))try{await ee.deleteSponsor(j.id),e==null||e(`Sponsor "${j.name}" deleted`,"success"),g()}catch(F){e==null||e(`Error deleting sponsor: ${F.message}`,"error")}},f=j=>{c(j),b({name:j.name,tagline:j.tagline||"",description:j.description||"",isReal:j.is_real}),i(!1)},d=()=>{c(null),b({name:"",tagline:"",description:"",isReal:!1})},x=t.filter(j=>y==="fake"?!j.is_real:y==="real"?j.is_real:!0),C=t.filter(j=>!j.is_real).length,w=t.filter(j=>j.is_real).length;return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Sponsors & Commercials"}),n.jsx("p",{className:"text-orange-100 text-sm",children:"Fake commercials and real sponsors"})]}),n.jsx("button",{onClick:()=>{i(!0),c(null),b({name:"",tagline:"",description:"",isReal:!1})},className:"px-3 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium text-sm transition-colors",children:"+ Add Sponsor"})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("button",{onClick:()=>h("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${y==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["All (",t.length,")"]}),n.jsxs("button",{onClick:()=>h("fake"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${y==="fake"?"bg-orange-500 text-white":"bg-orange-100 text-orange-700 hover:bg-orange-200"}`,children:[" Fake Commercials (",C,")"]}),n.jsxs("button",{onClick:()=>h("real"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${y==="real"?"bg-green-500 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[" Real Sponsors (",w,")"]})]}),(a||o)&&n.jsxs("div",{className:"mb-6 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[n.jsx("h3",{className:"font-medium text-orange-800 mb-3",children:o?"Edit Sponsor":"Add New Sponsor"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:u.name,onChange:j=>b({...u,name:j.target.value}),placeholder:"e.g., Totino's Pizza Rolls",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tagline"}),n.jsx("input",{type:"text",value:u.tagline,onChange:j=>b({...u,tagline:j.target.value}),placeholder:"e.g., Pizza in the morning, pizza in the evening...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("input",{type:"text",value:u.description,onChange:j=>b({...u,description:j.target.value}),placeholder:"e.g., Recurring fake sponsor for pizza-related bits",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:u.isReal,onChange:j=>b({...u,isReal:j.target.checked}),className:"w-4 h-4 text-green-500 border-gray-300 rounded focus:ring-green-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"This is a real sponsor (not a fake commercial)"})]})})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{onClick:o?T:E,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium text-sm transition-colors",children:o?"Update":"Add Sponsor"}),n.jsx("button",{onClick:()=>{i(!1),d()},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-sm transition-colors",children:"Cancel"})]})]}),s?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-orange-200 border-t-orange-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading sponsors..."})]}):x.length===0?n.jsx("div",{className:"text-center py-12 text-gray-400",children:y==="all"?"No sponsors yet. Add fake commercials and real sponsors.":y==="fake"?"No fake commercials yet.":"No real sponsors yet."}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(j=>n.jsxs("div",{className:`p-4 rounded-lg border hover:shadow-md transition-shadow ${j.is_real?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg ${j.is_real?"bg-green-500":"bg-orange-500"}`,children:j.is_real?"":""}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-800",children:j.name}),n.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${j.is_real?"bg-green-200 text-green-700":"bg-orange-200 text-orange-700"}`,children:j.is_real?"Real Sponsor":"Fake Commercial"})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>f(j),className:"p-1 text-orange-600 hover:bg-orange-100 rounded transition-colors",title:"Edit",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),n.jsx("button",{onClick:()=>U(j),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Delete",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]}),j.tagline&&n.jsxs("p",{className:`text-sm italic mb-2 ${j.is_real?"text-green-600":"text-orange-600"}`,children:['"',j.tagline,'"']}),j.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:j.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-2",children:[n.jsxs("span",{children:[j.mention_count||0," mentions"]}),j.first_episode_title&&n.jsxs("span",{className:"truncate",children:["First: ",j.first_episode_title]})]})]},j.id))})]})]})}function _f({onNotification:e}){const[t,r]=m.useState({}),[s,l]=m.useState(!0),[a,i]=m.useState(!1);m.useEffect(()=>{o()},[]);const o=async()=>{l(!0);try{const g=await Xc.getAllSettings();r(g||{})}catch(g){console.error("Error loading settings:",g),e==null||e("Error loading settings","error")}finally{l(!1)}},c=async(g,E)=>{i(!0);try{await Xc.setSetting(g,E),r(T=>({...T,[g]:E})),e==null||e(`Setting "${g}" updated`,"success")}catch(T){console.error("Error updating setting:",T),e==null||e(`Error updating setting: ${T.message}`,"error")}finally{i(!1)}},u=()=>{const g=t.auto_transcribe==="true";c("auto_transcribe",(!g).toString())},b=()=>{const g=t.enable_diarization==="true";c("enable_diarization",(!g).toString())},y=t.auto_transcribe==="true",h=t.enable_diarization==="true";return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 px-6 py-4",children:n.jsx("h2",{className:"text-xl font-bold text-white",children:"Settings"})}),n.jsx("div",{className:"p-6",children:s?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-gray-200 border-t-gray-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading settings..."})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-blue-800",children:"Auto-Transcribe"}),n.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Automatically transcribe downloaded episodes when the queue is empty. Episodes are processed in order of publish date (newest first)."})]}),n.jsx("button",{onClick:u,disabled:a,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors ${y?"bg-blue-500":"bg-gray-300"} ${a?"opacity-50":""}`,children:n.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${y?"translate-x-8":"translate-x-1"}`})})]}),n.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${y?"bg-blue-200 text-blue-800":"bg-gray-200 text-gray-600"}`,children:y?"ON":"OFF"}),y&&n.jsx("span",{className:"text-xs text-blue-600",children:"Worker will automatically pick up next episode when idle"})]})]}),n.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-purple-800",children:"Speaker Diarization"}),n.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"Identify who is speaking in each segment. Requires HuggingFace token and adds processing time."})]}),n.jsx("button",{onClick:b,disabled:a,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors ${h?"bg-purple-500":"bg-gray-300"} ${a?"opacity-50":""}`,children:n.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${h?"translate-x-8":"translate-x-1"}`})})]}),n.jsx("div",{className:"mt-3 flex items-center gap-2",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h?"bg-purple-200 text-purple-800":"bg-gray-200 text-gray-600"}`,children:h?"ON":"OFF"})})]}),n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Transcription Model"}),n.jsxs("select",{value:t.transcription_model||"medium",onChange:g=>c("transcription_model",g.target.value),disabled:a,className:"w-full md:w-64 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"tiny",children:"Tiny (fastest, lowest quality)"}),n.jsx("option",{value:"base",children:"Base (fast, basic quality)"}),n.jsx("option",{value:"small",children:"Small (balanced)"}),n.jsx("option",{value:"medium",children:"Medium (recommended)"}),n.jsx("option",{value:"large-v3",children:"Large v3 (best quality, slowest)"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Larger models are more accurate but take longer to process."})]}),n.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg border border-gray-200",children:[n.jsx("h3",{className:"font-medium text-gray-700 mb-2 text-sm",children:"Current Settings"}),n.jsx("pre",{className:"text-xs text-gray-600 overflow-auto",children:JSON.stringify(t,null,2)})]})]})})]})}const Nf=async()=>{try{const{listen:e}=await ra(async()=>{const{listen:t}=await import("./event-CTp9b6dn.js");return{listen:t}},[]);return e}catch{return null}};function Ef(e){if(e==null)return"--:--";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),s=Math.floor(e%60);return t>0?`${t}:${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${r}:${s.toString().padStart(2,"0")}`}function Cf({onNotification:e,onViewEpisode:t}){const[r,s]=m.useState(""),[l,a]=m.useState([]),[i,o]=m.useState(!1),[c,u]=m.useState(0),[b,y]=m.useState({indexed_segments:0,unindexed_episode_count:0}),[h,g]=m.useState(0),[E,T]=m.useState(!1),[U,f]=m.useState({current:0,total:0}),d=25;m.useEffect(()=>{x()},[]);const x=async()=>{try{const D=await hl.getSearchStats();y(D)}catch(D){console.error("Error loading search stats:",D)}},C=m.useCallback(async(D=!0)=>{if(!r.trim()){a([]),u(0);return}o(!0),D&&g(0);try{const Z=D?0:h,Y=await hl.searchTranscripts(r.trim(),d,Z*d);a(Y.results||[]),u(Y.total||0)}catch(Z){console.error("Search failed:",Z),e==null||e(`Search failed: ${Z.message}`,"error"),a([])}finally{o(!1)}},[r,h,d,e]),w=D=>{D.key==="Enter"&&C(!0)},j=D=>{g(D),setTimeout(()=>C(!1),0)},F=async()=>{T(!0),f({current:0,total:0,episode_title:""});let D=null,Z=null;try{const Y=await Nf();Y&&(D=await Y("indexing_progress",R=>{f({current:R.payload.current,total:R.payload.total,episode_title:R.payload.episode_title})}),Z=await Y("indexing_complete",R=>{const{indexed:L,failed:X,total:P}=R.payload;e==null||e(`Indexing complete: ${L} indexed, ${X} failed`,L>0?"success":"warning")})),e==null||e("Starting transcript indexing...","info");const v=await hl.indexAllTranscripts();v&&(e==null||e(`Indexed ${v.indexed} episodes (${v.failed} failed)`,v.indexed>0?"success":"warning")),await x()}catch(Y){console.error("Indexing failed:",Y),e==null||e(`Indexing failed: ${Y.message}`,"error")}finally{D&&D(),Z&&Z(),T(!1),f({current:0,total:0,episode_title:""})}},$=async D=>{t&&t(D.episode_id,D.start_time)},_=Math.ceil(c/d);return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Search Transcripts"}),n.jsx("p",{className:"text-indigo-100 text-sm",children:"Search across all episode transcripts with timestamps"})]}),n.jsxs("div",{className:"text-right text-sm text-indigo-100",children:[n.jsxs("div",{children:[b.indexed_segments.toLocaleString()," segments indexed"]}),b.unindexed_episode_count>0&&n.jsxs("div",{className:"text-yellow-200",children:[b.unindexed_episode_count," episodes need indexing"]})]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex gap-3 mb-6",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("input",{type:"text",value:r,onChange:D=>s(D.target.value),onKeyDown:w,placeholder:'Search for quotes, characters, topics... (e.g., "Sweet Bean" OR "pizza rolls")',className:"w-full px-4 py-3 pl-11 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-lg"}),n.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),n.jsx("button",{onClick:()=>C(!0),disabled:i||!r.trim(),className:"px-6 py-3 bg-indigo-500 hover:bg-indigo-600 disabled:bg-gray-300 text-white rounded-lg font-medium transition-colors",children:i?"Searching...":"Search"})]}),l.length===0&&!i&&!r&&n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-medium text-indigo-800 mb-2",children:"Search Tips"}),n.jsxs("ul",{className:"text-sm text-indigo-700 space-y-1",children:[n.jsxs("li",{children:["Use quotes for exact phrases: ",n.jsx("code",{className:"bg-indigo-100 px-1 rounded",children:'"Sweet Bean"'})]}),n.jsxs("li",{children:["Use OR for alternatives: ",n.jsx("code",{className:"bg-indigo-100 px-1 rounded",children:"pizza OR burger"})]}),n.jsxs("li",{children:["Use * for wildcards: ",n.jsx("code",{className:"bg-indigo-100 px-1 rounded",children:"Matting*"})]}),n.jsxs("li",{children:["Use - to exclude: ",n.jsx("code",{className:"bg-indigo-100 px-1 rounded",children:"commercial -sponsor"})]})]})]}),c>0&&n.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["Found ",c.toLocaleString(),' results for "',r,'"',_>1&&` (page ${h+1} of ${_})`]}),i?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-indigo-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Searching transcripts..."})]}):l.length===0&&r?n.jsxs("div",{className:"text-center py-12 text-gray-400",children:[n.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})}),n.jsxs("p",{children:['No results found for "',r,'"']}),n.jsx("p",{className:"text-sm mt-2",children:"Try different keywords or check if episodes are indexed"})]}):n.jsx("div",{className:"space-y-3",children:l.map(D=>n.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer bg-white",onClick:()=>$(D),children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs("span",{className:"text-xs font-medium text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded",children:["Ep ",D.episode_number||"?"]}),n.jsx("span",{className:"font-medium text-gray-800 truncate",children:D.episode_title})]}),D.speaker&&n.jsxs("span",{className:"text-xs text-gray-500",children:["Speaker: ",D.speaker]})]}),n.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded-lg text-sm font-medium transition-colors",onClick:Z=>{Z.stopPropagation(),$(D)},children:[n.jsx("span",{className:"font-mono",children:Ef(D.start_time)}),n.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})]})]}),n.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",dangerouslySetInnerHTML:{__html:D.snippet||D.text}})]},D.id))}),_>1&&n.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[n.jsx("button",{onClick:()=>j(h-1),disabled:h===0||i,className:"px-3 py-1 border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),n.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,_)},(D,Z)=>{let Y;return _<=5||h<3?Y=Z:h>_-4?Y=_-5+Z:Y=h-2+Z,n.jsx("button",{onClick:()=>j(Y),disabled:i,className:`w-8 h-8 rounded ${Y===h?"bg-indigo-500 text-white":"border border-gray-300 hover:bg-gray-50"}`,children:Y+1},Y)})}),n.jsx("button",{onClick:()=>j(h+1),disabled:h>=_-1||i,className:"px-3 py-1 border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]}),b.unindexed_episode_count>0&&n.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-medium text-yellow-800",children:[b.unindexed_episode_count," episodes need indexing"]}),n.jsx("p",{className:"text-sm text-yellow-700",children:"Index transcripts to enable full-text search"})]}),n.jsx("button",{onClick:F,disabled:E,className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 disabled:bg-yellow-300 text-white rounded-lg font-medium text-sm transition-colors",children:E?"Indexing...":"Index All"})]}),E&&U.total>0&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between text-xs text-yellow-700 mb-1",children:[n.jsx("span",{className:"truncate flex-1",children:U.episode_title||"Indexing..."}),n.jsxs("span",{className:"ml-2",children:[U.current," / ",U.total]})]}),n.jsx("div",{className:"w-full bg-yellow-200 rounded-full h-2",children:n.jsx("div",{className:"bg-yellow-500 h-2 rounded-full transition-all",style:{width:`${U.current/U.total*100}%`}})})]})]})]})]})}function Tf({onNotification:e}){const[t,r]=m.useState(null),[s,l]=m.useState([]),[a,i]=m.useState(null),[o,c]=m.useState(!1),[u,b]=m.useState([]),[y,h]=m.useState(null),[g,E]=m.useState(null),[T,U]=m.useState(!1),[f,d]=m.useState(!1),[x,C]=m.useState(""),[w,j]=m.useState({name:"",description:"",content_type:"custom",prompt_text:"",system_prompt:"",output_schema:"",is_active:!0});m.useEffect(()=>{F(),$(),_()},[]);const F=async()=>{try{const P=await Cr.getOllamaStatus();r(P)}catch(P){console.error("Failed to get Ollama status:",P)}},$=async()=>{try{const P=await Cr.getPrompts();l(P)}catch(P){console.error("Failed to load prompts:",P)}},_=async()=>{try{const P=await ge.getEpisodes({feed_source:"patreon",transcribed_only:!0,limit:100,sort_by:"published_date",sort_desc:!0});b(P.episodes||[])}catch(P){console.error("Failed to load episodes:",P)}},D=P=>{i(P),j({name:P.name,description:P.description||"",content_type:P.content_type,prompt_text:P.prompt_text,system_prompt:P.system_prompt||"",output_schema:P.output_schema||"",is_active:P.is_active}),c(!1),E(null)},Z=()=>{i(null),j({name:"",description:"",content_type:"custom",prompt_text:"",system_prompt:"You are a content extraction assistant. Analyze podcast transcripts and extract structured information. Always respond with valid JSON.",output_schema:"",is_active:!0}),c(!0),E(null)},Y=async()=>{U(!0);try{a?(await Cr.updatePrompt(a.id,w.name,w.description||null,w.content_type,w.prompt_text,w.system_prompt||null,w.output_schema||null,w.is_active),e==null||e("Prompt updated","success")):(await Cr.createPrompt(w.name,w.description||null,w.content_type,w.prompt_text,w.system_prompt||null,w.output_schema||null),e==null||e("Prompt created","success")),await $(),c(!1)}catch(P){const A=typeof P=="string"?P:(P==null?void 0:P.message)||"Unknown error";e==null||e(`Failed to save prompt: ${A}`,"error")}finally{U(!1)}},v=async()=>{if(a&&confirm(`Delete prompt "${a.name}"?`)){U(!0);try{await Cr.deletePrompt(a.id),e==null||e("Prompt deleted","success"),i(null),await $()}catch(P){const A=typeof P=="string"?P:(P==null?void 0:P.message)||"Unknown error";e==null||e(`Failed to delete prompt: ${A}`,"error")}finally{U(!1)}}},R=async()=>{if(!a||!y){e==null||e("Select a prompt and episode first","warning");return}U(!0),E(null);try{const P=await Cr.runExtraction(a.id,y.id);E(P),P.status==="completed"?e==null||e(`Extracted ${P.items_extracted} items in ${(P.duration_ms/1e3).toFixed(1)}s`,"success"):e==null||e(`Extraction failed: ${P.error}`,"error")}catch(P){const A=typeof P=="string"?P:(P==null?void 0:P.message)||"Unknown error";e==null||e(`Extraction failed: ${A}`,"error")}finally{U(!1)}},L=async()=>{if(!w.prompt_text||!x){e==null||e("Enter prompt text and sample text","warning");return}U(!0),E(null);try{const P=await Cr.testPrompt(w.prompt_text,w.system_prompt||null,x);E(P),P.status==="completed"?e==null||e(`Test completed in ${(P.duration_ms/1e3).toFixed(1)}s`,"success"):e==null||e(`Test failed: ${P.error}`,"error")}catch(P){const A=typeof P=="string"?P:(P==null?void 0:P.message)||"Unknown error";e==null||e(`Test failed: ${A}`,"error")}finally{U(!1)}},X=[{value:"character",label:"Character Detection"},{value:"trivia",label:"Trivia Scores"},{value:"guest",label:"Guest Detection"},{value:"segment",label:"Segment Detection"},{value:"custom",label:"Custom"}];return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"LLM Content Extraction"}),n.jsx("p",{className:"text-purple-100 text-sm",children:"Create and run extraction prompts with local Ollama"})]}),n.jsx("div",{className:"text-right",children:t?n.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.running&&t.model_available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.running&&t.model_available?`Ollama: ${t.model}`:t.error||"Ollama not running"}):n.jsx("div",{className:"px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-600",children:"Checking Ollama..."})})]})}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Extraction Prompts"}),n.jsx("button",{onClick:Z,className:"px-3 py-1 bg-purple-500 hover:bg-purple-600 text-white rounded text-sm",children:"+ New"})]}),n.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[s.map(P=>n.jsxs("div",{onClick:()=>D(P),className:`p-3 rounded-lg border cursor-pointer transition-colors ${(a==null?void 0:a.id)===P.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-gray-900",children:P.name}),n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${P.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:P.content_type})]}),P.description&&n.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:P.description}),n.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[P.run_count," runs"]})]},P.id)),s.length===0&&n.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"No prompts yet"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:o?a?"Edit Prompt":"New Prompt":"Prompt Details"}),a&&!o&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>c(!0),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm",children:"Edit"}),n.jsx("button",{onClick:v,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 rounded text-sm",children:"Delete"})]})]}),a||o?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),n.jsx("input",{type:"text",value:w.name,onChange:P=>j({...w,name:P.target.value}),disabled:!o,className:"w-full px-3 py-2 border rounded-lg disabled:bg-gray-50",placeholder:"Character Detection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),n.jsx("select",{value:w.content_type,onChange:P=>j({...w,content_type:P.target.value}),disabled:!o,className:"w-full px-3 py-2 border rounded-lg disabled:bg-gray-50",children:X.map(P=>n.jsx("option",{value:P.value,children:P.label},P.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("input",{type:"text",value:w.description,onChange:P=>j({...w,description:P.target.value}),disabled:!o,className:"w-full px-3 py-2 border rounded-lg disabled:bg-gray-50",placeholder:"What this prompt extracts..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Extraction Prompt"}),n.jsx("textarea",{value:w.prompt_text,onChange:P=>j({...w,prompt_text:P.target.value}),disabled:!o,rows:6,className:"w-full px-3 py-2 border rounded-lg font-mono text-sm disabled:bg-gray-50",placeholder:"Analyze this transcript and find..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"System Prompt (optional)"}),n.jsx("textarea",{value:w.system_prompt,onChange:P=>j({...w,system_prompt:P.target.value}),disabled:!o,rows:3,className:"w-full px-3 py-2 border rounded-lg font-mono text-sm disabled:bg-gray-50",placeholder:"You are a content extraction assistant..."})]}),o&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:Y,disabled:T||!w.name||!w.prompt_text,className:"flex-1 px-4 py-2 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-300 text-white rounded-lg font-medium",children:T?"Saving...":"Save Prompt"}),n.jsx("button",{onClick:()=>{c(!1),a||j({name:"",description:"",content_type:"custom",prompt_text:"",system_prompt:"",output_schema:"",is_active:!0})},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",children:"Cancel"})]})]}):n.jsx("div",{className:"text-gray-400 text-center py-8",children:"Select a prompt or create a new one"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Run Extraction"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>d(!1),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium ${f?"bg-gray-100 text-gray-600":"bg-purple-100 text-purple-700"}`,children:"Run on Episode"}),n.jsx("button",{onClick:()=>d(!0),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium ${f?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"}`,children:"Test Mode"})]}),f?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sample Text"}),n.jsx("textarea",{value:x,onChange:P=>C(P.target.value),rows:6,className:"w-full px-3 py-2 border rounded-lg font-mono text-sm",placeholder:"Paste sample transcript text here to test your prompt..."})]}),n.jsx("button",{onClick:L,disabled:T||!w.prompt_text||!x||!(t!=null&&t.running),className:"w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-lg font-medium",children:T?"Testing...":"Test Prompt"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Episode"}),n.jsxs("select",{value:(y==null?void 0:y.id)||"",onChange:P=>{const A=u.find(H=>H.id===parseInt(P.target.value));h(A)},className:"w-full px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"Choose an episode..."}),u.map(P=>n.jsxs("option",{value:P.id,children:[P.episode_number?`#${P.episode_number}: `:"",P.title]},P.id))]})]}),n.jsx("button",{onClick:R,disabled:T||!a||!y||!(t!=null&&t.running),className:"w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-lg font-medium",children:T?"Running...":"Run Extraction"})]}),g&&n.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:`font-medium ${g.status==="completed"?"text-green-700":"text-red-700"}`,children:g.status==="completed"?"Success":"Failed"}),n.jsxs("span",{className:"text-sm text-gray-500",children:[(g.duration_ms/1e3).toFixed(1),"s"]})]}),g.error&&n.jsx("div",{className:"text-red-600 text-sm mb-2",children:g.error}),g.parsed_json&&n.jsx("div",{className:"bg-white p-3 rounded border overflow-auto max-h-64",children:n.jsx("pre",{className:"text-xs text-gray-700",children:JSON.stringify(g.parsed_json,null,2)})}),!g.parsed_json&&g.raw_response&&n.jsx("div",{className:"bg-white p-3 rounded border overflow-auto max-h-64",children:n.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:g.raw_response})}),g.items_extracted>0&&n.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Extracted ",g.items_extracted," item(s)"]})]})]})]})})]})}function Pf(){const[e,t]=m.useState(!1),[r,s]=m.useState("episodes"),[l,a]=m.useState({total_episodes:0,transcribed_episodes:0,downloaded_episodes:0,in_queue:0,failed:0,completion_rate:{downloaded:0,total:0}}),[i,o]=m.useState(null),[c,u]=m.useState({pending:[],processing:[],completed:[],failed:[]}),[b,y]=m.useState(null),[h,g]=m.useState(null),[E,T]=m.useState(0);m.useEffect(()=>{B?(console.log("Running in Tauri mode"),t(!0),(async()=>await tf({onStatusUpdate:F=>{console.log("Status update:",F),d()},onQueueUpdate:F=>{console.log("Queue update:",F),f(),T($=>$+1)},onStatsUpdate:F=>{console.log("Stats update:",F),U()},onTranscriptionComplete:F=>{x(`Transcription completed for episode ${F}`,"success"),U(),f()},onTranscriptionFailed:([F,$])=>{x(`Transcription failed: ${$}`,"error"),f()}}))()):(console.log("Running in browser mode (Socket.IO)"),ra(async()=>{const{io:w}=await import("./index-wSuXe0Ee.js");return{io:w}},[]).then(({io:w})=>{const j=w();return j.on("connect",()=>{console.log("Connected to server"),t(!0),j.emit("request_update")}),j.on("disconnect",()=>{console.log("Disconnected from server"),t(!1)}),j.on("status_update",F=>{o(F)}),j.on("queue_update",F=>{u(F)}),j.on("stats_update",F=>{a(F)}),j.on("download_complete",F=>{x(`Downloaded: ${F.episode}`,"success")}),j.on("download_error",F=>{x(`Error: ${F.error}`,"error")}),()=>j.close()}))},[]),m.useEffect(()=>{U(),f(),d()},[]),m.useEffect(()=>{const w=setInterval(()=>{d(),U(),f()},5e3);return()=>clearInterval(w)},[]);const U=async()=>{try{const w=await Z0.getStats();w&&a(w)}catch(w){console.error("Error loading stats:",w)}},f=async()=>{try{const w=await bt.getQueue();w&&w.queue?u(w.queue):w&&u(w)}catch(w){console.error("Error loading queue:",w)}},d=async()=>{try{const w=await ef.getStatus();w&&!w.error?o(w):o({status:"idle",current_episode:null,progress:null,elapsed_seconds:null,estimated_remaining_seconds:null,last_activity:null,next_check_seconds:60,worker_info:{model:"unknown",memory_mb:null,memory_percent:null,processed_today:null}})}catch(w){console.error("Error loading status:",w),o(null)}},x=(w,j="success")=>{y({message:w,type:j}),setTimeout(()=>y(null),5e3)},C=async w=>{try{const j=await ge.getEpisode(w);j&&g(j)}catch(j){x(`Error loading episode: ${j.message}`,"error")}};return n.jsxs("div",{className:"min-h-screen bg-cream-100",children:[n.jsx(W0,{connected:e,isTauri:B}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[n.jsx(H0,{stats:l}),n.jsx(K0,{activity:i}),n.jsx("div",{className:"border-b border-cream-200",children:n.jsx("nav",{className:"flex gap-1",children:[{id:"episodes",label:"Episodes",icon:""},{id:"review",label:"Review",icon:""},{id:"search",label:"Search",icon:""},{id:"extraction",label:"Extraction",icon:""},{id:"speakers",label:"Speakers",icon:""},{id:"characters",label:"Characters",icon:""},{id:"sponsors",label:"Sponsors",icon:""},{id:"settings",label:"Settings",icon:""}].map(w=>n.jsxs("button",{onClick:()=>s(w.id),className:`px-4 py-3 font-medium text-sm transition-colors border-b-2 ${r===w.id?"border-coral-500 text-coral-600 bg-white":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-cream-50"}`,children:[n.jsx("span",{className:"mr-2",children:w.icon}),w.label]},w.id))})}),r==="episodes"&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(cf,{onNotification:x,refreshKey:E,queue:c})}),n.jsx("div",{className:"lg:col-span-1",children:n.jsx("div",{className:"lg:sticky lg:top-6",children:n.jsx(uf,{queue:c,onNotification:x,onRefresh:f,onViewTranscript:C})})})]}),r==="review"&&n.jsx(wf,{onNotification:x}),r==="search"&&n.jsx(Cf,{onNotification:x,onViewEpisode:async(w,j)=>{try{const F=await ge.getEpisode(w);F&&g({...F,initialTimestamp:j})}catch(F){x(`Error loading episode: ${F.message}`,"error")}}}),r==="extraction"&&n.jsx(Tf,{onNotification:x}),r==="speakers"&&n.jsx(bf,{onNotification:x}),r==="characters"&&n.jsx(kf,{onNotification:x}),r==="sponsors"&&n.jsx(Sf,{onNotification:x}),r==="settings"&&n.jsx(_f,{onNotification:x})]}),h&&n.jsx(mp,{episode:h,onClose:()=>g(null)}),b&&n.jsx(jf,{message:b.message,type:b.type,onClose:()=>y(null)})]})}Ka.createRoot(document.getElementById("root")).render(n.jsx(Lp.StrictMode,{children:n.jsx(Pf,{})}));export{nf as i,rf as t};

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=r(l);fetch(l.href,a)}})();function Tp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xu={exports:{}},ra={},gu={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Is=Symbol.for("react.element"),Pp=Symbol.for("react.portal"),$p=Symbol.for("react.fragment"),zp=Symbol.for("react.strict_mode"),Ap=Symbol.for("react.profiler"),Lp=Symbol.for("react.provider"),Rp=Symbol.for("react.context"),Dp=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),Mp=Symbol.for("react.memo"),Op=Symbol.for("react.lazy"),qo=Symbol.iterator;function Ip(e){return e===null||typeof e!="object"?null:(e=qo&&e[qo]||e["@@iterator"],typeof e=="function"?e:null)}var hu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yu=Object.assign,vu={};function On(e,t,r){this.props=e,this.context=t,this.refs=vu,this.updater=r||hu}On.prototype.isReactComponent={};On.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};On.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wu(){}wu.prototype=On.prototype;function eo(e,t,r){this.props=e,this.context=t,this.refs=vu,this.updater=r||hu}var to=eo.prototype=new wu;to.constructor=eo;yu(to,On.prototype);to.isPureReactComponent=!0;var Xo=Array.isArray,bu=Object.prototype.hasOwnProperty,ro={current:null},ju={key:!0,ref:!0,__self:!0,__source:!0};function ku(e,t,r){var s,l={},a=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)bu.call(t,s)&&!ju.hasOwnProperty(s)&&(l[s]=t[s]);var o=arguments.length-2;if(o===1)l.children=r;else if(1<o){for(var c=Array(o),m=0;m<o;m++)c[m]=arguments[m+2];l.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)l[s]===void 0&&(l[s]=o[s]);return{$$typeof:Is,type:e,key:a,ref:i,props:l,_owner:ro.current}}function Up(e,t){return{$$typeof:Is,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function no(e){return typeof e=="object"&&e!==null&&e.$$typeof===Is}function Vp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Go=/\/+/g;function Na(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Vp(""+e.key):t.toString(36)}function wl(e,t,r,s,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Is:case Pp:i=!0}}if(i)return i=e,l=l(i),e=s===""?"."+Na(i,0):s,Xo(l)?(r="",e!=null&&(r=e.replace(Go,"$&/")+"/"),wl(l,t,r,"",function(m){return m})):l!=null&&(no(l)&&(l=Up(l,r+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(Go,"$&/")+"/")+e)),t.push(l)),1;if(i=0,s=s===""?".":s+":",Xo(e))for(var o=0;o<e.length;o++){a=e[o];var c=s+Na(a,o);i+=wl(a,t,r,c,l)}else if(c=Ip(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=s+Na(a,o++),i+=wl(a,t,r,c,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function nl(e,t,r){if(e==null)return e;var s=[],l=0;return wl(e,s,"","",function(a){return t.call(r,a,l++)}),s}function Wp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ot={current:null},bl={transition:null},Bp={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:bl,ReactCurrentOwner:ro};function _u(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:nl,forEach:function(e,t,r){nl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return nl(e,function(){t++}),t},toArray:function(e){return nl(e,function(t){return t})||[]},only:function(e){if(!no(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pe.Component=On;pe.Fragment=$p;pe.Profiler=Ap;pe.PureComponent=eo;pe.StrictMode=zp;pe.Suspense=Fp;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bp;pe.act=_u;pe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=yu({},e.props),l=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=ro.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)bu.call(t,c)&&!ju.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var m=0;m<c;m++)o[m]=arguments[m+2];s.children=o}return{$$typeof:Is,type:e.type,key:l,ref:a,props:s,_owner:i}};pe.createContext=function(e){return e={$$typeof:Rp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Lp,_context:e},e.Consumer=e};pe.createElement=ku;pe.createFactory=function(e){var t=ku.bind(null,e);return t.type=e,t};pe.createRef=function(){return{current:null}};pe.forwardRef=function(e){return{$$typeof:Dp,render:e}};pe.isValidElement=no;pe.lazy=function(e){return{$$typeof:Op,_payload:{_status:-1,_result:e},_init:Wp}};pe.memo=function(e,t){return{$$typeof:Mp,type:e,compare:t===void 0?null:t}};pe.startTransition=function(e){var t=bl.transition;bl.transition={};try{e()}finally{bl.transition=t}};pe.unstable_act=_u;pe.useCallback=function(e,t){return ot.current.useCallback(e,t)};pe.useContext=function(e){return ot.current.useContext(e)};pe.useDebugValue=function(){};pe.useDeferredValue=function(e){return ot.current.useDeferredValue(e)};pe.useEffect=function(e,t){return ot.current.useEffect(e,t)};pe.useId=function(){return ot.current.useId()};pe.useImperativeHandle=function(e,t,r){return ot.current.useImperativeHandle(e,t,r)};pe.useInsertionEffect=function(e,t){return ot.current.useInsertionEffect(e,t)};pe.useLayoutEffect=function(e,t){return ot.current.useLayoutEffect(e,t)};pe.useMemo=function(e,t){return ot.current.useMemo(e,t)};pe.useReducer=function(e,t,r){return ot.current.useReducer(e,t,r)};pe.useRef=function(e){return ot.current.useRef(e)};pe.useState=function(e){return ot.current.useState(e)};pe.useSyncExternalStore=function(e,t,r){return ot.current.useSyncExternalStore(e,t,r)};pe.useTransition=function(){return ot.current.useTransition()};pe.version="18.3.1";gu.exports=pe;var p=gu.exports;const Qp=Tp(p);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=p,Kp=Symbol.for("react.element"),Yp=Symbol.for("react.fragment"),qp=Object.prototype.hasOwnProperty,Xp=Hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gp={key:!0,ref:!0,__self:!0,__source:!0};function Nu(e,t,r){var s,l={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)qp.call(t,s)&&!Gp.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)l[s]===void 0&&(l[s]=t[s]);return{$$typeof:Kp,type:e,key:a,ref:i,props:l,_owner:Xp.current}}ra.Fragment=Yp;ra.jsx=Nu;ra.jsxs=Nu;xu.exports=ra;var n=xu.exports,ai={},Su={exports:{}},kt={},Cu={exports:{}},Eu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,H){var ee=b.length;b.push(H);e:for(;0<ee;){var de=ee-1>>>1,ae=b[de];if(0<l(ae,H))b[de]=H,b[ee]=ae,ee=de;else break e}}function r(b){return b.length===0?null:b[0]}function s(b){if(b.length===0)return null;var H=b[0],ee=b.pop();if(ee!==H){b[0]=ee;e:for(var de=0,ae=b.length,Oe=ae>>>1;de<Oe;){var ke=2*(de+1)-1,A=b[ke],re=ke+1,ye=b[re];if(0>l(A,ee))re<ae&&0>l(ye,A)?(b[de]=ye,b[re]=ee,de=re):(b[de]=A,b[ke]=ee,de=ke);else if(re<ae&&0>l(ye,ee))b[de]=ye,b[re]=ee,de=re;else break e}}return H}function l(b,H){var ee=b.sortIndex-H.sortIndex;return ee!==0?ee:b.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],m=[],y=1,w=null,x=3,E=!1,g=!1,k=!1,R=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(b){for(var H=r(m);H!==null;){if(H.callback===null)s(m);else if(H.startTime<=b)s(m),H.sortIndex=H.expirationTime,t(c,H);else break;H=r(m)}}function C(b){if(k=!1,f(b),!g)if(r(c)!==null)g=!0,se(L);else{var H=r(m);H!==null&&Z(C,H.startTime-b)}}function L(b,H){g=!1,k&&(k=!1,d(I),I=-1),E=!0;var ee=x;try{for(f(H),w=r(c);w!==null&&(!(w.expirationTime>H)||b&&!q());){var de=w.callback;if(typeof de=="function"){w.callback=null,x=w.priorityLevel;var ae=de(w.expirationTime<=H);H=e.unstable_now(),typeof ae=="function"?w.callback=ae:w===r(c)&&s(c),f(H)}else s(c);w=r(c)}if(w!==null)var Oe=!0;else{var ke=r(m);ke!==null&&Z(C,ke.startTime-H),Oe=!1}return Oe}finally{w=null,x=ee,E=!1}}var z=!1,_=null,I=-1,te=5,S=-1;function q(){return!(e.unstable_now()-S<te)}function $(){if(_!==null){var b=e.unstable_now();S=b;var H=!0;try{H=_(!0,b)}finally{H?V():(z=!1,_=null)}}else z=!1}var V;if(typeof u=="function")V=function(){u($)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,le=J.port2;J.port1.onmessage=$,V=function(){le.postMessage(null)}}else V=function(){R($,0)};function se(b){_=b,z||(z=!0,V())}function Z(b,H){I=R(function(){b(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){g||E||(g=!0,se(L))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(b){switch(x){case 1:case 2:case 3:var H=3;break;default:H=x}var ee=x;x=H;try{return b()}finally{x=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,H){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var ee=x;x=b;try{return H()}finally{x=ee}},e.unstable_scheduleCallback=function(b,H,ee){var de=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?de+ee:de):ee=de,b){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ee+ae,b={id:y++,callback:H,priorityLevel:b,startTime:ee,expirationTime:ae,sortIndex:-1},ee>de?(b.sortIndex=ee,t(m,b),r(c)===null&&b===r(m)&&(k?(d(I),I=-1):k=!0,Z(C,ee-de))):(b.sortIndex=ae,t(c,b),g||E||(g=!0,se(L))),b},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(b){var H=x;return function(){var ee=x;x=H;try{return b.apply(this,arguments)}finally{x=ee}}}})(Eu);Cu.exports=Eu;var Jp=Cu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=p,jt=Jp;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tu=new Set,ks={};function nn(e,t){zn(e,t),zn(e+"Capture",t)}function zn(e,t){for(ks[e]=t,e=0;e<t.length;e++)Tu.add(t[e])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ii=Object.prototype.hasOwnProperty,em=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jo={},Zo={};function tm(e){return ii.call(Zo,e)?!0:ii.call(Jo,e)?!1:em.test(e)?Zo[e]=!0:(Jo[e]=!0,!1)}function rm(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nm(e,t,r,s){if(t===null||typeof t>"u"||rm(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ct(e,t,r,s,l,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var so=/[\-:]([a-z])/g;function lo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(so,lo);qe[t]=new ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(so,lo);qe[t]=new ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(so,lo);qe[t]=new ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new ct(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function ao(e,t,r,s){var l=qe.hasOwnProperty(t)?qe[t]:null;(l!==null?l.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nm(t,r,l,s)&&(r=null),s||l===null?tm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,s=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var dr=Zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sl=Symbol.for("react.element"),fn=Symbol.for("react.portal"),xn=Symbol.for("react.fragment"),io=Symbol.for("react.strict_mode"),oi=Symbol.for("react.profiler"),Pu=Symbol.for("react.provider"),$u=Symbol.for("react.context"),oo=Symbol.for("react.forward_ref"),ci=Symbol.for("react.suspense"),ui=Symbol.for("react.suspense_list"),co=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),zu=Symbol.for("react.offscreen"),ec=Symbol.iterator;function Zn(e){return e===null||typeof e!="object"?null:(e=ec&&e[ec]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Sa;function os(e){if(Sa===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Sa=t&&t[1]||""}return`
`+Sa+e}var Ca=!1;function Ea(e,t){if(!e||Ca)return"";Ca=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var s=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){s=m}e.call(t.prototype)}else{try{throw Error()}catch(m){s=m}e()}}catch(m){if(m&&s&&typeof m.stack=="string"){for(var l=m.stack.split(`
`),a=s.stack.split(`
`),i=l.length-1,o=a.length-1;1<=i&&0<=o&&l[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==a[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==a[o]){var c=`
`+l[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{Ca=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?os(e):""}function sm(e){switch(e.tag){case 5:return os(e.type);case 16:return os("Lazy");case 13:return os("Suspense");case 19:return os("SuspenseList");case 0:case 2:case 15:return e=Ea(e.type,!1),e;case 11:return e=Ea(e.type.render,!1),e;case 1:return e=Ea(e.type,!0),e;default:return""}}function di(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xn:return"Fragment";case fn:return"Portal";case oi:return"Profiler";case io:return"StrictMode";case ci:return"Suspense";case ui:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $u:return(e.displayName||"Context")+".Consumer";case Pu:return(e._context.displayName||"Context")+".Provider";case oo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case co:return t=e.displayName||null,t!==null?t:di(e.type)||"Memo";case vr:t=e._payload,e=e._init;try{return di(e(t))}catch{}}return null}function lm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return di(t);case 8:return t===io?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Au(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function am(e){var t=Au(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){s=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ll(e){e._valueTracker||(e._valueTracker=am(e))}function Lu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Au(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function zl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pi(e,t){var r=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function tc(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Ar(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ru(e,t){t=t.checked,t!=null&&ao(e,"checked",t,!1)}function mi(e,t){Ru(e,t);var r=Ar(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fi(e,t.type,r):t.hasOwnProperty("defaultValue")&&fi(e,t.type,Ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function fi(e,t,r){(t!=="number"||zl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var cs=Array.isArray;function Sn(e,t,r,s){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Ar(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function xi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(U(92));if(cs(r)){if(1<r.length)throw Error(U(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ar(r)}}function Du(e,t){var r=Ar(t.value),s=Ar(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function sc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Fu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Fu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var al,Mu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(al=al||document.createElement("div"),al.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=al.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _s(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},im=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(e){im.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ms[t]=ms[e]})});function Ou(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ms.hasOwnProperty(e)&&ms[e]?(""+t).trim():t+"px"}function Iu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,l=Ou(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,l):e[r]=l}}var om=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hi(e,t){if(t){if(om[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function yi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vi=null;function uo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wi=null,Cn=null,En=null;function lc(e){if(e=Ws(e)){if(typeof wi!="function")throw Error(U(280));var t=e.stateNode;t&&(t=ia(t),wi(e.stateNode,e.type,t))}}function Uu(e){Cn?En?En.push(e):En=[e]:Cn=e}function Vu(){if(Cn){var e=Cn,t=En;if(En=Cn=null,lc(e),t)for(e=0;e<t.length;e++)lc(t[e])}}function Wu(e,t){return e(t)}function Bu(){}var Ta=!1;function Qu(e,t,r){if(Ta)return e(t,r);Ta=!0;try{return Wu(e,t,r)}finally{Ta=!1,(Cn!==null||En!==null)&&(Bu(),Vu())}}function Ns(e,t){var r=e.stateNode;if(r===null)return null;var s=ia(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(U(231,t,typeof r));return r}var bi=!1;if(ir)try{var es={};Object.defineProperty(es,"passive",{get:function(){bi=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{bi=!1}function cm(e,t,r,s,l,a,i,o,c){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(y){this.onError(y)}}var fs=!1,Al=null,Ll=!1,ji=null,um={onError:function(e){fs=!0,Al=e}};function dm(e,t,r,s,l,a,i,o,c){fs=!1,Al=null,cm.apply(um,arguments)}function pm(e,t,r,s,l,a,i,o,c){if(dm.apply(this,arguments),fs){if(fs){var m=Al;fs=!1,Al=null}else throw Error(U(198));Ll||(Ll=!0,ji=m)}}function sn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Hu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ac(e){if(sn(e)!==e)throw Error(U(188))}function mm(e){var t=e.alternate;if(!t){if(t=sn(e),t===null)throw Error(U(188));return t!==e?null:e}for(var r=e,s=t;;){var l=r.return;if(l===null)break;var a=l.alternate;if(a===null){if(s=l.return,s!==null){r=s;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===r)return ac(l),e;if(a===s)return ac(l),t;a=a.sibling}throw Error(U(188))}if(r.return!==s.return)r=l,s=a;else{for(var i=!1,o=l.child;o;){if(o===r){i=!0,r=l,s=a;break}if(o===s){i=!0,s=l,r=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===r){i=!0,r=a,s=l;break}if(o===s){i=!0,s=a,r=l;break}o=o.sibling}if(!i)throw Error(U(189))}}if(r.alternate!==s)throw Error(U(190))}if(r.tag!==3)throw Error(U(188));return r.stateNode.current===r?e:t}function Ku(e){return e=mm(e),e!==null?Yu(e):null}function Yu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Yu(e);if(t!==null)return t;e=e.sibling}return null}var qu=jt.unstable_scheduleCallback,ic=jt.unstable_cancelCallback,fm=jt.unstable_shouldYield,xm=jt.unstable_requestPaint,Me=jt.unstable_now,gm=jt.unstable_getCurrentPriorityLevel,po=jt.unstable_ImmediatePriority,Xu=jt.unstable_UserBlockingPriority,Rl=jt.unstable_NormalPriority,hm=jt.unstable_LowPriority,Gu=jt.unstable_IdlePriority,na=null,Kt=null;function ym(e){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(na,e,void 0,(e.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:bm,vm=Math.log,wm=Math.LN2;function bm(e){return e>>>=0,e===0?32:31-(vm(e)/wm|0)|0}var il=64,ol=4194304;function us(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dl(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,l=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~l;o!==0?s=us(o):(a&=i,a!==0&&(s=us(a)))}else i=r&~l,i!==0?s=us(i):a!==0&&(s=us(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&l)&&(l=s&-s,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Ft(t),l=1<<r,s|=e[r],t&=~l;return s}function jm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function km(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-Ft(a),o=1<<i,c=l[i];c===-1?(!(o&r)||o&s)&&(l[i]=jm(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function ki(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ju(){var e=il;return il<<=1,!(il&4194240)&&(il=64),e}function Pa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Us(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ft(t),e[t]=r}function _m(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-Ft(r),a=1<<l;t[l]=0,s[l]=-1,e[l]=-1,r&=~a}}function mo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Ft(r),l=1<<s;l&t|e[s]&t&&(e[s]|=t),r&=~l}}var ve=0;function Zu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ed,fo,td,rd,nd,_i=!1,cl=[],Nr=null,Sr=null,Cr=null,Ss=new Map,Cs=new Map,br=[],Nm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oc(e,t){switch(e){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Ss.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cs.delete(t.pointerId)}}function ts(e,t,r,s,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[l]},t!==null&&(t=Ws(t),t!==null&&fo(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Sm(e,t,r,s,l){switch(t){case"focusin":return Nr=ts(Nr,e,t,r,s,l),!0;case"dragenter":return Sr=ts(Sr,e,t,r,s,l),!0;case"mouseover":return Cr=ts(Cr,e,t,r,s,l),!0;case"pointerover":var a=l.pointerId;return Ss.set(a,ts(Ss.get(a)||null,e,t,r,s,l)),!0;case"gotpointercapture":return a=l.pointerId,Cs.set(a,ts(Cs.get(a)||null,e,t,r,s,l)),!0}return!1}function sd(e){var t=Kr(e.target);if(t!==null){var r=sn(t);if(r!==null){if(t=r.tag,t===13){if(t=Hu(r),t!==null){e.blockedOn=t,nd(e.priority,function(){td(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ni(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);vi=s,r.target.dispatchEvent(s),vi=null}else return t=Ws(r),t!==null&&fo(t),e.blockedOn=r,!1;t.shift()}return!0}function cc(e,t,r){jl(e)&&r.delete(t)}function Cm(){_i=!1,Nr!==null&&jl(Nr)&&(Nr=null),Sr!==null&&jl(Sr)&&(Sr=null),Cr!==null&&jl(Cr)&&(Cr=null),Ss.forEach(cc),Cs.forEach(cc)}function rs(e,t){e.blockedOn===t&&(e.blockedOn=null,_i||(_i=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,Cm)))}function Es(e){function t(l){return rs(l,e)}if(0<cl.length){rs(cl[0],e);for(var r=1;r<cl.length;r++){var s=cl[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Nr!==null&&rs(Nr,e),Sr!==null&&rs(Sr,e),Cr!==null&&rs(Cr,e),Ss.forEach(t),Cs.forEach(t),r=0;r<br.length;r++)s=br[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<br.length&&(r=br[0],r.blockedOn===null);)sd(r),r.blockedOn===null&&br.shift()}var Tn=dr.ReactCurrentBatchConfig,Fl=!0;function Em(e,t,r,s){var l=ve,a=Tn.transition;Tn.transition=null;try{ve=1,xo(e,t,r,s)}finally{ve=l,Tn.transition=a}}function Tm(e,t,r,s){var l=ve,a=Tn.transition;Tn.transition=null;try{ve=4,xo(e,t,r,s)}finally{ve=l,Tn.transition=a}}function xo(e,t,r,s){if(Fl){var l=Ni(e,t,r,s);if(l===null)Ia(e,t,s,Ml,r),oc(e,s);else if(Sm(l,e,t,r,s))s.stopPropagation();else if(oc(e,s),t&4&&-1<Nm.indexOf(e)){for(;l!==null;){var a=Ws(l);if(a!==null&&ed(a),a=Ni(e,t,r,s),a===null&&Ia(e,t,s,Ml,r),a===l)break;l=a}l!==null&&s.stopPropagation()}else Ia(e,t,s,null,r)}}var Ml=null;function Ni(e,t,r,s){if(Ml=null,e=uo(s),e=Kr(e),e!==null)if(t=sn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Hu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ml=e,null}function ld(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gm()){case po:return 1;case Xu:return 4;case Rl:case hm:return 16;case Gu:return 536870912;default:return 16}default:return 16}}var kr=null,go=null,kl=null;function ad(){if(kl)return kl;var e,t=go,r=t.length,s,l="value"in kr?kr.value:kr.textContent,a=l.length;for(e=0;e<r&&t[e]===l[e];e++);var i=r-e;for(s=1;s<=i&&t[r-s]===l[a-s];s++);return kl=l.slice(e,1<s?1-s:void 0)}function _l(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ul(){return!0}function uc(){return!1}function _t(e){function t(r,s,l,a,i){this._reactName=r,this._targetInst=l,this.type=s,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ul:uc,this.isPropagationStopped=uc,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),t}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ho=_t(In),Vs=Le({},In,{view:0,detail:0}),Pm=_t(Vs),$a,za,ns,sa=Le({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ns&&(ns&&e.type==="mousemove"?($a=e.screenX-ns.screenX,za=e.screenY-ns.screenY):za=$a=0,ns=e),$a)},movementY:function(e){return"movementY"in e?e.movementY:za}}),dc=_t(sa),$m=Le({},sa,{dataTransfer:0}),zm=_t($m),Am=Le({},Vs,{relatedTarget:0}),Aa=_t(Am),Lm=Le({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),Rm=_t(Lm),Dm=Le({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fm=_t(Dm),Mm=Le({},In,{data:0}),pc=_t(Mm),Om={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Im={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Um={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Um[e])?!!t[e]:!1}function yo(){return Vm}var Wm=Le({},Vs,{key:function(e){if(e.key){var t=Om[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_l(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Im[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(e){return e.type==="keypress"?_l(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_l(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bm=_t(Wm),Qm=Le({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=_t(Qm),Hm=Le({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),Km=_t(Hm),Ym=Le({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),qm=_t(Ym),Xm=Le({},sa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gm=_t(Xm),Jm=[9,13,27,32],vo=ir&&"CompositionEvent"in window,xs=null;ir&&"documentMode"in document&&(xs=document.documentMode);var Zm=ir&&"TextEvent"in window&&!xs,id=ir&&(!vo||xs&&8<xs&&11>=xs),fc=" ",xc=!1;function od(e,t){switch(e){case"keyup":return Jm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gn=!1;function e0(e,t){switch(e){case"compositionend":return cd(t);case"keypress":return t.which!==32?null:(xc=!0,fc);case"textInput":return e=t.data,e===fc&&xc?null:e;default:return null}}function t0(e,t){if(gn)return e==="compositionend"||!vo&&od(e,t)?(e=ad(),kl=go=kr=null,gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return id&&t.locale!=="ko"?null:t.data;default:return null}}var r0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!r0[e.type]:t==="textarea"}function ud(e,t,r,s){Uu(s),t=Ol(t,"onChange"),0<t.length&&(r=new ho("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var gs=null,Ts=null;function n0(e){bd(e,0)}function la(e){var t=vn(e);if(Lu(t))return e}function s0(e,t){if(e==="change")return t}var dd=!1;if(ir){var La;if(ir){var Ra="oninput"in document;if(!Ra){var hc=document.createElement("div");hc.setAttribute("oninput","return;"),Ra=typeof hc.oninput=="function"}La=Ra}else La=!1;dd=La&&(!document.documentMode||9<document.documentMode)}function yc(){gs&&(gs.detachEvent("onpropertychange",pd),Ts=gs=null)}function pd(e){if(e.propertyName==="value"&&la(Ts)){var t=[];ud(t,Ts,e,uo(e)),Qu(n0,t)}}function l0(e,t,r){e==="focusin"?(yc(),gs=t,Ts=r,gs.attachEvent("onpropertychange",pd)):e==="focusout"&&yc()}function a0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return la(Ts)}function i0(e,t){if(e==="click")return la(t)}function o0(e,t){if(e==="input"||e==="change")return la(t)}function c0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ot=typeof Object.is=="function"?Object.is:c0;function Ps(e,t){if(Ot(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var l=r[s];if(!ii.call(t,l)||!Ot(e[l],t[l]))return!1}return!0}function vc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wc(e,t){var r=vc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vc(r)}}function md(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?md(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fd(){for(var e=window,t=zl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=zl(e.document)}return t}function wo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function u0(e){var t=fd(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&md(r.ownerDocument.documentElement,r)){if(s!==null&&wo(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,a=Math.min(s.start,l);s=s.end===void 0?a:Math.min(s.end,l),!e.extend&&a>s&&(l=s,s=a,a=l),l=wc(r,a);var i=wc(r,s);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var d0=ir&&"documentMode"in document&&11>=document.documentMode,hn=null,Si=null,hs=null,Ci=!1;function bc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ci||hn==null||hn!==zl(s)||(s=hn,"selectionStart"in s&&wo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),hs&&Ps(hs,s)||(hs=s,s=Ol(Si,"onSelect"),0<s.length&&(t=new ho("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=hn)))}function dl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var yn={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionend:dl("Transition","TransitionEnd")},Da={},xd={};ir&&(xd=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);function aa(e){if(Da[e])return Da[e];if(!yn[e])return e;var t=yn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in xd)return Da[e]=t[r];return e}var gd=aa("animationend"),hd=aa("animationiteration"),yd=aa("animationstart"),vd=aa("transitionend"),wd=new Map,jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){wd.set(e,t),nn(t,[e])}for(var Fa=0;Fa<jc.length;Fa++){var Ma=jc[Fa],p0=Ma.toLowerCase(),m0=Ma[0].toUpperCase()+Ma.slice(1);Rr(p0,"on"+m0)}Rr(gd,"onAnimationEnd");Rr(hd,"onAnimationIteration");Rr(yd,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(vd,"onTransitionEnd");zn("onMouseEnter",["mouseout","mouseover"]);zn("onMouseLeave",["mouseout","mouseover"]);zn("onPointerEnter",["pointerout","pointerover"]);zn("onPointerLeave",["pointerout","pointerover"]);nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nn("onBeforeInput",["compositionend","keypress","textInput","paste"]);nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function kc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,pm(s,t,void 0,e),e.currentTarget=null}function bd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],l=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],c=o.instance,m=o.currentTarget;if(o=o.listener,c!==a&&l.isPropagationStopped())break e;kc(l,o,m),a=c}else for(i=0;i<s.length;i++){if(o=s[i],c=o.instance,m=o.currentTarget,o=o.listener,c!==a&&l.isPropagationStopped())break e;kc(l,o,m),a=c}}}if(Ll)throw e=ji,Ll=!1,ji=null,e}function Ee(e,t){var r=t[zi];r===void 0&&(r=t[zi]=new Set);var s=e+"__bubble";r.has(s)||(jd(t,e,2,!1),r.add(s))}function Oa(e,t,r){var s=0;t&&(s|=4),jd(r,e,s,t)}var pl="_reactListening"+Math.random().toString(36).slice(2);function $s(e){if(!e[pl]){e[pl]=!0,Tu.forEach(function(r){r!=="selectionchange"&&(f0.has(r)||Oa(r,!1,e),Oa(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pl]||(t[pl]=!0,Oa("selectionchange",!1,t))}}function jd(e,t,r,s){switch(ld(t)){case 1:var l=Em;break;case 4:l=Tm;break;default:l=xo}r=l.bind(null,t,r,e),l=void 0,!bi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function Ia(e,t,r,s,l){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var o=s.stateNode.containerInfo;if(o===l||o.nodeType===8&&o.parentNode===l)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===l||c.nodeType===8&&c.parentNode===l))return;i=i.return}for(;o!==null;){if(i=Kr(o),i===null)return;if(c=i.tag,c===5||c===6){s=a=i;continue e}o=o.parentNode}}s=s.return}Qu(function(){var m=a,y=uo(r),w=[];e:{var x=wd.get(e);if(x!==void 0){var E=ho,g=e;switch(e){case"keypress":if(_l(r)===0)break e;case"keydown":case"keyup":E=Bm;break;case"focusin":g="focus",E=Aa;break;case"focusout":g="blur",E=Aa;break;case"beforeblur":case"afterblur":E=Aa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=Km;break;case gd:case hd:case yd:E=Rm;break;case vd:E=qm;break;case"scroll":E=Pm;break;case"wheel":E=Gm;break;case"copy":case"cut":case"paste":E=Fm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=mc}var k=(t&4)!==0,R=!k&&e==="scroll",d=k?x!==null?x+"Capture":null:x;k=[];for(var u=m,f;u!==null;){f=u;var C=f.stateNode;if(f.tag===5&&C!==null&&(f=C,d!==null&&(C=Ns(u,d),C!=null&&k.push(zs(u,C,f)))),R)break;u=u.return}0<k.length&&(x=new E(x,g,null,r,y),w.push({event:x,listeners:k}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",x&&r!==vi&&(g=r.relatedTarget||r.fromElement)&&(Kr(g)||g[or]))break e;if((E||x)&&(x=y.window===y?y:(x=y.ownerDocument)?x.defaultView||x.parentWindow:window,E?(g=r.relatedTarget||r.toElement,E=m,g=g?Kr(g):null,g!==null&&(R=sn(g),g!==R||g.tag!==5&&g.tag!==6)&&(g=null)):(E=null,g=m),E!==g)){if(k=dc,C="onMouseLeave",d="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(k=mc,C="onPointerLeave",d="onPointerEnter",u="pointer"),R=E==null?x:vn(E),f=g==null?x:vn(g),x=new k(C,u+"leave",E,r,y),x.target=R,x.relatedTarget=f,C=null,Kr(y)===m&&(k=new k(d,u+"enter",g,r,y),k.target=f,k.relatedTarget=R,C=k),R=C,E&&g)t:{for(k=E,d=g,u=0,f=k;f;f=dn(f))u++;for(f=0,C=d;C;C=dn(C))f++;for(;0<u-f;)k=dn(k),u--;for(;0<f-u;)d=dn(d),f--;for(;u--;){if(k===d||d!==null&&k===d.alternate)break t;k=dn(k),d=dn(d)}k=null}else k=null;E!==null&&_c(w,x,E,k,!1),g!==null&&R!==null&&_c(w,R,g,k,!0)}}e:{if(x=m?vn(m):window,E=x.nodeName&&x.nodeName.toLowerCase(),E==="select"||E==="input"&&x.type==="file")var L=s0;else if(gc(x))if(dd)L=o0;else{L=a0;var z=l0}else(E=x.nodeName)&&E.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(L=i0);if(L&&(L=L(e,m))){ud(w,L,r,y);break e}z&&z(e,x,m),e==="focusout"&&(z=x._wrapperState)&&z.controlled&&x.type==="number"&&fi(x,"number",x.value)}switch(z=m?vn(m):window,e){case"focusin":(gc(z)||z.contentEditable==="true")&&(hn=z,Si=m,hs=null);break;case"focusout":hs=Si=hn=null;break;case"mousedown":Ci=!0;break;case"contextmenu":case"mouseup":case"dragend":Ci=!1,bc(w,r,y);break;case"selectionchange":if(d0)break;case"keydown":case"keyup":bc(w,r,y)}var _;if(vo)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else gn?od(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(id&&r.locale!=="ko"&&(gn||I!=="onCompositionStart"?I==="onCompositionEnd"&&gn&&(_=ad()):(kr=y,go="value"in kr?kr.value:kr.textContent,gn=!0)),z=Ol(m,I),0<z.length&&(I=new pc(I,e,null,r,y),w.push({event:I,listeners:z}),_?I.data=_:(_=cd(r),_!==null&&(I.data=_)))),(_=Zm?e0(e,r):t0(e,r))&&(m=Ol(m,"onBeforeInput"),0<m.length&&(y=new pc("onBeforeInput","beforeinput",null,r,y),w.push({event:y,listeners:m}),y.data=_))}bd(w,t)})}function zs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ol(e,t){for(var r=t+"Capture",s=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=Ns(e,r),a!=null&&s.unshift(zs(e,a,l)),a=Ns(e,t),a!=null&&s.push(zs(e,a,l))),e=e.return}return s}function dn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _c(e,t,r,s,l){for(var a=t._reactName,i=[];r!==null&&r!==s;){var o=r,c=o.alternate,m=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&m!==null&&(o=m,l?(c=Ns(r,a),c!=null&&i.unshift(zs(r,c,o))):l||(c=Ns(r,a),c!=null&&i.push(zs(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var x0=/\r\n?/g,g0=/\u0000|\uFFFD/g;function Nc(e){return(typeof e=="string"?e:""+e).replace(x0,`
`).replace(g0,"")}function ml(e,t,r){if(t=Nc(t),Nc(e)!==t&&r)throw Error(U(425))}function Il(){}var Ei=null,Ti=null;function Pi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $i=typeof setTimeout=="function"?setTimeout:void 0,h0=typeof clearTimeout=="function"?clearTimeout:void 0,Sc=typeof Promise=="function"?Promise:void 0,y0=typeof queueMicrotask=="function"?queueMicrotask:typeof Sc<"u"?function(e){return Sc.resolve(null).then(e).catch(v0)}:$i;function v0(e){setTimeout(function(){throw e})}function Ua(e,t){var r=t,s=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(s===0){e.removeChild(l),Es(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=l}while(r);Es(t)}function Er(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Cc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Un=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Un,As="__reactProps$"+Un,or="__reactContainer$"+Un,zi="__reactEvents$"+Un,w0="__reactListeners$"+Un,b0="__reactHandles$"+Un;function Kr(e){var t=e[Ht];if(t)return t;for(var r=e.parentNode;r;){if(t=r[or]||r[Ht]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Cc(e);e!==null;){if(r=e[Ht])return r;e=Cc(e)}return t}e=r,r=e.parentNode}return null}function Ws(e){return e=e[Ht]||e[or],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function ia(e){return e[As]||null}var Ai=[],wn=-1;function Dr(e){return{current:e}}function Te(e){0>wn||(e.current=Ai[wn],Ai[wn]=null,wn--)}function _e(e,t){wn++,Ai[wn]=e.current,e.current=t}var Lr={},tt=Dr(Lr),ft=Dr(!1),Jr=Lr;function An(e,t){var r=e.type.contextTypes;if(!r)return Lr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in r)l[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function xt(e){return e=e.childContextTypes,e!=null}function Ul(){Te(ft),Te(tt)}function Ec(e,t,r){if(tt.current!==Lr)throw Error(U(168));_e(tt,t),_e(ft,r)}function kd(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var l in s)if(!(l in t))throw Error(U(108,lm(e)||"Unknown",l));return Le({},r,s)}function Vl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lr,Jr=tt.current,_e(tt,e),_e(ft,ft.current),!0}function Tc(e,t,r){var s=e.stateNode;if(!s)throw Error(U(169));r?(e=kd(e,t,Jr),s.__reactInternalMemoizedMergedChildContext=e,Te(ft),Te(tt),_e(tt,e)):Te(ft),_e(ft,r)}var nr=null,oa=!1,Va=!1;function _d(e){nr===null?nr=[e]:nr.push(e)}function j0(e){oa=!0,_d(e)}function Fr(){if(!Va&&nr!==null){Va=!0;var e=0,t=ve;try{var r=nr;for(ve=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}nr=null,oa=!1}catch(l){throw nr!==null&&(nr=nr.slice(e+1)),qu(po,Fr),l}finally{ve=t,Va=!1}}return null}var bn=[],jn=0,Wl=null,Bl=0,St=[],Ct=0,Zr=null,sr=1,lr="";function Qr(e,t){bn[jn++]=Bl,bn[jn++]=Wl,Wl=e,Bl=t}function Nd(e,t,r){St[Ct++]=sr,St[Ct++]=lr,St[Ct++]=Zr,Zr=e;var s=sr;e=lr;var l=32-Ft(s)-1;s&=~(1<<l),r+=1;var a=32-Ft(t)+l;if(30<a){var i=l-l%5;a=(s&(1<<i)-1).toString(32),s>>=i,l-=i,sr=1<<32-Ft(t)+l|r<<l|s,lr=a+e}else sr=1<<a|r<<l|s,lr=e}function bo(e){e.return!==null&&(Qr(e,1),Nd(e,1,0))}function jo(e){for(;e===Wl;)Wl=bn[--jn],bn[jn]=null,Bl=bn[--jn],bn[jn]=null;for(;e===Zr;)Zr=St[--Ct],St[Ct]=null,lr=St[--Ct],St[Ct]=null,sr=St[--Ct],St[Ct]=null}var bt=null,wt=null,$e=!1,Dt=null;function Sd(e,t){var r=Et(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Pc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bt=e,wt=Er(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bt=e,wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Zr!==null?{id:sr,overflow:lr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Et(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,bt=e,wt=null,!0):!1;default:return!1}}function Li(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ri(e){if($e){var t=wt;if(t){var r=t;if(!Pc(e,t)){if(Li(e))throw Error(U(418));t=Er(r.nextSibling);var s=bt;t&&Pc(e,t)?Sd(s,r):(e.flags=e.flags&-4097|2,$e=!1,bt=e)}}else{if(Li(e))throw Error(U(418));e.flags=e.flags&-4097|2,$e=!1,bt=e}}}function $c(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bt=e}function fl(e){if(e!==bt)return!1;if(!$e)return $c(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pi(e.type,e.memoizedProps)),t&&(t=wt)){if(Li(e))throw Cd(),Error(U(418));for(;t;)Sd(e,t),t=Er(t.nextSibling)}if($c(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){wt=Er(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}wt=null}}else wt=bt?Er(e.stateNode.nextSibling):null;return!0}function Cd(){for(var e=wt;e;)e=Er(e.nextSibling)}function Ln(){wt=bt=null,$e=!1}function ko(e){Dt===null?Dt=[e]:Dt.push(e)}var k0=dr.ReactCurrentBatchConfig;function ss(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(U(309));var s=r.stateNode}if(!s)throw Error(U(147,e));var l=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var o=l.refs;i===null?delete o[a]:o[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(U(284));if(!r._owner)throw Error(U(290,e))}return e}function xl(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zc(e){var t=e._init;return t(e._payload)}function Ed(e){function t(d,u){if(e){var f=d.deletions;f===null?(d.deletions=[u],d.flags|=16):f.push(u)}}function r(d,u){if(!e)return null;for(;u!==null;)t(d,u),u=u.sibling;return null}function s(d,u){for(d=new Map;u!==null;)u.key!==null?d.set(u.key,u):d.set(u.index,u),u=u.sibling;return d}function l(d,u){return d=zr(d,u),d.index=0,d.sibling=null,d}function a(d,u,f){return d.index=f,e?(f=d.alternate,f!==null?(f=f.index,f<u?(d.flags|=2,u):f):(d.flags|=2,u)):(d.flags|=1048576,u)}function i(d){return e&&d.alternate===null&&(d.flags|=2),d}function o(d,u,f,C){return u===null||u.tag!==6?(u=qa(f,d.mode,C),u.return=d,u):(u=l(u,f),u.return=d,u)}function c(d,u,f,C){var L=f.type;return L===xn?y(d,u,f.props.children,C,f.key):u!==null&&(u.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vr&&zc(L)===u.type)?(C=l(u,f.props),C.ref=ss(d,u,f),C.return=d,C):(C=$l(f.type,f.key,f.props,null,d.mode,C),C.ref=ss(d,u,f),C.return=d,C)}function m(d,u,f,C){return u===null||u.tag!==4||u.stateNode.containerInfo!==f.containerInfo||u.stateNode.implementation!==f.implementation?(u=Xa(f,d.mode,C),u.return=d,u):(u=l(u,f.children||[]),u.return=d,u)}function y(d,u,f,C,L){return u===null||u.tag!==7?(u=Gr(f,d.mode,C,L),u.return=d,u):(u=l(u,f),u.return=d,u)}function w(d,u,f){if(typeof u=="string"&&u!==""||typeof u=="number")return u=qa(""+u,d.mode,f),u.return=d,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case sl:return f=$l(u.type,u.key,u.props,null,d.mode,f),f.ref=ss(d,null,u),f.return=d,f;case fn:return u=Xa(u,d.mode,f),u.return=d,u;case vr:var C=u._init;return w(d,C(u._payload),f)}if(cs(u)||Zn(u))return u=Gr(u,d.mode,f,null),u.return=d,u;xl(d,u)}return null}function x(d,u,f,C){var L=u!==null?u.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return L!==null?null:o(d,u,""+f,C);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case sl:return f.key===L?c(d,u,f,C):null;case fn:return f.key===L?m(d,u,f,C):null;case vr:return L=f._init,x(d,u,L(f._payload),C)}if(cs(f)||Zn(f))return L!==null?null:y(d,u,f,C,null);xl(d,f)}return null}function E(d,u,f,C,L){if(typeof C=="string"&&C!==""||typeof C=="number")return d=d.get(f)||null,o(u,d,""+C,L);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case sl:return d=d.get(C.key===null?f:C.key)||null,c(u,d,C,L);case fn:return d=d.get(C.key===null?f:C.key)||null,m(u,d,C,L);case vr:var z=C._init;return E(d,u,f,z(C._payload),L)}if(cs(C)||Zn(C))return d=d.get(f)||null,y(u,d,C,L,null);xl(u,C)}return null}function g(d,u,f,C){for(var L=null,z=null,_=u,I=u=0,te=null;_!==null&&I<f.length;I++){_.index>I?(te=_,_=null):te=_.sibling;var S=x(d,_,f[I],C);if(S===null){_===null&&(_=te);break}e&&_&&S.alternate===null&&t(d,_),u=a(S,u,I),z===null?L=S:z.sibling=S,z=S,_=te}if(I===f.length)return r(d,_),$e&&Qr(d,I),L;if(_===null){for(;I<f.length;I++)_=w(d,f[I],C),_!==null&&(u=a(_,u,I),z===null?L=_:z.sibling=_,z=_);return $e&&Qr(d,I),L}for(_=s(d,_);I<f.length;I++)te=E(_,d,I,f[I],C),te!==null&&(e&&te.alternate!==null&&_.delete(te.key===null?I:te.key),u=a(te,u,I),z===null?L=te:z.sibling=te,z=te);return e&&_.forEach(function(q){return t(d,q)}),$e&&Qr(d,I),L}function k(d,u,f,C){var L=Zn(f);if(typeof L!="function")throw Error(U(150));if(f=L.call(f),f==null)throw Error(U(151));for(var z=L=null,_=u,I=u=0,te=null,S=f.next();_!==null&&!S.done;I++,S=f.next()){_.index>I?(te=_,_=null):te=_.sibling;var q=x(d,_,S.value,C);if(q===null){_===null&&(_=te);break}e&&_&&q.alternate===null&&t(d,_),u=a(q,u,I),z===null?L=q:z.sibling=q,z=q,_=te}if(S.done)return r(d,_),$e&&Qr(d,I),L;if(_===null){for(;!S.done;I++,S=f.next())S=w(d,S.value,C),S!==null&&(u=a(S,u,I),z===null?L=S:z.sibling=S,z=S);return $e&&Qr(d,I),L}for(_=s(d,_);!S.done;I++,S=f.next())S=E(_,d,I,S.value,C),S!==null&&(e&&S.alternate!==null&&_.delete(S.key===null?I:S.key),u=a(S,u,I),z===null?L=S:z.sibling=S,z=S);return e&&_.forEach(function($){return t(d,$)}),$e&&Qr(d,I),L}function R(d,u,f,C){if(typeof f=="object"&&f!==null&&f.type===xn&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case sl:e:{for(var L=f.key,z=u;z!==null;){if(z.key===L){if(L=f.type,L===xn){if(z.tag===7){r(d,z.sibling),u=l(z,f.props.children),u.return=d,d=u;break e}}else if(z.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vr&&zc(L)===z.type){r(d,z.sibling),u=l(z,f.props),u.ref=ss(d,z,f),u.return=d,d=u;break e}r(d,z);break}else t(d,z);z=z.sibling}f.type===xn?(u=Gr(f.props.children,d.mode,C,f.key),u.return=d,d=u):(C=$l(f.type,f.key,f.props,null,d.mode,C),C.ref=ss(d,u,f),C.return=d,d=C)}return i(d);case fn:e:{for(z=f.key;u!==null;){if(u.key===z)if(u.tag===4&&u.stateNode.containerInfo===f.containerInfo&&u.stateNode.implementation===f.implementation){r(d,u.sibling),u=l(u,f.children||[]),u.return=d,d=u;break e}else{r(d,u);break}else t(d,u);u=u.sibling}u=Xa(f,d.mode,C),u.return=d,d=u}return i(d);case vr:return z=f._init,R(d,u,z(f._payload),C)}if(cs(f))return g(d,u,f,C);if(Zn(f))return k(d,u,f,C);xl(d,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,u!==null&&u.tag===6?(r(d,u.sibling),u=l(u,f),u.return=d,d=u):(r(d,u),u=qa(f,d.mode,C),u.return=d,d=u),i(d)):r(d,u)}return R}var Rn=Ed(!0),Td=Ed(!1),Ql=Dr(null),Hl=null,kn=null,_o=null;function No(){_o=kn=Hl=null}function So(e){var t=Ql.current;Te(Ql),e._currentValue=t}function Di(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Pn(e,t){Hl=e,_o=kn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},kn===null){if(Hl===null)throw Error(U(308));kn=e,Hl.dependencies={lanes:0,firstContext:e}}else kn=kn.next=e;return t}var Yr=null;function Co(e){Yr===null?Yr=[e]:Yr.push(e)}function Pd(e,t,r,s){var l=t.interleaved;return l===null?(r.next=r,Co(t)):(r.next=l.next,l.next=r),t.interleaved=r,cr(e,s)}function cr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var wr=!1;function Eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $d(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ar(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,xe&2){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,cr(e,r)}return l=s.interleaved,l===null?(t.next=t,Co(s)):(t.next=l.next,l.next=t),s.interleaved=t,cr(e,r)}function Nl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,mo(e,r)}}function Ac(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var l=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?l=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?l=a=t:a=a.next=t}else l=a=t;r={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Kl(e,t,r,s){var l=e.updateQueue;wr=!1;var a=l.firstBaseUpdate,i=l.lastBaseUpdate,o=l.shared.pending;if(o!==null){l.shared.pending=null;var c=o,m=c.next;c.next=null,i===null?a=m:i.next=m,i=c;var y=e.alternate;y!==null&&(y=y.updateQueue,o=y.lastBaseUpdate,o!==i&&(o===null?y.firstBaseUpdate=m:o.next=m,y.lastBaseUpdate=c))}if(a!==null){var w=l.baseState;i=0,y=m=c=null,o=a;do{var x=o.lane,E=o.eventTime;if((s&x)===x){y!==null&&(y=y.next={eventTime:E,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,k=o;switch(x=t,E=r,k.tag){case 1:if(g=k.payload,typeof g=="function"){w=g.call(E,w,x);break e}w=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=k.payload,x=typeof g=="function"?g.call(E,w,x):g,x==null)break e;w=Le({},w,x);break e;case 2:wr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,x=l.effects,x===null?l.effects=[o]:x.push(o))}else E={eventTime:E,lane:x,tag:o.tag,payload:o.payload,callback:o.callback,next:null},y===null?(m=y=E,c=w):y=y.next=E,i|=x;if(o=o.next,o===null){if(o=l.shared.pending,o===null)break;x=o,o=x.next,x.next=null,l.lastBaseUpdate=x,l.shared.pending=null}}while(!0);if(y===null&&(c=w),l.baseState=c,l.firstBaseUpdate=m,l.lastBaseUpdate=y,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);tn|=i,e.lanes=i,e.memoizedState=w}}function Lc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],l=s.callback;if(l!==null){if(s.callback=null,s=r,typeof l!="function")throw Error(U(191,l));l.call(s)}}}var Bs={},Yt=Dr(Bs),Ls=Dr(Bs),Rs=Dr(Bs);function qr(e){if(e===Bs)throw Error(U(174));return e}function To(e,t){switch(_e(Rs,t),_e(Ls,e),_e(Yt,Bs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gi(t,e)}Te(Yt),_e(Yt,t)}function Dn(){Te(Yt),Te(Ls),Te(Rs)}function zd(e){qr(Rs.current);var t=qr(Yt.current),r=gi(t,e.type);t!==r&&(_e(Ls,e),_e(Yt,r))}function Po(e){Ls.current===e&&(Te(Yt),Te(Ls))}var ze=Dr(0);function Yl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wa=[];function $o(){for(var e=0;e<Wa.length;e++)Wa[e]._workInProgressVersionPrimary=null;Wa.length=0}var Sl=dr.ReactCurrentDispatcher,Ba=dr.ReactCurrentBatchConfig,en=0,Ae=null,Ve=null,Qe=null,ql=!1,ys=!1,Ds=0,_0=0;function Je(){throw Error(U(321))}function zo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ot(e[r],t[r]))return!1;return!0}function Ao(e,t,r,s,l,a){if(en=a,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sl.current=e===null||e.memoizedState===null?E0:T0,e=r(s,l),ys){a=0;do{if(ys=!1,Ds=0,25<=a)throw Error(U(301));a+=1,Qe=Ve=null,t.updateQueue=null,Sl.current=P0,e=r(s,l)}while(ys)}if(Sl.current=Xl,t=Ve!==null&&Ve.next!==null,en=0,Qe=Ve=Ae=null,ql=!1,t)throw Error(U(300));return e}function Lo(){var e=Ds!==0;return Ds=0,e}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Ae.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function $t(){if(Ve===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=Qe===null?Ae.memoizedState:Qe.next;if(t!==null)Qe=t,Ve=e;else{if(e===null)throw Error(U(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Qe===null?Ae.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Fs(e,t){return typeof t=="function"?t(e):t}function Qa(e){var t=$t(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var s=Ve,l=s.baseQueue,a=r.pending;if(a!==null){if(l!==null){var i=l.next;l.next=a.next,a.next=i}s.baseQueue=l=a,r.pending=null}if(l!==null){a=l.next,s=s.baseState;var o=i=null,c=null,m=a;do{var y=m.lane;if((en&y)===y)c!==null&&(c=c.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),s=m.hasEagerState?m.eagerState:e(s,m.action);else{var w={lane:y,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};c===null?(o=c=w,i=s):c=c.next=w,Ae.lanes|=y,tn|=y}m=m.next}while(m!==null&&m!==a);c===null?i=s:c.next=o,Ot(s,t.memoizedState)||(mt=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){l=e;do a=l.lane,Ae.lanes|=a,tn|=a,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ha(e){var t=$t(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var s=r.dispatch,l=r.pending,a=t.memoizedState;if(l!==null){r.pending=null;var i=l=l.next;do a=e(a,i.action),i=i.next;while(i!==l);Ot(a,t.memoizedState)||(mt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function Ad(){}function Ld(e,t){var r=Ae,s=$t(),l=t(),a=!Ot(s.memoizedState,l);if(a&&(s.memoizedState=l,mt=!0),s=s.queue,Ro(Fd.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||Qe!==null&&Qe.memoizedState.tag&1){if(r.flags|=2048,Ms(9,Dd.bind(null,r,s,l,t),void 0,null),He===null)throw Error(U(349));en&30||Rd(r,t,l)}return l}function Rd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Dd(e,t,r,s){t.value=r,t.getSnapshot=s,Md(t)&&Od(e)}function Fd(e,t,r){return r(function(){Md(t)&&Od(e)})}function Md(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ot(e,r)}catch{return!0}}function Od(e){var t=cr(e,1);t!==null&&Mt(t,e,1,-1)}function Rc(e){var t=Qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:e},t.queue=e,e=e.dispatch=C0.bind(null,Ae,e),[t.memoizedState,e]}function Ms(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Id(){return $t().memoizedState}function Cl(e,t,r,s){var l=Qt();Ae.flags|=e,l.memoizedState=Ms(1|t,r,void 0,s===void 0?null:s)}function ca(e,t,r,s){var l=$t();s=s===void 0?null:s;var a=void 0;if(Ve!==null){var i=Ve.memoizedState;if(a=i.destroy,s!==null&&zo(s,i.deps)){l.memoizedState=Ms(t,r,a,s);return}}Ae.flags|=e,l.memoizedState=Ms(1|t,r,a,s)}function Dc(e,t){return Cl(8390656,8,e,t)}function Ro(e,t){return ca(2048,8,e,t)}function Ud(e,t){return ca(4,2,e,t)}function Vd(e,t){return ca(4,4,e,t)}function Wd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bd(e,t,r){return r=r!=null?r.concat([e]):null,ca(4,4,Wd.bind(null,t,e),r)}function Do(){}function Qd(e,t){var r=$t();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&zo(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Hd(e,t){var r=$t();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&zo(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Kd(e,t,r){return en&21?(Ot(r,t)||(r=Ju(),Ae.lanes|=r,tn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mt=!0),e.memoizedState=r)}function N0(e,t){var r=ve;ve=r!==0&&4>r?r:4,e(!0);var s=Ba.transition;Ba.transition={};try{e(!1),t()}finally{ve=r,Ba.transition=s}}function Yd(){return $t().memoizedState}function S0(e,t,r){var s=$r(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},qd(e))Xd(t,r);else if(r=Pd(e,t,r,s),r!==null){var l=it();Mt(r,e,s,l),Gd(r,t,s)}}function C0(e,t,r){var s=$r(e),l={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(qd(e))Xd(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,o=a(i,r);if(l.hasEagerState=!0,l.eagerState=o,Ot(o,i)){var c=t.interleaved;c===null?(l.next=l,Co(t)):(l.next=c.next,c.next=l),t.interleaved=l;return}}catch{}finally{}r=Pd(e,t,l,s),r!==null&&(l=it(),Mt(r,e,s,l),Gd(r,t,s))}}function qd(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function Xd(e,t){ys=ql=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Gd(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,mo(e,r)}}var Xl={readContext:Pt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},E0={readContext:Pt,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:Dc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Cl(4194308,4,Wd.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Cl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cl(4,2,e,t)},useMemo:function(e,t){var r=Qt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Qt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=S0.bind(null,Ae,e),[s.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:Rc,useDebugValue:Do,useDeferredValue:function(e){return Qt().memoizedState=e},useTransition:function(){var e=Rc(!1),t=e[0];return e=N0.bind(null,e[1]),Qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ae,l=Qt();if($e){if(r===void 0)throw Error(U(407));r=r()}else{if(r=t(),He===null)throw Error(U(349));en&30||Rd(s,t,r)}l.memoizedState=r;var a={value:r,getSnapshot:t};return l.queue=a,Dc(Fd.bind(null,s,a,e),[e]),s.flags|=2048,Ms(9,Dd.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=Qt(),t=He.identifierPrefix;if($e){var r=lr,s=sr;r=(s&~(1<<32-Ft(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ds++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=_0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},T0={readContext:Pt,useCallback:Qd,useContext:Pt,useEffect:Ro,useImperativeHandle:Bd,useInsertionEffect:Ud,useLayoutEffect:Vd,useMemo:Hd,useReducer:Qa,useRef:Id,useState:function(){return Qa(Fs)},useDebugValue:Do,useDeferredValue:function(e){var t=$t();return Kd(t,Ve.memoizedState,e)},useTransition:function(){var e=Qa(Fs)[0],t=$t().memoizedState;return[e,t]},useMutableSource:Ad,useSyncExternalStore:Ld,useId:Yd,unstable_isNewReconciler:!1},P0={readContext:Pt,useCallback:Qd,useContext:Pt,useEffect:Ro,useImperativeHandle:Bd,useInsertionEffect:Ud,useLayoutEffect:Vd,useMemo:Hd,useReducer:Ha,useRef:Id,useState:function(){return Ha(Fs)},useDebugValue:Do,useDeferredValue:function(e){var t=$t();return Ve===null?t.memoizedState=e:Kd(t,Ve.memoizedState,e)},useTransition:function(){var e=Ha(Fs)[0],t=$t().memoizedState;return[e,t]},useMutableSource:Ad,useSyncExternalStore:Ld,useId:Yd,unstable_isNewReconciler:!1};function Lt(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Fi(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Le({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ua={isMounted:function(e){return(e=e._reactInternals)?sn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=it(),l=$r(e),a=ar(s,l);a.payload=t,r!=null&&(a.callback=r),t=Tr(e,a,l),t!==null&&(Mt(t,e,l,s),Nl(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=it(),l=$r(e),a=ar(s,l);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Tr(e,a,l),t!==null&&(Mt(t,e,l,s),Nl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=it(),s=$r(e),l=ar(r,s);l.tag=2,t!=null&&(l.callback=t),t=Tr(e,l,s),t!==null&&(Mt(t,e,s,r),Nl(t,e,s))}};function Fc(e,t,r,s,l,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,i):t.prototype&&t.prototype.isPureReactComponent?!Ps(r,s)||!Ps(l,a):!0}function Jd(e,t,r){var s=!1,l=Lr,a=t.contextType;return typeof a=="object"&&a!==null?a=Pt(a):(l=xt(t)?Jr:tt.current,s=t.contextTypes,a=(s=s!=null)?An(e,l):Lr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ua,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function Mc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&ua.enqueueReplaceState(t,t.state,null)}function Mi(e,t,r,s){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},Eo(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=Pt(a):(a=xt(t)?Jr:tt.current,l.context=An(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Fi(e,t,a,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ua.enqueueReplaceState(l,l.state,null),Kl(e,r,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Fn(e,t){try{var r="",s=t;do r+=sm(s),s=s.return;while(s);var l=r}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function Ka(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Oi(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $0=typeof WeakMap=="function"?WeakMap:Map;function Zd(e,t,r){r=ar(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Jl||(Jl=!0,qi=s),Oi(e,t)},r}function ep(e,t,r){r=ar(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=t.value;r.payload=function(){return s(l)},r.callback=function(){Oi(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Oi(e,t),typeof s!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Oc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new $0;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(r)||(l.add(r),e=Q0.bind(null,e,t,r),t.then(e,e))}function Ic(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Uc(e,t,r,s,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ar(-1,1),t.tag=2,Tr(r,t,1))),r.lanes|=1),e)}var z0=dr.ReactCurrentOwner,mt=!1;function st(e,t,r,s){t.child=e===null?Td(t,null,r,s):Rn(t,e.child,r,s)}function Vc(e,t,r,s,l){r=r.render;var a=t.ref;return Pn(t,l),s=Ao(e,t,r,s,a,l),r=Lo(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,ur(e,t,l)):($e&&r&&bo(t),t.flags|=1,st(e,t,s,l),t.child)}function Wc(e,t,r,s,l){if(e===null){var a=r.type;return typeof a=="function"&&!Bo(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,tp(e,t,a,s,l)):(e=$l(r.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:Ps,r(i,s)&&e.ref===t.ref)return ur(e,t,l)}return t.flags|=1,e=zr(a,s),e.ref=t.ref,e.return=t,t.child=e}function tp(e,t,r,s,l){if(e!==null){var a=e.memoizedProps;if(Ps(a,s)&&e.ref===t.ref)if(mt=!1,t.pendingProps=s=a,(e.lanes&l)!==0)e.flags&131072&&(mt=!0);else return t.lanes=e.lanes,ur(e,t,l)}return Ii(e,t,r,s,l)}function rp(e,t,r){var s=t.pendingProps,l=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Nn,vt),vt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(Nn,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,_e(Nn,vt),vt|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,_e(Nn,vt),vt|=s;return st(e,t,l,r),t.child}function np(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ii(e,t,r,s,l){var a=xt(r)?Jr:tt.current;return a=An(t,a),Pn(t,l),r=Ao(e,t,r,s,a,l),s=Lo(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,ur(e,t,l)):($e&&s&&bo(t),t.flags|=1,st(e,t,r,l),t.child)}function Bc(e,t,r,s,l){if(xt(r)){var a=!0;Vl(t)}else a=!1;if(Pn(t,l),t.stateNode===null)El(e,t),Jd(t,r,s),Mi(t,r,s,l),s=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,m=r.contextType;typeof m=="object"&&m!==null?m=Pt(m):(m=xt(r)?Jr:tt.current,m=An(t,m));var y=r.getDerivedStateFromProps,w=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function";w||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==s||c!==m)&&Mc(t,i,s,m),wr=!1;var x=t.memoizedState;i.state=x,Kl(t,s,i,l),c=t.memoizedState,o!==s||x!==c||ft.current||wr?(typeof y=="function"&&(Fi(t,r,y,s),c=t.memoizedState),(o=wr||Fc(t,r,o,s,x,c,m))?(w||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),i.props=s,i.state=c,i.context=m,s=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,$d(e,t),o=t.memoizedProps,m=t.type===t.elementType?o:Lt(t.type,o),i.props=m,w=t.pendingProps,x=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Pt(c):(c=xt(r)?Jr:tt.current,c=An(t,c));var E=r.getDerivedStateFromProps;(y=typeof E=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==w||x!==c)&&Mc(t,i,s,c),wr=!1,x=t.memoizedState,i.state=x,Kl(t,s,i,l);var g=t.memoizedState;o!==w||x!==g||ft.current||wr?(typeof E=="function"&&(Fi(t,r,E,s),g=t.memoizedState),(m=wr||Fc(t,r,m,s,x,g,c)||!1)?(y||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,g,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),i.props=s,i.state=g,i.context=c,s=m):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),s=!1)}return Ui(e,t,r,s,a,l)}function Ui(e,t,r,s,l,a){np(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return l&&Tc(t,r,!1),ur(e,t,a);s=t.stateNode,z0.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=Rn(t,e.child,null,a),t.child=Rn(t,null,o,a)):st(e,t,o,a),t.memoizedState=s.state,l&&Tc(t,r,!0),t.child}function sp(e){var t=e.stateNode;t.pendingContext?Ec(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ec(e,t.context,!1),To(e,t.containerInfo)}function Qc(e,t,r,s,l){return Ln(),ko(l),t.flags|=256,st(e,t,r,s),t.child}var Vi={dehydrated:null,treeContext:null,retryLane:0};function Wi(e){return{baseLanes:e,cachePool:null,transitions:null}}function lp(e,t,r){var s=t.pendingProps,l=ze.current,a=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(l&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),_e(ze,l&1),e===null)return Ri(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,a?(s=t.mode,a=t.child,i={mode:"hidden",children:i},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=ma(i,s,0,null),e=Gr(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Wi(r),t.memoizedState=Vi,e):Fo(t,i));if(l=e.memoizedState,l!==null&&(o=l.dehydrated,o!==null))return A0(e,t,i,s,o,l,r);if(a){a=s.fallback,i=t.mode,l=e.child,o=l.sibling;var c={mode:"hidden",children:s.children};return!(i&1)&&t.child!==l?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=zr(l,c),s.subtreeFlags=l.subtreeFlags&14680064),o!==null?a=zr(o,a):(a=Gr(a,i,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,i=e.child.memoizedState,i=i===null?Wi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=Vi,s}return a=e.child,e=a.sibling,s=zr(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Fo(e,t){return t=ma({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gl(e,t,r,s){return s!==null&&ko(s),Rn(t,e.child,null,r),e=Fo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function A0(e,t,r,s,l,a,i){if(r)return t.flags&256?(t.flags&=-257,s=Ka(Error(U(422))),gl(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,l=t.mode,s=ma({mode:"visible",children:s.children},l,0,null),a=Gr(a,l,i,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&Rn(t,e.child,null,i),t.child.memoizedState=Wi(i),t.memoizedState=Vi,a);if(!(t.mode&1))return gl(e,t,i,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(U(419)),s=Ka(a,s,void 0),gl(e,t,i,s)}if(o=(i&e.childLanes)!==0,mt||o){if(s=He,s!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(s.suspendedLanes|i)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,cr(e,l),Mt(s,e,l,-1))}return Wo(),s=Ka(Error(U(421))),gl(e,t,i,s)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=H0.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,wt=Er(l.nextSibling),bt=t,$e=!0,Dt=null,e!==null&&(St[Ct++]=sr,St[Ct++]=lr,St[Ct++]=Zr,sr=e.id,lr=e.overflow,Zr=t),t=Fo(t,s.children),t.flags|=4096,t)}function Hc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Di(e.return,t,r)}function Ya(e,t,r,s,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=l)}function ap(e,t,r){var s=t.pendingProps,l=s.revealOrder,a=s.tail;if(st(e,t,s.children,r),s=ze.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hc(e,r,t);else if(e.tag===19)Hc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(_e(ze,s),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&Yl(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),Ya(t,!1,l,r,a);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Yl(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}Ya(t,!0,r,null,a);break;case"together":Ya(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function El(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ur(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),tn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,r=zr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=zr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function L0(e,t,r){switch(t.tag){case 3:sp(t),Ln();break;case 5:zd(t);break;case 1:xt(t.type)&&Vl(t);break;case 4:To(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,l=t.memoizedProps.value;_e(Ql,s._currentValue),s._currentValue=l;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(_e(ze,ze.current&1),t.flags|=128,null):r&t.child.childLanes?lp(e,t,r):(_e(ze,ze.current&1),e=ur(e,t,r),e!==null?e.sibling:null);_e(ze,ze.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return ap(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),_e(ze,ze.current),s)break;return null;case 22:case 23:return t.lanes=0,rp(e,t,r)}return ur(e,t,r)}var ip,Bi,op,cp;ip=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bi=function(){};op=function(e,t,r,s){var l=e.memoizedProps;if(l!==s){e=t.stateNode,qr(Yt.current);var a=null;switch(r){case"input":l=pi(e,l),s=pi(e,s),a=[];break;case"select":l=Le({},l,{value:void 0}),s=Le({},s,{value:void 0}),a=[];break;case"textarea":l=xi(e,l),s=xi(e,s),a=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Il)}hi(r,s);var i;r=null;for(m in l)if(!s.hasOwnProperty(m)&&l.hasOwnProperty(m)&&l[m]!=null)if(m==="style"){var o=l[m];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ks.hasOwnProperty(m)?a||(a=[]):(a=a||[]).push(m,null));for(m in s){var c=s[m];if(o=l!=null?l[m]:void 0,s.hasOwnProperty(m)&&c!==o&&(c!=null||o!=null))if(m==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(m,r)),r=c;else m==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(m,c)):m==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(m,""+c):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(ks.hasOwnProperty(m)?(c!=null&&m==="onScroll"&&Ee("scroll",e),a||o===c||(a=[])):(a=a||[]).push(m,c))}r&&(a=a||[]).push("style",r);var m=a;(t.updateQueue=m)&&(t.flags|=4)}};cp=function(e,t,r,s){r!==s&&(t.flags|=4)};function ls(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function R0(e,t,r){var s=t.pendingProps;switch(jo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return xt(t.type)&&Ul(),Ze(t),null;case 3:return s=t.stateNode,Dn(),Te(ft),Te(tt),$o(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(fl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dt!==null&&(Ji(Dt),Dt=null))),Bi(e,t),Ze(t),null;case 5:Po(t);var l=qr(Rs.current);if(r=t.type,e!==null&&t.stateNode!=null)op(e,t,r,s,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(U(166));return Ze(t),null}if(e=qr(Yt.current),fl(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[Ht]=t,s[As]=a,e=(t.mode&1)!==0,r){case"dialog":Ee("cancel",s),Ee("close",s);break;case"iframe":case"object":case"embed":Ee("load",s);break;case"video":case"audio":for(l=0;l<ds.length;l++)Ee(ds[l],s);break;case"source":Ee("error",s);break;case"img":case"image":case"link":Ee("error",s),Ee("load",s);break;case"details":Ee("toggle",s);break;case"input":tc(s,a),Ee("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Ee("invalid",s);break;case"textarea":nc(s,a),Ee("invalid",s)}hi(r,a),l=null;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];i==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&ml(s.textContent,o,e),l=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&ml(s.textContent,o,e),l=["children",""+o]):ks.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Ee("scroll",s)}switch(r){case"input":ll(s),rc(s,a,!0);break;case"textarea":ll(s),sc(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Il)}s=l,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(r,{is:s.is}):(e=i.createElement(r),r==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,r),e[Ht]=t,e[As]=s,ip(e,t,!1,!1),t.stateNode=e;e:{switch(i=yi(r,s),r){case"dialog":Ee("cancel",e),Ee("close",e),l=s;break;case"iframe":case"object":case"embed":Ee("load",e),l=s;break;case"video":case"audio":for(l=0;l<ds.length;l++)Ee(ds[l],e);l=s;break;case"source":Ee("error",e),l=s;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),l=s;break;case"details":Ee("toggle",e),l=s;break;case"input":tc(e,s),l=pi(e,s),Ee("invalid",e);break;case"option":l=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},l=Le({},s,{value:void 0}),Ee("invalid",e);break;case"textarea":nc(e,s),l=xi(e,s),Ee("invalid",e);break;default:l=s}hi(r,l),o=l;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Iu(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mu(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&_s(e,c):typeof c=="number"&&_s(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ks.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ee("scroll",e):c!=null&&ao(e,a,c,i))}switch(r){case"input":ll(e),rc(e,s,!1);break;case"textarea":ll(e),sc(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ar(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?Sn(e,!!s.multiple,a,!1):s.defaultValue!=null&&Sn(e,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Il)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)cp(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(U(166));if(r=qr(Rs.current),qr(Yt.current),fl(t)){if(s=t.stateNode,r=t.memoizedProps,s[Ht]=t,(a=s.nodeValue!==r)&&(e=bt,e!==null))switch(e.tag){case 3:ml(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ml(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Ht]=t,t.stateNode=s}return Ze(t),null;case 13:if(Te(ze),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&wt!==null&&t.mode&1&&!(t.flags&128))Cd(),Ln(),t.flags|=98560,a=!1;else if(a=fl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(U(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(U(317));a[Ht]=t}else Ln(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),a=!1}else Dt!==null&&(Ji(Dt),Dt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?We===0&&(We=3):Wo())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return Dn(),Bi(e,t),e===null&&$s(t.stateNode.containerInfo),Ze(t),null;case 10:return So(t.type._context),Ze(t),null;case 17:return xt(t.type)&&Ul(),Ze(t),null;case 19:if(Te(ze),a=t.memoizedState,a===null)return Ze(t),null;if(s=(t.flags&128)!==0,i=a.rendering,i===null)if(s)ls(a,!1);else{if(We!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Yl(e),i!==null){for(t.flags|=128,ls(a,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _e(ze,ze.current&1|2),t.child}e=e.sibling}a.tail!==null&&Me()>Mn&&(t.flags|=128,s=!0,ls(a,!1),t.lanes=4194304)}else{if(!s)if(e=Yl(i),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ls(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!$e)return Ze(t),null}else 2*Me()-a.renderingStartTime>Mn&&r!==1073741824&&(t.flags|=128,s=!0,ls(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Me(),t.sibling=null,r=ze.current,_e(ze,s?r&1|2:r&1),t):(Ze(t),null);case 22:case 23:return Vo(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?vt&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function D0(e,t){switch(jo(t),t.tag){case 1:return xt(t.type)&&Ul(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dn(),Te(ft),Te(tt),$o(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Po(t),null;case 13:if(Te(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(ze),null;case 4:return Dn(),null;case 10:return So(t.type._context),null;case 22:case 23:return Vo(),null;case 24:return null;default:return null}}var hl=!1,et=!1,F0=typeof WeakSet=="function"?WeakSet:Set,X=null;function _n(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){De(e,t,s)}else r.current=null}function Qi(e,t,r){try{r()}catch(s){De(e,t,s)}}var Kc=!1;function M0(e,t){if(Ei=Fl,e=fd(),wo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var l=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,m=0,y=0,w=e,x=null;t:for(;;){for(var E;w!==r||l!==0&&w.nodeType!==3||(o=i+l),w!==a||s!==0&&w.nodeType!==3||(c=i+s),w.nodeType===3&&(i+=w.nodeValue.length),(E=w.firstChild)!==null;)x=w,w=E;for(;;){if(w===e)break t;if(x===r&&++m===l&&(o=i),x===a&&++y===s&&(c=i),(E=w.nextSibling)!==null)break;w=x,x=w.parentNode}w=E}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ti={focusedElem:e,selectionRange:r},Fl=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var k=g.memoizedProps,R=g.memoizedState,d=t.stateNode,u=d.getSnapshotBeforeUpdate(t.elementType===t.type?k:Lt(t.type,k),R);d.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(C){De(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return g=Kc,Kc=!1,g}function vs(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&Qi(t,r,a)}l=l.next}while(l!==s)}}function da(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Hi(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function up(e){var t=e.alternate;t!==null&&(e.alternate=null,up(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ht],delete t[As],delete t[zi],delete t[w0],delete t[b0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dp(e){return e.tag===5||e.tag===3||e.tag===4}function Yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ki(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Il));else if(s!==4&&(e=e.child,e!==null))for(Ki(e,t,r),e=e.sibling;e!==null;)Ki(e,t,r),e=e.sibling}function Yi(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Yi(e,t,r),e=e.sibling;e!==null;)Yi(e,t,r),e=e.sibling}var Ke=null,Rt=!1;function hr(e,t,r){for(r=r.child;r!==null;)pp(e,t,r),r=r.sibling}function pp(e,t,r){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(na,r)}catch{}switch(r.tag){case 5:et||_n(r,t);case 6:var s=Ke,l=Rt;Ke=null,hr(e,t,r),Ke=s,Rt=l,Ke!==null&&(Rt?(e=Ke,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ke.removeChild(r.stateNode));break;case 18:Ke!==null&&(Rt?(e=Ke,r=r.stateNode,e.nodeType===8?Ua(e.parentNode,r):e.nodeType===1&&Ua(e,r),Es(e)):Ua(Ke,r.stateNode));break;case 4:s=Ke,l=Rt,Ke=r.stateNode.containerInfo,Rt=!0,hr(e,t,r),Ke=s,Rt=l;break;case 0:case 11:case 14:case 15:if(!et&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var a=l,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&Qi(r,t,i),l=l.next}while(l!==s)}hr(e,t,r);break;case 1:if(!et&&(_n(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){De(r,t,o)}hr(e,t,r);break;case 21:hr(e,t,r);break;case 22:r.mode&1?(et=(s=et)||r.memoizedState!==null,hr(e,t,r),et=s):hr(e,t,r);break;default:hr(e,t,r)}}function qc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new F0),t.forEach(function(s){var l=K0.bind(null,e,s);r.has(s)||(r.add(s),s.then(l,l))})}}function At(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];try{var a=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:Ke=o.stateNode,Rt=!1;break e;case 3:Ke=o.stateNode.containerInfo,Rt=!0;break e;case 4:Ke=o.stateNode.containerInfo,Rt=!0;break e}o=o.return}if(Ke===null)throw Error(U(160));pp(a,i,l),Ke=null,Rt=!1;var c=l.alternate;c!==null&&(c.return=null),l.return=null}catch(m){De(l,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mp(t,e),t=t.sibling}function mp(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Bt(e),s&4){try{vs(3,e,e.return),da(3,e)}catch(k){De(e,e.return,k)}try{vs(5,e,e.return)}catch(k){De(e,e.return,k)}}break;case 1:At(t,e),Bt(e),s&512&&r!==null&&_n(r,r.return);break;case 5:if(At(t,e),Bt(e),s&512&&r!==null&&_n(r,r.return),e.flags&32){var l=e.stateNode;try{_s(l,"")}catch(k){De(e,e.return,k)}}if(s&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Ru(l,a),yi(o,i);var m=yi(o,a);for(i=0;i<c.length;i+=2){var y=c[i],w=c[i+1];y==="style"?Iu(l,w):y==="dangerouslySetInnerHTML"?Mu(l,w):y==="children"?_s(l,w):ao(l,y,w,m)}switch(o){case"input":mi(l,a);break;case"textarea":Du(l,a);break;case"select":var x=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var E=a.value;E!=null?Sn(l,!!a.multiple,E,!1):x!==!!a.multiple&&(a.defaultValue!=null?Sn(l,!!a.multiple,a.defaultValue,!0):Sn(l,!!a.multiple,a.multiple?[]:"",!1))}l[As]=a}catch(k){De(e,e.return,k)}}break;case 6:if(At(t,e),Bt(e),s&4){if(e.stateNode===null)throw Error(U(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(k){De(e,e.return,k)}}break;case 3:if(At(t,e),Bt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Es(t.containerInfo)}catch(k){De(e,e.return,k)}break;case 4:At(t,e),Bt(e);break;case 13:At(t,e),Bt(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(Io=Me())),s&4&&qc(e);break;case 22:if(y=r!==null&&r.memoizedState!==null,e.mode&1?(et=(m=et)||y,At(t,e),et=m):At(t,e),Bt(e),s&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!y&&e.mode&1)for(X=e,y=e.child;y!==null;){for(w=X=y;X!==null;){switch(x=X,E=x.child,x.tag){case 0:case 11:case 14:case 15:vs(4,x,x.return);break;case 1:_n(x,x.return);var g=x.stateNode;if(typeof g.componentWillUnmount=="function"){s=x,r=x.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(k){De(s,r,k)}}break;case 5:_n(x,x.return);break;case 22:if(x.memoizedState!==null){Gc(w);continue}}E!==null?(E.return=x,X=E):Gc(w)}y=y.sibling}e:for(y=null,w=e;;){if(w.tag===5){if(y===null){y=w;try{l=w.stateNode,m?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=w.stateNode,c=w.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Ou("display",i))}catch(k){De(e,e.return,k)}}}else if(w.tag===6){if(y===null)try{w.stateNode.nodeValue=m?"":w.memoizedProps}catch(k){De(e,e.return,k)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;y===w&&(y=null),w=w.return}y===w&&(y=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:At(t,e),Bt(e),s&4&&qc(e);break;case 21:break;default:At(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(dp(r)){var s=r;break e}r=r.return}throw Error(U(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(_s(l,""),s.flags&=-33);var a=Yc(e);Yi(e,a,l);break;case 3:case 4:var i=s.stateNode.containerInfo,o=Yc(e);Ki(e,o,i);break;default:throw Error(U(161))}}catch(c){De(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function O0(e,t,r){X=e,fp(e)}function fp(e,t,r){for(var s=(e.mode&1)!==0;X!==null;){var l=X,a=l.child;if(l.tag===22&&s){var i=l.memoizedState!==null||hl;if(!i){var o=l.alternate,c=o!==null&&o.memoizedState!==null||et;o=hl;var m=et;if(hl=i,(et=c)&&!m)for(X=l;X!==null;)i=X,c=i.child,i.tag===22&&i.memoizedState!==null?Jc(l):c!==null?(c.return=i,X=c):Jc(l);for(;a!==null;)X=a,fp(a),a=a.sibling;X=l,hl=o,et=m}Xc(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,X=a):Xc(e)}}function Xc(e){for(;X!==null;){var t=X;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:et||da(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!et)if(r===null)s.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:Lt(t.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Lc(t,a,s);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Lc(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var y=m.memoizedState;if(y!==null){var w=y.dehydrated;w!==null&&Es(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}et||t.flags&512&&Hi(t)}catch(x){De(t,t.return,x)}}if(t===e){X=null;break}if(r=t.sibling,r!==null){r.return=t.return,X=r;break}X=t.return}}function Gc(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var r=t.sibling;if(r!==null){r.return=t.return,X=r;break}X=t.return}}function Jc(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{da(4,t)}catch(c){De(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var l=t.return;try{s.componentDidMount()}catch(c){De(t,l,c)}}var a=t.return;try{Hi(t)}catch(c){De(t,a,c)}break;case 5:var i=t.return;try{Hi(t)}catch(c){De(t,i,c)}}}catch(c){De(t,t.return,c)}if(t===e){X=null;break}var o=t.sibling;if(o!==null){o.return=t.return,X=o;break}X=t.return}}var I0=Math.ceil,Gl=dr.ReactCurrentDispatcher,Mo=dr.ReactCurrentOwner,Tt=dr.ReactCurrentBatchConfig,xe=0,He=null,Ie=null,Ye=0,vt=0,Nn=Dr(0),We=0,Os=null,tn=0,pa=0,Oo=0,ws=null,pt=null,Io=0,Mn=1/0,rr=null,Jl=!1,qi=null,Pr=null,yl=!1,_r=null,Zl=0,bs=0,Xi=null,Tl=-1,Pl=0;function it(){return xe&6?Me():Tl!==-1?Tl:Tl=Me()}function $r(e){return e.mode&1?xe&2&&Ye!==0?Ye&-Ye:k0.transition!==null?(Pl===0&&(Pl=Ju()),Pl):(e=ve,e!==0||(e=window.event,e=e===void 0?16:ld(e.type)),e):1}function Mt(e,t,r,s){if(50<bs)throw bs=0,Xi=null,Error(U(185));Us(e,r,s),(!(xe&2)||e!==He)&&(e===He&&(!(xe&2)&&(pa|=r),We===4&&jr(e,Ye)),gt(e,s),r===1&&xe===0&&!(t.mode&1)&&(Mn=Me()+500,oa&&Fr()))}function gt(e,t){var r=e.callbackNode;km(e,t);var s=Dl(e,e===He?Ye:0);if(s===0)r!==null&&ic(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&ic(r),t===1)e.tag===0?j0(Zc.bind(null,e)):_d(Zc.bind(null,e)),y0(function(){!(xe&6)&&Fr()}),r=null;else{switch(Zu(s)){case 1:r=po;break;case 4:r=Xu;break;case 16:r=Rl;break;case 536870912:r=Gu;break;default:r=Rl}r=jp(r,xp.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function xp(e,t){if(Tl=-1,Pl=0,xe&6)throw Error(U(327));var r=e.callbackNode;if($n()&&e.callbackNode!==r)return null;var s=Dl(e,e===He?Ye:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=ea(e,s);else{t=s;var l=xe;xe|=2;var a=hp();(He!==e||Ye!==t)&&(rr=null,Mn=Me()+500,Xr(e,t));do try{W0();break}catch(o){gp(e,o)}while(!0);No(),Gl.current=a,xe=l,Ie!==null?t=0:(He=null,Ye=0,t=We)}if(t!==0){if(t===2&&(l=ki(e),l!==0&&(s=l,t=Gi(e,l))),t===1)throw r=Os,Xr(e,0),jr(e,s),gt(e,Me()),r;if(t===6)jr(e,s);else{if(l=e.current.alternate,!(s&30)&&!U0(l)&&(t=ea(e,s),t===2&&(a=ki(e),a!==0&&(s=a,t=Gi(e,a))),t===1))throw r=Os,Xr(e,0),jr(e,s),gt(e,Me()),r;switch(e.finishedWork=l,e.finishedLanes=s,t){case 0:case 1:throw Error(U(345));case 2:Hr(e,pt,rr);break;case 3:if(jr(e,s),(s&130023424)===s&&(t=Io+500-Me(),10<t)){if(Dl(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){it(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=$i(Hr.bind(null,e,pt,rr),t);break}Hr(e,pt,rr);break;case 4:if(jr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,l=-1;0<s;){var i=31-Ft(s);a=1<<i,i=t[i],i>l&&(l=i),s&=~a}if(s=l,s=Me()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*I0(s/1960))-s,10<s){e.timeoutHandle=$i(Hr.bind(null,e,pt,rr),s);break}Hr(e,pt,rr);break;case 5:Hr(e,pt,rr);break;default:throw Error(U(329))}}}return gt(e,Me()),e.callbackNode===r?xp.bind(null,e):null}function Gi(e,t){var r=ws;return e.current.memoizedState.isDehydrated&&(Xr(e,t).flags|=256),e=ea(e,t),e!==2&&(t=pt,pt=r,t!==null&&Ji(t)),e}function Ji(e){pt===null?pt=e:pt.push.apply(pt,e)}function U0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var l=r[s],a=l.getSnapshot;l=l.value;try{if(!Ot(a(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jr(e,t){for(t&=~Oo,t&=~pa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ft(t),s=1<<r;e[r]=-1,t&=~s}}function Zc(e){if(xe&6)throw Error(U(327));$n();var t=Dl(e,0);if(!(t&1))return gt(e,Me()),null;var r=ea(e,t);if(e.tag!==0&&r===2){var s=ki(e);s!==0&&(t=s,r=Gi(e,s))}if(r===1)throw r=Os,Xr(e,0),jr(e,t),gt(e,Me()),r;if(r===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hr(e,pt,rr),gt(e,Me()),null}function Uo(e,t){var r=xe;xe|=1;try{return e(t)}finally{xe=r,xe===0&&(Mn=Me()+500,oa&&Fr())}}function rn(e){_r!==null&&_r.tag===0&&!(xe&6)&&$n();var t=xe;xe|=1;var r=Tt.transition,s=ve;try{if(Tt.transition=null,ve=1,e)return e()}finally{ve=s,Tt.transition=r,xe=t,!(xe&6)&&Fr()}}function Vo(){vt=Nn.current,Te(Nn)}function Xr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,h0(r)),Ie!==null)for(r=Ie.return;r!==null;){var s=r;switch(jo(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ul();break;case 3:Dn(),Te(ft),Te(tt),$o();break;case 5:Po(s);break;case 4:Dn();break;case 13:Te(ze);break;case 19:Te(ze);break;case 10:So(s.type._context);break;case 22:case 23:Vo()}r=r.return}if(He=e,Ie=e=zr(e.current,null),Ye=vt=t,We=0,Os=null,Oo=pa=tn=0,pt=ws=null,Yr!==null){for(t=0;t<Yr.length;t++)if(r=Yr[t],s=r.interleaved,s!==null){r.interleaved=null;var l=s.next,a=r.pending;if(a!==null){var i=a.next;a.next=l,s.next=i}r.pending=s}Yr=null}return e}function gp(e,t){do{var r=Ie;try{if(No(),Sl.current=Xl,ql){for(var s=Ae.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}ql=!1}if(en=0,Qe=Ve=Ae=null,ys=!1,Ds=0,Mo.current=null,r===null||r.return===null){We=1,Os=t,Ie=null;break}e:{var a=e,i=r.return,o=r,c=t;if(t=Ye,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=c,y=o,w=y.tag;if(!(y.mode&1)&&(w===0||w===11||w===15)){var x=y.alternate;x?(y.updateQueue=x.updateQueue,y.memoizedState=x.memoizedState,y.lanes=x.lanes):(y.updateQueue=null,y.memoizedState=null)}var E=Ic(i);if(E!==null){E.flags&=-257,Uc(E,i,o,a,t),E.mode&1&&Oc(a,m,t),t=E,c=m;var g=t.updateQueue;if(g===null){var k=new Set;k.add(c),t.updateQueue=k}else g.add(c);break e}else{if(!(t&1)){Oc(a,m,t),Wo();break e}c=Error(U(426))}}else if($e&&o.mode&1){var R=Ic(i);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Uc(R,i,o,a,t),ko(Fn(c,o));break e}}a=c=Fn(c,o),We!==4&&(We=2),ws===null?ws=[a]:ws.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var d=Zd(a,c,t);Ac(a,d);break e;case 1:o=c;var u=a.type,f=a.stateNode;if(!(a.flags&128)&&(typeof u.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Pr===null||!Pr.has(f)))){a.flags|=65536,t&=-t,a.lanes|=t;var C=ep(a,o,t);Ac(a,C);break e}}a=a.return}while(a!==null)}vp(r)}catch(L){t=L,Ie===r&&r!==null&&(Ie=r=r.return);continue}break}while(!0)}function hp(){var e=Gl.current;return Gl.current=Xl,e===null?Xl:e}function Wo(){(We===0||We===3||We===2)&&(We=4),He===null||!(tn&268435455)&&!(pa&268435455)||jr(He,Ye)}function ea(e,t){var r=xe;xe|=2;var s=hp();(He!==e||Ye!==t)&&(rr=null,Xr(e,t));do try{V0();break}catch(l){gp(e,l)}while(!0);if(No(),xe=r,Gl.current=s,Ie!==null)throw Error(U(261));return He=null,Ye=0,We}function V0(){for(;Ie!==null;)yp(Ie)}function W0(){for(;Ie!==null&&!fm();)yp(Ie)}function yp(e){var t=bp(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?vp(e):Ie=t,Mo.current=null}function vp(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=D0(r,t),r!==null){r.flags&=32767,Ie=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Ie=null;return}}else if(r=R0(r,t,vt),r!==null){Ie=r;return}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);We===0&&(We=5)}function Hr(e,t,r){var s=ve,l=Tt.transition;try{Tt.transition=null,ve=1,B0(e,t,r,s)}finally{Tt.transition=l,ve=s}return null}function B0(e,t,r,s){do $n();while(_r!==null);if(xe&6)throw Error(U(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(_m(e,a),e===He&&(Ie=He=null,Ye=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||yl||(yl=!0,jp(Rl,function(){return $n(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Tt.transition,Tt.transition=null;var i=ve;ve=1;var o=xe;xe|=4,Mo.current=null,M0(e,r),mp(r,e),u0(Ti),Fl=!!Ei,Ti=Ei=null,e.current=r,O0(r),xm(),xe=o,ve=i,Tt.transition=a}else e.current=r;if(yl&&(yl=!1,_r=e,Zl=l),a=e.pendingLanes,a===0&&(Pr=null),ym(r.stateNode),gt(e,Me()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],s(l.value,{componentStack:l.stack,digest:l.digest});if(Jl)throw Jl=!1,e=qi,qi=null,e;return Zl&1&&e.tag!==0&&$n(),a=e.pendingLanes,a&1?e===Xi?bs++:(bs=0,Xi=e):bs=0,Fr(),null}function $n(){if(_r!==null){var e=Zu(Zl),t=Tt.transition,r=ve;try{if(Tt.transition=null,ve=16>e?16:e,_r===null)var s=!1;else{if(e=_r,_r=null,Zl=0,xe&6)throw Error(U(331));var l=xe;for(xe|=4,X=e.current;X!==null;){var a=X,i=a.child;if(X.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var m=o[c];for(X=m;X!==null;){var y=X;switch(y.tag){case 0:case 11:case 15:vs(8,y,a)}var w=y.child;if(w!==null)w.return=y,X=w;else for(;X!==null;){y=X;var x=y.sibling,E=y.return;if(up(y),y===m){X=null;break}if(x!==null){x.return=E,X=x;break}X=E}}}var g=a.alternate;if(g!==null){var k=g.child;if(k!==null){g.child=null;do{var R=k.sibling;k.sibling=null,k=R}while(k!==null)}}X=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,X=i;else e:for(;X!==null;){if(a=X,a.flags&2048)switch(a.tag){case 0:case 11:case 15:vs(9,a,a.return)}var d=a.sibling;if(d!==null){d.return=a.return,X=d;break e}X=a.return}}var u=e.current;for(X=u;X!==null;){i=X;var f=i.child;if(i.subtreeFlags&2064&&f!==null)f.return=i,X=f;else e:for(i=u;X!==null;){if(o=X,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:da(9,o)}}catch(L){De(o,o.return,L)}if(o===i){X=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,X=C;break e}X=o.return}}if(xe=l,Fr(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(na,e)}catch{}s=!0}return s}finally{ve=r,Tt.transition=t}}return!1}function eu(e,t,r){t=Fn(r,t),t=Zd(e,t,1),e=Tr(e,t,1),t=it(),e!==null&&(Us(e,1,t),gt(e,t))}function De(e,t,r){if(e.tag===3)eu(e,e,r);else for(;t!==null;){if(t.tag===3){eu(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Pr===null||!Pr.has(s))){e=Fn(r,e),e=ep(t,e,1),t=Tr(t,e,1),e=it(),t!==null&&(Us(t,1,e),gt(t,e));break}}t=t.return}}function Q0(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&r,He===e&&(Ye&r)===r&&(We===4||We===3&&(Ye&130023424)===Ye&&500>Me()-Io?Xr(e,0):Oo|=r),gt(e,t)}function wp(e,t){t===0&&(e.mode&1?(t=ol,ol<<=1,!(ol&130023424)&&(ol=4194304)):t=1);var r=it();e=cr(e,t),e!==null&&(Us(e,t,r),gt(e,r))}function H0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wp(e,r)}function K0(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(U(314))}s!==null&&s.delete(t),wp(e,r)}var bp;bp=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ft.current)mt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return mt=!1,L0(e,t,r);mt=!!(e.flags&131072)}else mt=!1,$e&&t.flags&1048576&&Nd(t,Bl,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;El(e,t),e=t.pendingProps;var l=An(t,tt.current);Pn(t,r),l=Ao(null,t,s,e,l,r);var a=Lo();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(s)?(a=!0,Vl(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Eo(t),l.updater=ua,t.stateNode=l,l._reactInternals=t,Mi(t,s,e,r),t=Ui(null,t,s,!0,a,r)):(t.tag=0,$e&&a&&bo(t),st(null,t,l,r),t=t.child),t;case 16:s=t.elementType;e:{switch(El(e,t),e=t.pendingProps,l=s._init,s=l(s._payload),t.type=s,l=t.tag=q0(s),e=Lt(s,e),l){case 0:t=Ii(null,t,s,e,r);break e;case 1:t=Bc(null,t,s,e,r);break e;case 11:t=Vc(null,t,s,e,r);break e;case 14:t=Wc(null,t,s,Lt(s.type,e),r);break e}throw Error(U(306,s,""))}return t;case 0:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Lt(s,l),Ii(e,t,s,l,r);case 1:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Lt(s,l),Bc(e,t,s,l,r);case 3:e:{if(sp(t),e===null)throw Error(U(387));s=t.pendingProps,a=t.memoizedState,l=a.element,$d(e,t),Kl(t,s,null,r);var i=t.memoizedState;if(s=i.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=Fn(Error(U(423)),t),t=Qc(e,t,s,r,l);break e}else if(s!==l){l=Fn(Error(U(424)),t),t=Qc(e,t,s,r,l);break e}else for(wt=Er(t.stateNode.containerInfo.firstChild),bt=t,$e=!0,Dt=null,r=Td(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ln(),s===l){t=ur(e,t,r);break e}st(e,t,s,r)}t=t.child}return t;case 5:return zd(t),e===null&&Ri(t),s=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,i=l.children,Pi(s,l)?i=null:a!==null&&Pi(s,a)&&(t.flags|=32),np(e,t),st(e,t,i,r),t.child;case 6:return e===null&&Ri(t),null;case 13:return lp(e,t,r);case 4:return To(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Rn(t,null,s,r):st(e,t,s,r),t.child;case 11:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Lt(s,l),Vc(e,t,s,l,r);case 7:return st(e,t,t.pendingProps,r),t.child;case 8:return st(e,t,t.pendingProps.children,r),t.child;case 12:return st(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,l=t.pendingProps,a=t.memoizedProps,i=l.value,_e(Ql,s._currentValue),s._currentValue=i,a!==null)if(Ot(a.value,i)){if(a.children===l.children&&!ft.current){t=ur(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){i=a.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=ar(-1,r&-r),c.tag=2;var m=a.updateQueue;if(m!==null){m=m.shared;var y=m.pending;y===null?c.next=c:(c.next=y.next,y.next=c),m.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Di(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(U(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Di(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}st(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,s=t.pendingProps.children,Pn(t,r),l=Pt(l),s=s(l),t.flags|=1,st(e,t,s,r),t.child;case 14:return s=t.type,l=Lt(s,t.pendingProps),l=Lt(s.type,l),Wc(e,t,s,l,r);case 15:return tp(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Lt(s,l),El(e,t),t.tag=1,xt(s)?(e=!0,Vl(t)):e=!1,Pn(t,r),Jd(t,s,l),Mi(t,s,l,r),Ui(null,t,s,!0,e,r);case 19:return ap(e,t,r);case 22:return rp(e,t,r)}throw Error(U(156,t.tag))};function jp(e,t){return qu(e,t)}function Y0(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,r,s){return new Y0(e,t,r,s)}function Bo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function q0(e){if(typeof e=="function")return Bo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oo)return 11;if(e===co)return 14}return 2}function zr(e,t){var r=e.alternate;return r===null?(r=Et(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function $l(e,t,r,s,l,a){var i=2;if(s=e,typeof e=="function")Bo(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case xn:return Gr(r.children,l,a,t);case io:i=8,l|=8;break;case oi:return e=Et(12,r,t,l|2),e.elementType=oi,e.lanes=a,e;case ci:return e=Et(13,r,t,l),e.elementType=ci,e.lanes=a,e;case ui:return e=Et(19,r,t,l),e.elementType=ui,e.lanes=a,e;case zu:return ma(r,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pu:i=10;break e;case $u:i=9;break e;case oo:i=11;break e;case co:i=14;break e;case vr:i=16,s=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=Et(i,r,t,l),t.elementType=e,t.type=s,t.lanes=a,t}function Gr(e,t,r,s){return e=Et(7,e,s,t),e.lanes=r,e}function ma(e,t,r,s){return e=Et(22,e,s,t),e.elementType=zu,e.lanes=r,e.stateNode={isHidden:!1},e}function qa(e,t,r){return e=Et(6,e,null,t),e.lanes=r,e}function Xa(e,t,r){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function X0(e,t,r,s,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pa(0),this.expirationTimes=Pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pa(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Qo(e,t,r,s,l,a,i,o,c){return e=new X0(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Et(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eo(a),e}function G0(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fn,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function kp(e){if(!e)return Lr;e=e._reactInternals;e:{if(sn(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var r=e.type;if(xt(r))return kd(e,r,t)}return t}function _p(e,t,r,s,l,a,i,o,c){return e=Qo(r,s,!0,e,l,a,i,o,c),e.context=kp(null),r=e.current,s=it(),l=$r(r),a=ar(s,l),a.callback=t??null,Tr(r,a,l),e.current.lanes=l,Us(e,l,s),gt(e,s),e}function fa(e,t,r,s){var l=t.current,a=it(),i=$r(l);return r=kp(r),t.context===null?t.context=r:t.pendingContext=r,t=ar(a,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Tr(l,t,i),e!==null&&(Mt(e,l,i,a),Nl(e,l,i)),i}function ta(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ho(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function J0(){return null}var Np=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ko(e){this._internalRoot=e}xa.prototype.render=Ko.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));fa(e,t,null,null)};xa.prototype.unmount=Ko.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rn(function(){fa(null,e,null,null)}),t[or]=null}};function xa(e){this._internalRoot=e}xa.prototype.unstable_scheduleHydration=function(e){if(e){var t=rd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<br.length&&t!==0&&t<br[r].priority;r++);br.splice(r,0,e),r===0&&sd(e)}};function Yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ga(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ru(){}function Z0(e,t,r,s,l){if(l){if(typeof s=="function"){var a=s;s=function(){var m=ta(i);a.call(m)}}var i=_p(t,s,e,0,null,!1,!1,"",ru);return e._reactRootContainer=i,e[or]=i.current,$s(e.nodeType===8?e.parentNode:e),rn(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof s=="function"){var o=s;s=function(){var m=ta(c);o.call(m)}}var c=Qo(e,0,!1,null,null,!1,!1,"",ru);return e._reactRootContainer=c,e[or]=c.current,$s(e.nodeType===8?e.parentNode:e),rn(function(){fa(t,c,r,s)}),c}function ha(e,t,r,s,l){var a=r._reactRootContainer;if(a){var i=a;if(typeof l=="function"){var o=l;l=function(){var c=ta(i);o.call(c)}}fa(t,i,e,l)}else i=Z0(r,t,e,l,s);return ta(i)}ed=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=us(t.pendingLanes);r!==0&&(mo(t,r|1),gt(t,Me()),!(xe&6)&&(Mn=Me()+500,Fr()))}break;case 13:rn(function(){var s=cr(e,1);if(s!==null){var l=it();Mt(s,e,1,l)}}),Ho(e,1)}};fo=function(e){if(e.tag===13){var t=cr(e,134217728);if(t!==null){var r=it();Mt(t,e,134217728,r)}Ho(e,134217728)}};td=function(e){if(e.tag===13){var t=$r(e),r=cr(e,t);if(r!==null){var s=it();Mt(r,e,t,s)}Ho(e,t)}};rd=function(){return ve};nd=function(e,t){var r=ve;try{return ve=e,t()}finally{ve=r}};wi=function(e,t,r){switch(t){case"input":if(mi(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var l=ia(s);if(!l)throw Error(U(90));Lu(s),mi(s,l)}}}break;case"textarea":Du(e,r);break;case"select":t=r.value,t!=null&&Sn(e,!!r.multiple,t,!1)}};Wu=Uo;Bu=rn;var ef={usingClientEntryPoint:!1,Events:[Ws,vn,ia,Uu,Vu,Uo]},as={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tf={bundleType:as.bundleType,version:as.version,rendererPackageName:as.rendererPackageName,rendererConfig:as.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ku(e),e===null?null:e.stateNode},findFiberByHostInstance:as.findFiberByHostInstance||J0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{na=vl.inject(tf),Kt=vl}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ef;kt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yo(t))throw Error(U(200));return G0(e,t,null,r)};kt.createRoot=function(e,t){if(!Yo(e))throw Error(U(299));var r=!1,s="",l=Np;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Qo(e,1,!1,null,null,r,!1,s,l),e[or]=t.current,$s(e.nodeType===8?e.parentNode:e),new Ko(t)};kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=Ku(t),e=e===null?null:e.stateNode,e};kt.flushSync=function(e){return rn(e)};kt.hydrate=function(e,t,r){if(!ga(t))throw Error(U(200));return ha(null,e,t,!0,r)};kt.hydrateRoot=function(e,t,r){if(!Yo(e))throw Error(U(405));var s=r!=null&&r.hydratedSources||null,l=!1,a="",i=Np;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=_p(t,null,e,1,r??null,l,!1,a,i),e[or]=t.current,$s(e),s)for(e=0;e<s.length;e++)r=s[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new xa(t)};kt.render=function(e,t,r){if(!ga(t))throw Error(U(200));return ha(null,e,t,!1,r)};kt.unmountComponentAtNode=function(e){if(!ga(e))throw Error(U(40));return e._reactRootContainer?(rn(function(){ha(null,null,e,!1,function(){e._reactRootContainer=null,e[or]=null})}),!0):!1};kt.unstable_batchedUpdates=Uo;kt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!ga(r))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return ha(e,t,r,!1,s)};kt.version="18.3.1-next-f1338f8080-20240426";function Sp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sp)}catch(e){console.error(e)}}Sp(),Su.exports=kt;var rf=Su.exports,nu=rf;ai.createRoot=nu.createRoot,ai.hydrateRoot=nu.hydrateRoot;const nf="modulepreload",sf=function(e){return"/"+e},su={},Qs=function(t,r,s){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));l=Promise.allSettled(r.map(c=>{if(c=sf(c),c in su)return;su[c]=!0;const m=c.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${y}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":nf,m||(w.as="script"),w.crossOrigin="",w.href=c,o&&w.setAttribute("nonce",o),document.head.appendChild(w),m)return new Promise((x,E)=>{w.addEventListener("load",x),w.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return l.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},Cp=p.createContext(null);function lf({children:e}){const[t,r]=p.useState(null),s=p.useCallback(i=>new Promise(o=>{r({message:i,resolve:o})}),[]),l=()=>{t==null||t.resolve(!0),r(null)},a=()=>{t==null||t.resolve(!1),r(null)};return n.jsxs(Cp.Provider,{value:s,children:[e,t&&n.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:a}),n.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border border-gray-200 p-6 max-w-sm w-full mx-4",children:[n.jsx("p",{className:"text-sm text-gray-800 mb-5 leading-relaxed",children:t.message}),n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx("button",{onClick:a,className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors",autoFocus:!0,children:"Cancel"}),n.jsx("button",{onClick:l,className:"px-4 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition-colors",children:"Confirm"})]})]})]})]})}function Hs(){const e=p.useContext(Cp);if(!e)throw new Error("useConfirm must be used within a ConfirmProvider");return e}function af({connected:e}){return n.jsx("header",{className:"bg-white border-b-2 border-cream-300 sticky top-0 z-50 shadow-sm",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-4",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:" Ice Cream Social Transcription"}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${e?"bg-sage-100 text-sage-700 border border-sage-200":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:e?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block w-2 h-2 bg-sage-500 rounded-full mr-2 animate-pulse"}),"Worker Active"]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block w-2 h-2 bg-gray-400 rounded-full mr-2"}),"Connecting..."]})})})]})})})}const Ks=typeof window<"u"&&window.__TAURI__!==void 0;console.log("Tauri detection:",{isTauri:Ks,hasWindow:typeof window<"u",hasTauriGlobal:typeof window<"u"&&window.__TAURI__!==void 0,tauriObject:typeof window<"u"?window.__TAURI__:"N/A"});async function of(){if(!Ks)throw new Error("Not running in Tauri");const{invoke:e}=await Qs(async()=>{const{invoke:t}=await Promise.resolve().then(()=>bf);return{invoke:t}},void 0);return e}async function cf(){if(!Ks)throw new Error("Not running in Tauri");const{listen:e}=await Qs(async()=>{const{listen:t}=await import("./event-D_6HwoE_.js");return{listen:t}},[]);return e}async function O(e,t={}){return(await of())(e,t)}const Fe={async getEpisodes(e={}){console.log("Tauri getEpisodes called with:",e);const t=await O("get_episodes",{filters:e});return console.log("Tauri getEpisodes result:",t),t},async getEpisode(e){return O("get_episode",{id:e})},async refreshFeed(e="patreon",t=!1){console.log("Tauri refreshFeed called:",e,t);const r=await O("refresh_feed",{source:e,force:t});return console.log("Tauri refreshFeed result:",r),r},async getRefreshStatus(e){return{status:"completed"}},async getTranscript(e){console.log("Tauri getTranscript called for episode:",e);const t=await O("get_transcript",{episodeId:e});return console.log("Tauri getTranscript result:",t),t},async getFeedSources(){console.log("Tauri getFeedSources called");const e=await O("get_feed_sources");return console.log("Tauri getFeedSources result:",e),e},async downloadEpisode(e){console.log("Tauri downloadEpisode called for:",e);const t=await O("download_episode",{episodeId:e});return console.log("Tauri downloadEpisode result:",t),t},async updateSpeakerNames(e,t,r=null){console.log("Tauri updateSpeakerNames called for:",e,t);const s=await O("update_speaker_names",{episodeId:e,speakerNames:t,markedSamples:r});return console.log("Tauri updateSpeakerNames result:",s),s},async saveTranscriptEdits(e,t){console.log("Tauri saveTranscriptEdits called for:",e);const r=await O("save_transcript_edits",{episodeId:e,edits:t});return console.log("Tauri saveTranscriptEdits result:",r),r},async retryDiarization(e){console.log("Tauri retryDiarization called for:",e);const t=await O("retry_diarization",{episodeId:e});return console.log("Tauri retryDiarization result:",t),t},async saveVoiceSamples(e,t){console.log("Tauri saveVoiceSamples called for:",e,t);const r=await O("save_voice_samples",{episodeId:e,samples:t});return console.log("Tauri saveVoiceSamples result:",r),r},async getAudioPath(e){return console.log("Tauri getAudioPath called for:",e),await O("get_audio_path",{episodeId:e})},async analyzeEpisodeContent(e,t=!0){console.log("Tauri analyzeEpisodeContent called for:",e);const r=await O("analyze_episode_content",{episodeId:e,useLlm:t});return console.log("Tauri analyzeEpisodeContent result:",r),r},async reprocessDiarization(e){console.log("Tauri reprocessDiarization called for:",e);const t=await O("reprocess_diarization",{episodeId:e});return console.log("Tauri reprocessDiarization result:",t),t},async getCategoryRules(){return O("get_category_rules")},async recategorizeAllEpisodes(){return O("recategorize_all_episodes")},async linkCrossFeedEpisodes(){return O("link_cross_feed_episodes")},async getEpisodeVariants(e){return O("get_episode_variants",{episodeId:e})},async addCategoryRule(e){return O("add_category_rule",{rule:e})},async updateCategoryRule(e){return O("update_category_rule",{rule:e})},async deleteCategoryRule(e){return O("delete_category_rule",{id:e})},async testCategoryRule(e,t=null){return O("test_category_rule",{pattern:e,keywords:t})}},pn={async getQueue(){return O("get_queue")},async addToQueue(e,t=0){return O("add_to_queue",{episodeId:e,priority:t})},async removeFromQueue(e){return O("remove_from_queue",{episodeId:e})},async stopCurrent(){return O("stop_current_transcription")},async retryTranscription(e){return O("retry_transcription",{episodeId:e})},async getStatus(){return O("get_queue_status")}},is={async getPipelineHealth(){return O("get_pipeline_health")},async getRecentErrors(e=20){return O("get_recent_errors",{limit:e})},async getQueueEpisodeLists(){return O("get_queue_episode_lists")},async getStats(){console.log("Tauri getStats called");const e=await O("get_stats");return console.log("Tauri getStats result:",e),e},async getPipelineStats(e=20){return O("get_pipeline_stats",{limit:e})}},Ga={async getStatus(){return O("get_worker_status")},async setPreventSleep(e){return O("set_prevent_sleep",{enabled:e})},async getPreventSleep(){return O("get_prevent_sleep")}};async function uf(e){if(!Ks)return console.log("Not in Tauri, skipping event listeners"),()=>{};const t=await cf(),r=[];if(e.onStatusUpdate){const s=await t("status_update",l=>{e.onStatusUpdate(l.payload)});r.push(s)}if(e.onQueueUpdate){const s=await t("queue_update",l=>{e.onQueueUpdate(l.payload)});r.push(s)}if(e.onStatsUpdate){const s=await t("stats_update",l=>{e.onStatsUpdate(l.payload)});r.push(s)}if(e.onTranscriptionComplete){const s=await t("transcription_complete",l=>{e.onTranscriptionComplete(l.payload)});r.push(s)}if(e.onTranscriptionFailed){const s=await t("transcription_failed",l=>{e.onTranscriptionFailed(l.payload)});r.push(s)}return()=>{r.forEach(s=>s())}}const Ja={async getSetting(e){return O("get_setting",{key:e})},async setSetting(e,t){return O("set_setting",{key:e,value:t})},async getAllSettings(){return O("get_all_settings")}},dt={async getSpeakers(){return O("get_speakers")},async createSpeaker(e,t=null,r=!1){return O("create_speaker",{name:e,shortName:t,isHost:r})},async updateSpeaker(e,t,r=null,s=!1){return O("update_speaker",{id:e,name:t,shortName:r,isHost:s})},async deleteSpeaker(e){return O("delete_speaker",{id:e})},async getSpeakerStats(){return O("get_speaker_stats")},async linkEpisodeSpeaker(e,t,r){return O("link_episode_speaker",{episodeId:e,diarizationLabel:t,speakerId:r})},async linkEpisodeAudioDrop(e,t,r){return O("link_episode_audio_drop",{episodeId:e,diarizationLabel:t,audioDropId:r})},async unlinkEpisodeSpeaker(e,t){return O("unlink_episode_speaker",{episodeId:e,diarizationLabel:t})},async getEpisodeSpeakerAssignments(e){return O("get_episode_speaker_assignments",{episodeId:e})},async getVoiceLibrary(){return O("get_voice_library")},async getVoiceSamplePath(e){return O("get_voice_sample_path",{speakerName:e})},async getVoiceSamples(e){return O("get_voice_samples",{speakerName:e})},async deleteVoiceSample(e,t,r){return O("delete_voice_sample",{speakerName:e,filePath:t||null,sampleId:r||null})},async updateVoiceSampleRating(e,t){return O("update_voice_sample_rating",{id:e,rating:t})}},we={async getChapterTypes(){return O("get_chapter_types")},async createChapterType(e,t,r,s){return O("create_chapter_type",{name:e,description:t,color:r,icon:s})},async getEpisodeChapters(e){return O("get_episode_chapters",{episodeId:e})},async createEpisodeChapter(e,t,r,s,l,a,i){return O("create_episode_chapter",{episodeId:e,chapterTypeId:t,title:r,startTime:s,endTime:l,startSegmentIdx:a,endSegmentIdx:i})},async deleteEpisodeChapter(e){return O("delete_episode_chapter",{chapterId:e})},async getCharacters(){return O("get_characters")},async createCharacter(e,t,r,s){return O("create_character",{name:e,shortName:t,description:r,catchphrase:s})},async updateCharacter(e,t,r,s,l){return O("update_character",{id:e,name:t,shortName:r,description:s,catchphrase:l})},async deleteCharacter(e){return O("delete_character",{id:e})},async addCharacterAppearance(e,t,r,s,l){return O("add_character_appearance",{characterId:e,episodeId:t,startTime:r,endTime:s,segmentIdx:l})},async getSponsors(){return O("get_sponsors")},async createSponsor(e,t,r,s){return O("create_sponsor",{name:e,tagline:t,description:r,isReal:s})},async updateSponsor(e,t,r,s,l){return O("update_sponsor",{id:e,name:t,tagline:r,description:s,isReal:l})},async deleteSponsor(e){return O("delete_sponsor",{id:e})},async addSponsorMention(e,t,r,s,l){return O("add_sponsor_mention",{sponsorId:e,episodeId:t,startTime:r,endTime:s,segmentIdx:l})},async getCharacterAppearancesForEpisode(e){return O("get_character_appearances_for_episode",{episodeId:e})},async deleteCharacterAppearance(e){return O("delete_character_appearance",{id:e})},async getAudioDrops(){return O("get_audio_drops")},async createAudioDrop(e,t=null,r=null,s=null){return O("create_audio_drop",{name:e,transcriptText:t,description:r,category:s})},async deleteAudioDrop(e){return O("delete_audio_drop",{id:e})},async addAudioDropInstance(e,t,r=null,s=null,l=null,a=null){return O("add_audio_drop_instance",{audioDropId:e,episodeId:t,segmentIdx:r,startTime:s,endTime:l,notes:a})},async getAudioDropInstances(e){return O("get_audio_drop_instances",{episodeId:e})},async deleteAudioDropInstance(e){return O("delete_audio_drop_instance",{id:e})},async createFlaggedSegment(e,t,r,s=null,l=null,a=null,i=null){return O("create_flagged_segment",{episodeId:e,segmentIdx:t,flagType:r,correctedSpeaker:s,characterId:l,notes:a,speakerIds:i})},async getFlaggedSegments(e){return O("get_flagged_segments",{episodeId:e})},async updateFlaggedSegment(e,t=null,r=null,s=null,l=null,a=null,i=null){return O("update_flagged_segment",{id:e,flagType:t,correctedSpeaker:r,characterId:s,notes:l,speakerIds:a,resolved:i})},async deleteFlaggedSegment(e){return O("delete_flagged_segment",{id:e})},async getUnresolvedFlagCount(e){return O("get_unresolved_flag_count",{episodeId:e})}},yr={async searchTranscripts(e,t=50,r=0){console.log("Tauri searchTranscripts called:",e);const s=await O("search_transcripts",{query:e,limit:t,offset:r});return console.log("Tauri searchTranscripts result:",s),s},async getSearchStats(){return O("get_search_stats")},async indexEpisodeTranscript(e,t){return console.log("Tauri indexEpisodeTranscript called for:",e),O("index_episode_transcript",{episodeId:e,segments:t})},async indexAllTranscripts(){return console.log("Tauri indexAllTranscripts called"),O("index_all_transcripts")},async reindexAllWithSpeakers(){return console.log("Tauri reindexAllWithSpeakers called"),O("reindex_all_with_speakers")},async getDetectedContent(e){return O("get_detected_content",{episodeId:e})},async getDetectedContentByType(e){return O("get_detected_content_by_type",{contentType:e})},async addDetectedContent(e,t,r,s,l,a,i,o,c){return O("add_detected_content",{episodeId:e,contentType:t,name:r,description:s,startTime:l,endTime:a,segmentIdx:i,confidence:o,rawText:c})}},er={async getOllamaStatus(){return O("get_ollama_status")},async getPrompts(){return O("get_extraction_prompts")},async getPrompt(e){return O("get_extraction_prompt",{promptId:e})},async createPrompt(e,t,r,s,l,a){return O("create_extraction_prompt",{name:e,description:t,contentType:r,promptText:s,systemPrompt:l,outputSchema:a})},async updatePrompt(e,t,r,s,l,a,i,o){return O("update_extraction_prompt",{promptId:e,name:t,description:r,contentType:s,promptText:l,systemPrompt:a,outputSchema:i,isActive:o})},async deletePrompt(e){return O("delete_extraction_prompt",{promptId:e})},async runExtraction(e,t){return O("run_extraction",{promptId:e,episodeId:t})},async testPrompt(e,t,r){return O("test_extraction_prompt",{promptText:e,systemPrompt:t,sampleText:r})},async getExtractionRuns(e,t){return O("get_extraction_runs",{episodeId:e,limit:t})}},lu={async syncWikiEpisode(e){return O("sync_wiki_episode",{episodeNumber:String(e)})},async getWikiEpisodeMeta(e){return O("get_wiki_episode_meta",{episodeId:e})}},F=Ks,lt="/api/v2";class Za extends Error{constructor(t,r,s){super(t),this.name="APIError",this.status=r,this.data=s}}async function at(e,t={}){try{const r=await fetch(e,{headers:{"Content-Type":"application/json",...t.headers},...t}),s=await r.json();if(!r.ok)throw new Za(s.error||"API request failed",r.status,s);return s}catch(r){throw r instanceof Za?r:new Za(r.message,0,null)}}const be={async getEpisodes(e={}){if(F)try{return await Fe.getEpisodes(e)}catch(r){throw console.error("Tauri getEpisodes failed:",r),r}const t=new URLSearchParams(e).toString();return at(`${lt}/episodes?${t}`)},async getEpisode(e){if(F)try{return await Fe.getEpisode(e)}catch(t){throw console.error("Tauri getEpisode failed:",t),t}return at(`${lt}/episodes/${e}`)},async refreshFeed(e="patreon",t=!1){if(F)try{return await Fe.refreshFeed(e,t)}catch(r){throw console.error("Tauri refreshFeed failed:",r),r}return at(`${lt}/episodes/refresh-feed`,{method:"POST",body:JSON.stringify({source:e,force:t})})},async getRefreshStatus(e){return F?{status:"idle"}:at(`${lt}/episodes/refresh-status/${e}`)},async getFeedSources(){if(F)try{return await Fe.getFeedSources()}catch(e){throw console.error("Tauri getFeedSources failed:",e),e}return at(`${lt}/feeds/sources`)},async getTranscript(e){if(F)try{return await Fe.getTranscript(e)}catch(t){throw console.error("Tauri getTranscript failed:",t),t}return at(`${lt}/episodes/${e}/transcript`)},async updateSpeakerNames(e,t,r=null){if(F)try{return await Fe.updateSpeakerNames(e,t,r)}catch(s){throw console.error("Tauri updateSpeakerNames failed:",s),s}throw new Error("Speaker name updates require Tauri")},async saveTranscriptEdits(e,t){if(F)try{return await Fe.saveTranscriptEdits(e,t)}catch(r){throw console.error("Tauri saveTranscriptEdits failed:",r),r}throw new Error("Transcript edits require Tauri")},async retryDiarization(e){if(F)try{return await Fe.retryDiarization(e)}catch(t){throw console.error("Tauri retryDiarization failed:",t),t}throw new Error("Diarization requires Tauri")},async saveVoiceSamples(e,t){if(F)try{return await Fe.saveVoiceSamples(e,t)}catch(r){throw console.error("Tauri saveVoiceSamples failed:",r),r}throw new Error("Voice samples require Tauri")},async getAudioPath(e){if(F)try{return await Fe.getAudioPath(e)}catch(t){throw console.error("Tauri getAudioPath failed:",t),t}throw new Error("Audio path requires Tauri")},async downloadEpisode(e){if(F)try{return await Fe.downloadEpisode(e)}catch(t){throw console.error("Tauri downloadEpisode failed:",t),t}return at(`${lt}/episodes/${e}/download`,{method:"POST"})},async analyzeEpisodeContent(e,t=!0){if(F)try{return await Fe.analyzeEpisodeContent(e,t)}catch(r){throw console.error("Tauri analyzeEpisodeContent failed:",r),r}throw new Error("Content analysis requires Tauri")},async reprocessDiarization(e){if(F)try{return await Fe.reprocessDiarization(e)}catch(t){throw console.error("Tauri reprocessDiarization failed:",t),t}throw new Error("Reprocess diarization requires Tauri")},async getCategoryRules(){if(F)try{return await Fe.getCategoryRules()}catch(e){return console.error("Tauri getCategoryRules failed:",e),[]}return[]},async recategorizeAllEpisodes(){if(F)return await Fe.recategorizeAllEpisodes();throw new Error("Recategorize requires Tauri")},async linkCrossFeedEpisodes(){if(F)return await Fe.linkCrossFeedEpisodes();throw new Error("Link cross-feed requires Tauri")},async getEpisodeVariants(e){if(F)try{return await Fe.getEpisodeVariants(e)}catch(t){return console.error("Tauri getEpisodeVariants failed:",t),[]}return[]},async addCategoryRule(e){if(F)return await Fe.addCategoryRule(e);throw new Error("Category rules require Tauri")},async updateCategoryRule(e){if(F)return await Fe.updateCategoryRule(e);throw new Error("Category rules require Tauri")},async deleteCategoryRule(e){if(F)return await Fe.deleteCategoryRule(e);throw new Error("Category rules require Tauri")},async testCategoryRule(e,t=null){if(F)return await Fe.testCategoryRule(e,t);throw new Error("Category rules require Tauri")}},ei={async getQueue(){if(F)try{return await pn.getQueue()}catch(e){throw console.error("Tauri getQueue failed:",e),e}return at(`${lt}/queue`)},async addToQueue(e,t=0){if(F)try{return await pn.addToQueue(e,t),{success:!0}}catch(r){throw console.error("Tauri addToQueue failed:",r),r}return at(`${lt}/queue/add`,{method:"POST",body:JSON.stringify({episode_id:e,priority:t})})},async removeFromQueue(e){if(F)try{return await pn.removeFromQueue(e),{success:!0}}catch(t){throw console.error("Tauri removeFromQueue failed:",t),t}return at(`${lt}/queue/remove/${e}`,{method:"DELETE"})},async stopCurrent(){if(F)try{return await pn.stopCurrent(),{success:!0}}catch(e){throw console.error("Tauri stopCurrent failed:",e),e}return at(`${lt}/queue/stop-current`,{method:"POST"})},async retryTranscription(e){if(F)try{return await pn.retryTranscription(e),{success:!0}}catch(t){throw console.error("Tauri retryTranscription failed:",t),t}return at(`${lt}/queue/retry/${e}`,{method:"POST"})},async getStatus(){if(F)try{return await pn.getStatus()}catch(e){throw console.error("Tauri getStatus failed:",e),e}return at(`${lt}/queue/status`)}},js={async getStats(){if(F)try{return await is.getStats()}catch(e){throw console.error("Tauri getStats failed:",e),e}return at(`${lt}/stats`)},async getPipelineStats(e=20){if(F)try{return await is.getPipelineStats(e)}catch(t){return console.error("Tauri getPipelineStats failed:",t),{timing:null,recent:[]}}return{timing:null,recent:[]}},async getPipelineHealth(){if(F)try{return await is.getPipelineHealth()}catch(e){return console.error("Tauri getPipelineHealth failed:",e),null}return null},async getRecentErrors(e=20){if(F)try{return await is.getRecentErrors(e)}catch(t){return console.error("Tauri getRecentErrors failed:",t),[]}return[]},async getQueueEpisodeLists(){if(F)try{return await is.getQueueEpisodeLists()}catch(e){return console.error("Tauri getQueueEpisodeLists failed:",e),{transcribe:[],diarize:[]}}return{transcribe:[],diarize:[]}}},Zi={async getStatus(){if(F)try{return await Ga.getStatus()}catch(e){throw console.error("Tauri workerStatus failed:",e),e}return at(`${lt}/worker/status`)},async setPreventSleep(e){if(F)return await Ga.setPreventSleep(e);throw new Error("Prevent sleep is only available in the Tauri app")},async getPreventSleep(){return F?await Ga.getPreventSleep():!1}},df=uf,au={async getSetting(e){if(F)try{return await Ja.getSetting(e)}catch(t){return console.error("Tauri getSetting failed:",t),null}return null},async setSetting(e,t){if(F)try{return await Ja.setSetting(e,t)}catch(r){throw console.error("Tauri setSetting failed:",r),r}throw new Error("Settings only available in Tauri mode")},async getAllSettings(){if(F)try{return await Ja.getAllSettings()}catch(e){return console.error("Tauri getAllSettings failed:",e),{}}return{}}},nt={async getSpeakers(){if(F)try{return await dt.getSpeakers()}catch(e){return console.error("Tauri getSpeakers failed:",e),[]}return[]},async createSpeaker(e,t=null,r=!1){if(F)return await dt.createSpeaker(e,t,r);throw new Error("Speakers only available in Tauri mode")},async updateSpeaker(e,t,r=null,s=!1){if(F)return await dt.updateSpeaker(e,t,r,s);throw new Error("Speakers only available in Tauri mode")},async deleteSpeaker(e){if(F)return await dt.deleteSpeaker(e);throw new Error("Speakers only available in Tauri mode")},async getSpeakerStats(){if(F)try{return await dt.getSpeakerStats()}catch(e){return console.error("Tauri getSpeakerStats failed:",e),[]}return[]},async linkEpisodeSpeaker(e,t,r){if(F)return await dt.linkEpisodeSpeaker(e,t,r);throw new Error("Speakers only available in Tauri mode")},async linkEpisodeAudioDrop(e,t,r){if(F)return await dt.linkEpisodeAudioDrop(e,t,r);throw new Error("Speakers only available in Tauri mode")},async unlinkEpisodeSpeaker(e,t){if(F)return await dt.unlinkEpisodeSpeaker(e,t);throw new Error("Speakers only available in Tauri mode")},async getEpisodeSpeakerAssignments(e){if(F)try{return await dt.getEpisodeSpeakerAssignments(e)}catch(t){return console.error("Tauri getEpisodeSpeakerAssignments failed:",t),[]}return[]},async getVoiceLibrary(){if(F)try{return await dt.getVoiceLibrary()}catch(e){return console.error("Tauri getVoiceLibrary failed:",e),[]}return[]},async getVoiceSamplePath(e){if(F)try{return await dt.getVoiceSamplePath(e)}catch(t){return console.error("Tauri getVoiceSamplePath failed:",t),null}return null},async getVoiceSamples(e){if(F)try{return await dt.getVoiceSamples(e)}catch(t){return console.error("Tauri getVoiceSamples failed:",t),[]}return[]},async deleteVoiceSample(e,t,r){if(F)return await dt.deleteVoiceSample(e,t,r);throw new Error("Voice samples only available in Tauri mode")},async updateVoiceSampleRating(e,t){if(F)return await dt.updateVoiceSampleRating(e,t);throw new Error("Voice sample ratings only available in Tauri mode")}},ne={async getChapterTypes(){if(F)try{return await we.getChapterTypes()}catch(e){return console.error("Tauri getChapterTypes failed:",e),[]}return[]},async createChapterType(e,t,r,s){if(F)return await we.createChapterType(e,t,r,s);throw new Error("Content only available in Tauri mode")},async getEpisodeChapters(e){if(F)try{return await we.getEpisodeChapters(e)}catch(t){return console.error("Tauri getEpisodeChapters failed:",t),[]}return[]},async createEpisodeChapter(e,t,r,s,l,a,i){if(F)return await we.createEpisodeChapter(e,t,r,s,l,a,i);throw new Error("Content only available in Tauri mode")},async deleteEpisodeChapter(e){if(F)return await we.deleteEpisodeChapter(e);throw new Error("Content only available in Tauri mode")},async getCharacters(){if(F)try{return await we.getCharacters()}catch(e){return console.error("Tauri getCharacters failed:",e),[]}return[]},async createCharacter(e,t,r,s){if(F)return await we.createCharacter(e,t,r,s);throw new Error("Content only available in Tauri mode")},async updateCharacter(e,t,r,s,l){if(F)return await we.updateCharacter(e,t,r,s,l);throw new Error("Content only available in Tauri mode")},async deleteCharacter(e){if(F)return await we.deleteCharacter(e);throw new Error("Content only available in Tauri mode")},async addCharacterAppearance(e,t,r,s,l){if(F)return await we.addCharacterAppearance(e,t,r,s,l);throw new Error("Content only available in Tauri mode")},async getCharacterAppearancesForEpisode(e){if(F)try{return await we.getCharacterAppearancesForEpisode(e)}catch(t){return console.error("Tauri getCharacterAppearancesForEpisode failed:",t),[]}return[]},async deleteCharacterAppearance(e){if(F)return await we.deleteCharacterAppearance(e);throw new Error("Content only available in Tauri mode")},async getAudioDrops(){if(F)try{return await we.getAudioDrops()}catch(e){return console.error("Tauri getAudioDrops failed:",e),[]}return[]},async createAudioDrop(e,t=null,r=null,s=null){if(F)return await we.createAudioDrop(e,t,r,s);throw new Error("Content only available in Tauri mode")},async deleteAudioDrop(e){if(F)return await we.deleteAudioDrop(e);throw new Error("Content only available in Tauri mode")},async addAudioDropInstance(e,t,r=null,s=null,l=null,a=null){if(F)return await we.addAudioDropInstance(e,t,r,s,l,a);throw new Error("Content only available in Tauri mode")},async getAudioDropInstances(e){if(F)try{return await we.getAudioDropInstances(e)}catch(t){return console.error("Tauri getAudioDropInstances failed:",t),[]}return[]},async deleteAudioDropInstance(e){if(F)return await we.deleteAudioDropInstance(e);throw new Error("Content only available in Tauri mode")},async createFlaggedSegment(e,t,r,s=null,l=null,a=null,i=null){if(F)return await we.createFlaggedSegment(e,t,r,s,l,a,i);throw new Error("Content only available in Tauri mode")},async getFlaggedSegments(e){if(F)try{return await we.getFlaggedSegments(e)}catch(t){return console.error("Tauri getFlaggedSegments failed:",t),[]}return[]},async updateFlaggedSegment(e,t=null,r=null,s=null,l=null,a=null,i=null){if(F)return await we.updateFlaggedSegment(e,t,r,s,l,a,i);throw new Error("Content only available in Tauri mode")},async deleteFlaggedSegment(e){if(F)return await we.deleteFlaggedSegment(e);throw new Error("Content only available in Tauri mode")},async getUnresolvedFlagCount(e){if(F)try{return await we.getUnresolvedFlagCount(e)}catch(t){return console.error("Tauri getUnresolvedFlagCount failed:",t),0}return 0},async getSponsors(){if(F)try{return await we.getSponsors()}catch(e){return console.error("Tauri getSponsors failed:",e),[]}return[]},async createSponsor(e,t,r,s){if(F)return await we.createSponsor(e,t,r,s);throw new Error("Content only available in Tauri mode")},async updateSponsor(e,t,r,s,l){if(F)return await we.updateSponsor(e,t,r,s,l);throw new Error("Content only available in Tauri mode")},async deleteSponsor(e){if(F)return await we.deleteSponsor(e);throw new Error("Content only available in Tauri mode")},async addSponsorMention(e,t,r,s,l){if(F)return await we.addSponsorMention(e,t,r,s,l);throw new Error("Content only available in Tauri mode")}},ps={async searchTranscripts(e,t=50,r=0){if(F)try{return await yr.searchTranscripts(e,t,r)}catch(s){throw console.error("Tauri searchTranscripts failed:",s),s}throw new Error("Search only available in Tauri mode")},async getSearchStats(){if(F)try{return await yr.getSearchStats()}catch(e){return console.error("Tauri getSearchStats failed:",e),{indexed_segments:0,unindexed_episode_count:0}}return{indexed_segments:0,unindexed_episode_count:0}},async indexEpisodeTranscript(e,t){if(F)try{return await yr.indexEpisodeTranscript(e,t)}catch(r){throw console.error("Tauri indexEpisodeTranscript failed:",r),r}throw new Error("Search indexing only available in Tauri mode")},async indexAllTranscripts(){if(F)try{return await yr.indexAllTranscripts()}catch(e){throw console.error("Tauri indexAllTranscripts failed:",e),e}throw new Error("Search indexing only available in Tauri mode")},async reindexAllWithSpeakers(){if(F)try{return await yr.reindexAllWithSpeakers()}catch(e){throw console.error("Tauri reindexAllWithSpeakers failed:",e),e}throw new Error("Reindex only available in Tauri mode")},async getDetectedContent(e){if(F)try{return await yr.getDetectedContent(e)}catch(t){return console.error("Tauri getDetectedContent failed:",t),[]}return[]},async getDetectedContentByType(e){if(F)try{return await yr.getDetectedContentByType(e)}catch(t){return console.error("Tauri getDetectedContentByType failed:",t),[]}return[]},async addDetectedContent(e,t,r,s,l,a,i,o,c){if(F)return await yr.addDetectedContent(e,t,r,s,l,a,i,o,c);throw new Error("Search only available in Tauri mode")}},Br={async getOllamaStatus(){return F?await er.getOllamaStatus():{running:!1,model:"",model_available:!1,available_models:[],error:"Not in Tauri mode"}},async getPrompts(){return F?await er.getPrompts():[]},async getPrompt(e){return F?await er.getPrompt(e):null},async createPrompt(e,t,r,s,l,a){if(F)return await er.createPrompt(e,t,r,s,l,a);throw new Error("Extraction only available in Tauri mode")},async updatePrompt(e,t,r,s,l,a,i,o){if(F)return await er.updatePrompt(e,t,r,s,l,a,i,o);throw new Error("Extraction only available in Tauri mode")},async deletePrompt(e){if(F)return await er.deletePrompt(e);throw new Error("Extraction only available in Tauri mode")},async runExtraction(e,t){if(F)return await er.runExtraction(e,t);throw new Error("Extraction only available in Tauri mode")},async testPrompt(e,t,r){if(F)return await er.testPrompt(e,t,r);throw new Error("Extraction only available in Tauri mode")},async getExtractionRuns(e,t){return F?await er.getExtractionRuns(e,t):[]}},ti={async syncWikiEpisode(e){if(F)return await lu.syncWikiEpisode(e);throw new Error("Wiki sync only available in Tauri mode")},async getWikiEpisodeMeta(e){if(F)try{return await lu.getWikiEpisodeMeta(e)}catch(t){return console.error("Tauri getWikiEpisodeMeta failed:",t),null}return null}};function pf({stats:e}){const[t,r]=p.useState(!1),[s,l]=p.useState(!1),[a,i]=p.useState(!0),[o,c]=p.useState(!0),[m,y]=p.useState({transcribe:[],diarize:[]}),[w,x]=p.useState(!1),E=e.total_episodes||0,g=e.downloaded_episodes||0,k=e.transcribed_episodes||0,R=e.diarized_episodes||0,d=e.in_queue||0,u=e.in_diarization_queue||0,f=e.failed||0,C=E>0?(k/E*100).toFixed(1):0,L=k>0?(R/k*100).toFixed(1):0,z=d>0||u>0;return p.useEffect(()=>{!s&&z&&(x(!1),js.getQueueEpisodeLists().then(_=>{y(_||{transcribe:[],diarize:[]}),x(!0)}).catch(()=>x(!0)))},[s,d,u]),n.jsxs("div",{className:"space-y-4 mb-4",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 px-6 py-4 cursor-pointer select-none",onClick:()=>r(_=>!_),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Episode Tracking"}),t&&n.jsxs("p",{className:"text-white/80 text-xs mt-1",children:[k," transcribed / ",R," diarized / ",E," total (",C,"%)"]})]}),n.jsx("svg",{className:`w-5 h-5 text-white/80 transition-transform ${t?"-rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})}),!t&&n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-3",children:[n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:E}),n.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]}),n.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-700",children:g}),n.jsx("div",{className:"text-xs text-blue-600",children:"Downloaded"})]}),n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-700",children:k}),n.jsx("div",{className:"text-xs text-green-600",children:"Transcribed"})]}),n.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-700",children:R}),n.jsx("div",{className:"text-xs text-purple-600",children:"Diarized"})]})]}),n.jsxs("div",{className:`grid gap-3 mb-3 ${f>0?"grid-cols-3":"grid-cols-2"}`,children:[n.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-amber-700",children:d}),n.jsx("div",{className:"text-xs text-amber-600",children:"Transcribe Queue"})]}),n.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-700",children:u}),n.jsx("div",{className:"text-xs text-orange-600",children:"Diarization Queue"})]}),f>0&&n.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-red-700",children:f}),n.jsx("div",{className:"text-xs text-red-600",children:"Failed"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Transcription Progress"}),n.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[k," of ",E," (",C,"%)"]})]}),n.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${C}%`}})})]}),k>0&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Diarization Progress"}),n.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[R," of ",k," (",L,"%)"]})]}),n.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-purple-500 transition-all duration-500",style:{width:`${L}%`}})})]})]})]}),z&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-600 to-slate-700 px-6 py-3 cursor-pointer select-none",onClick:()=>l(_=>!_),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h2",{className:"text-base font-bold text-white",children:["Transcription & Diarization Queues",n.jsxs("span",{className:"ml-2 text-white/70 text-sm font-normal",children:["(",d+u," pending)"]})]}),n.jsx("svg",{className:`w-4 h-4 text-white/80 transition-transform ${s?"-rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})}),!s&&n.jsxs("div",{className:"divide-y divide-cream-100",children:[n.jsxs("div",{children:[n.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-2.5 text-sm font-medium text-amber-800 bg-amber-50 hover:bg-amber-100 transition-colors text-left",onClick:()=>i(_=>!_),children:[n.jsxs("span",{children:["Transcribe Queue (",d,")"]}),n.jsx("svg",{className:`w-4 h-4 transition-transform ${a?"":"-rotate-90"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),a&&n.jsx("div",{className:"max-h-72 overflow-y-auto",children:w?d===0?n.jsx("div",{className:"px-4 py-2 text-xs text-gray-400",children:"Nothing in transcription queue"}):n.jsx("table",{className:"min-w-full text-xs",children:n.jsx("tbody",{className:"divide-y divide-cream-50",children:m.transcribe.map((_,I)=>n.jsxs("tr",{className:"hover:bg-amber-50",children:[n.jsx("td",{className:"px-4 py-1.5 text-gray-400 w-6 tabular-nums",children:I+1}),n.jsx("td",{className:"px-2 py-1.5 text-gray-500 whitespace-nowrap w-12",children:_.episode_number?`#${_.episode_number}`:""}),n.jsx("td",{className:"px-2 py-1.5 text-gray-800 truncate max-w-xs",children:_.title})]},_.id))})}):n.jsx("div",{className:"px-4 py-2 text-xs text-gray-400",children:"Loading..."})})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-2.5 text-sm font-medium text-orange-800 bg-orange-50 hover:bg-orange-100 transition-colors text-left",onClick:()=>c(_=>!_),children:[n.jsxs("span",{children:["Diarization Queue (",u,")"]}),n.jsx("svg",{className:`w-4 h-4 transition-transform ${o?"":"-rotate-90"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),o&&n.jsx("div",{className:"max-h-72 overflow-y-auto",children:w?u===0?n.jsx("div",{className:"px-4 py-2 text-xs text-gray-400",children:"Nothing in diarization queue"}):n.jsx("table",{className:"min-w-full text-xs",children:n.jsx("tbody",{className:"divide-y divide-cream-50",children:m.diarize.map((_,I)=>n.jsxs("tr",{className:"hover:bg-orange-50",children:[n.jsx("td",{className:"px-4 py-1.5 text-gray-400 w-6 tabular-nums",children:I+1}),n.jsx("td",{className:"px-2 py-1.5 text-gray-500 whitespace-nowrap w-12",children:_.episode_number?`#${_.episode_number}`:""}),n.jsx("td",{className:"px-2 py-1.5 text-gray-800 truncate max-w-xs",children:_.title})]},_.id))})}):n.jsx("div",{className:"px-4 py-2 text-xs text-gray-400",children:"Loading..."})})]})]})]})]})}function mf({activity:e}){const[t,r]=p.useState(!1),[s,l]=p.useState({}),a=p.useRef({});p.useEffect(()=>{if(!e||e.status==="idle"){l({}),a.current={};return}const u=e.slots||[];if(u.length===0&&e.current_episode){const f=e.current_episode.id;e.elapsed_seconds!=null&&(a.current[f]={polled:e.elapsed_seconds,at:Date.now()})}else for(const f of u){const C=f.episode.id;f.elapsed_seconds!=null&&(a.current[C]={polled:f.elapsed_seconds,at:Date.now()})}},[e]),p.useEffect(()=>{const u=setInterval(()=>{const f=Date.now(),C={};for(const[L,z]of Object.entries(a.current)){const _=(f-z.at)/1e3;C[L]=Math.floor(z.polled+_)}l(C)},1e3);return()=>clearInterval(u)},[]);const i=(u,f)=>s[u]!=null?s[u]:f,o=u=>{if(u==null)return"Unknown";if(u===0)return"0m 0s";const f=Math.floor(u/60),C=Math.floor(u%60);return`${f}m ${C}s`},c=u=>{if(!u)return"Never";try{return new Date(u).toLocaleString()}catch{return"Invalid date"}},m={downloading:{icon:"",label:"Downloading",color:"amber",bgClass:"bg-amber-50",borderClass:"border-amber-200",textClass:"text-amber-600",barClass:"bg-amber-500"},transcribing:{icon:"",label:"Transcribing",color:"sky",bgClass:"bg-sky-50",borderClass:"border-sky-200",textClass:"text-sky-600",barClass:"bg-sky-500"},diarizing:{icon:"",label:"Diarizing",color:"purple",bgClass:"bg-purple-50",borderClass:"border-purple-300",textClass:"text-purple-600",barClass:"bg-gradient-to-r from-purple-500 to-purple-600"},saving:{icon:"",label:"Saving",color:"green",bgClass:"bg-green-50",borderClass:"border-green-200",textClass:"text-green-600",barClass:"bg-green-500"}},y=u=>{const f=m[u.stage]||m.transcribing,C=i(u.episode.id,u.elapsed_seconds),L=u.progress||0;return n.jsxs("div",{className:`p-4 rounded-lg border ${f.bgClass} ${f.borderClass}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"text-lg",children:f.icon}),n.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${f.textClass}`,children:f.label})]}),n.jsxs("div",{className:"font-semibold text-gray-900 text-sm",children:[u.episode.episode_number?`Ep ${u.episode.episode_number}: `:"",u.episode.title]}),n.jsxs("div",{className:`mt-3 transition-opacity duration-300 ${L>0?"opacity-100":"opacity-0 h-0 overflow-hidden"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsxs("span",{className:`text-xs ${f.textClass}`,children:[f.label," Progress"]}),n.jsxs("span",{className:`text-xs font-bold ${f.textClass}`,children:["~",L,"%"]})]}),n.jsx("div",{className:`h-2 rounded-full overflow-hidden bg-${f.color}-100`,children:n.jsx("div",{className:`h-full transition-all duration-1000 ease-linear ${f.barClass}`,style:{width:`${L}%`}})})]}),n.jsxs("div",{className:"flex gap-4 mt-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Elapsed: "}),n.jsx("span",{className:"font-medium text-gray-900",children:o(C)})]}),u.estimated_remaining_seconds!=null&&u.estimated_remaining_seconds>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Remaining: "}),n.jsxs("span",{className:"font-medium text-gray-900",children:["~",o(u.estimated_remaining_seconds)]})]})]})]},`${u.episode.id}-${u.stage}`)},w=()=>{var u,f,C,L;if(!e)return n.jsxs("div",{className:"text-center py-8 text-gray-400",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("div",{children:"Connecting..."})]});if(e.status==="idle")return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"Pipeline Status"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:n.jsx("span",{className:"text-green-600 text-sm",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Ready to Process"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Worker is online and waiting"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center",children:n.jsx("span",{className:"text-gray-400 text-sm",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium text-gray-400",children:"Queue Empty"}),n.jsx("div",{className:"text-xs text-gray-400",children:"Add episodes to start transcribing"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((u=e.worker_info)==null?void 0:u.processed_today)||0}),n.jsx("div",{className:"text-xs text-gray-500",children:"Done Today"})]}),n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((f=e.worker_info)==null?void 0:f.model)||"medium"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Model"})]})]}),e.last_activity&&n.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Last completed: ",c(e.last_activity)]})]});if(e.status==="processing"||e.status==="transcribing"){const z=e.slots||[];if(z.length>1,z.length>0)return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-4 bg-white border border-sky-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Pipeline Status"}),n.jsxs("div",{className:"text-xs font-medium text-sky-600",children:[z.length," active ",z.length===1?"slot":"slots"]})]}),n.jsx("div",{className:"flex items-center gap-1",children:["downloading","transcribing","diarizing","saving"].map((se,Z)=>{const b=z.some(H=>H.stage===se);return n.jsxs("div",{className:"flex items-center flex-1",children:[n.jsx("div",{className:`h-1.5 rounded-full flex-1 ${b?"bg-sky-500 animate-pulse":"bg-gray-200"}`}),Z<3&&n.jsx("div",{className:"w-1"})]},se)})}),n.jsx("div",{className:"flex justify-between mt-1",children:["Download","Transcribe","Diarize","Save"].map(se=>n.jsx("div",{className:"text-[10px] text-gray-400 text-center flex-1",children:se},se))})]}),z.map(se=>y(se)),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((C=e.worker_info)==null?void 0:C.processed_today)||0}),n.jsx("div",{className:"text-xs text-gray-500",children:"Done Today"})]}),n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((L=e.worker_info)==null?void 0:L.model)||"medium"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Model"})]})]})]});const _=e.current_episode,I=e.stage||"transcribing",te=I==="downloading",S=I==="transcribing",q=I==="diarizing",$=I==="saving",V=S||q||$,J=q||$,le=$;return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-4 bg-white border border-sky-200 rounded-lg",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"Pipeline Status"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${V?"bg-green-100":te?"bg-amber-500":"bg-gray-100"}`,children:V?n.jsx("span",{className:"text-green-600 text-sm",children:""}):te?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx("span",{className:"text-gray-400 text-sm",children:""})}),n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:`text-sm font-medium ${V?"text-gray-900":te?"text-amber-700":"text-gray-400"}`,children:V?"Audio Downloaded":"Downloading Audio"})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${J?"bg-green-100":S?"bg-sky-500":"bg-gray-100"}`,children:J?n.jsx("span",{className:"text-green-600 text-sm",children:""}):S?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx("span",{className:"text-gray-400 text-sm",children:""})}),n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:`text-sm font-medium ${J?"text-gray-900":S?"text-sky-700":"text-gray-400"}`,children:J?"Transcription Complete":"Transcribing Audio"})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${le?"bg-green-100":q?"bg-purple-500":"bg-gray-100"}`,children:le?n.jsx("span",{className:"text-green-600 text-sm",children:""}):q?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx("span",{className:"text-gray-400 text-sm",children:""})}),n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:`text-sm font-medium ${le?"text-gray-900":q?"text-purple-700":"text-gray-400"}`,children:le?"Speakers Identified":"Speaker Diarization"})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${$?"bg-green-500":"bg-gray-100"}`,children:$?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx("span",{className:"text-gray-400 text-sm",children:""})}),n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:`text-sm font-medium ${$?"text-green-700":"text-gray-400"}`,children:$?"Saving...":"Save Transcript"})})]})]})]}),_&&(S||q||te||$)&&y({episode:_,stage:I,progress:e.progress,elapsed_seconds:e.elapsed_seconds,estimated_remaining_seconds:e.estimated_remaining_seconds})]})}return n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[n.jsxs("div",{className:"text-red-700 font-semibold",children:["Unknown Status: ",e.status]}),n.jsx("pre",{className:"text-xs mt-2 text-red-600",children:JSON.stringify(e,null,2)})]})},x=(e==null?void 0:e.stage)||"idle",E=(e==null?void 0:e.slots)||[],g=E.length,k=u=>E.some(f=>f.stage===u),R=k("transcribing")?"from-sky-600 to-sky-700":k("diarizing")?"from-purple-600 to-purple-700":k("downloading")?"from-amber-500 to-amber-600":x==="diarizing"?"from-purple-600 to-purple-700":x==="transcribing"?"from-sky-600 to-sky-700":x==="downloading"?"from-amber-500 to-amber-600":"from-slate-700 to-slate-800",d=()=>{if(!e||e.status==="idle")return"Waiting for queue items";if(g>1)return`${g} slots active  pipeline processing`;switch(x){case"downloading":return"Downloading audio...";case"transcribing":return"Transcribing audio...";case"diarizing":return"Identifying speakers...";case"saving":return"Saving results...";default:return"Processing..."}};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:`bg-gradient-to-r ${R} px-6 py-4 transition-colors duration-500 cursor-pointer select-none`,onClick:()=>r(u=>!u),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:"Processing Pipeline"}),n.jsx("p",{className:"text-white/80 text-xs mt-1",children:d()})]}),n.jsx("svg",{className:`w-5 h-5 text-white/80 transition-transform ${t?"-rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})}),!t&&n.jsx("div",{className:"p-4",children:w()})]})}const ff=p.memo(mf);function tr(e){if(e==null||e===0)return"-";if(e<60)return`${Math.round(e)}s`;const t=Math.floor(e/60),r=Math.round(e%60);return r>0?`${t}m ${r}s`:`${t}m`}function xf(e){if(e==null)return"-";const t=Math.floor(e/3600),r=Math.round(e%3600/60);return t>0?`${t}h ${r}m`:`${r}m`}const gf={download:"bg-blue-100 text-blue-700",transcribe:"bg-purple-100 text-purple-700",diarize:"bg-orange-100 text-orange-700"};function hf({stats:e,currentActivity:t}){const[r,s]=p.useState(null),[l,a]=p.useState(null),[i,o]=p.useState([]),[c,m]=p.useState(!0),y=p.useRef(!1),w=async()=>{if(!y.current){y.current=!0;try{const[g,k,R]=await Promise.all([js.getPipelineStats(20),js.getPipelineHealth(),js.getRecentErrors(10)]);s(g),a(k),o(R||[])}catch(g){console.error("Failed to load pipeline stats:",g)}finally{y.current=!1,m(!1)}}};p.useEffect(()=>{w();const g=setInterval(w,6e4);return()=>clearInterval(g)},[]);const x=r==null?void 0:r.timing,E=(r==null?void 0:r.recent)||[];return n.jsxs("div",{className:"space-y-6",children:[n.jsx(pf,{stats:e}),n.jsx(ff,{activity:t}),l&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-cream-200 p-4",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Success Rate"}),n.jsxs("div",{className:`text-2xl font-bold mt-1 ${l.success_rate_last_50>=.9?"text-green-600":l.success_rate_last_50>=.7?"text-yellow-600":"text-red-600"}`,children:[(l.success_rate_last_50*100).toFixed(0),"%"]}),n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"last 50 episodes"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-cream-200 p-4",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Queue Remaining"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:l.episodes_remaining.toLocaleString()}),n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:isFinite(l.estimated_completion_days)?`~${Math.ceil(l.estimated_completion_days)}d to finish`:"rate unknown"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-cream-200 p-4",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Errors (24h)"}),n.jsx("div",{className:`text-2xl font-bold mt-1 ${l.failed_last_24h>0?"text-red-600":"text-green-600"}`,children:l.failed_last_24h}),n.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[l.unresolved_errors," unresolved total"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-cream-200 p-4",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Transcribe"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:tr(l.avg_transcribe_seconds)}),n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"per episode"})]})]}),x&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-cream-200 p-4",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Download"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:tr(x.avg_download_seconds)})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-cream-200 p-4",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Transcribe"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:tr(x.avg_transcribe_seconds)})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-cream-200 p-4",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Diarize"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:tr(x.avg_diarize_seconds)})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-cream-200 p-4",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transcribe / Hr Audio"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:tr(x.avg_transcribe_per_hour_audio)})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-cream-200 p-4",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Processed"}),n.jsxs("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:[x.total_hours_processed.toFixed(1),"h"]}),n.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[x.episodes_timed," episodes"]})]})]}),i.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-red-200",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-red-100 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-red-800",children:"Recent Pipeline Errors"}),n.jsxs("span",{className:"text-xs text-red-500",children:[i.filter(g=>!g.resolved).length," unresolved"]})]}),n.jsx("div",{className:"divide-y divide-red-50",children:i.map(g=>n.jsxs("div",{className:`px-4 py-3 ${g.resolved?"opacity-50":""}`,children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded flex-shrink-0 ${gf[g.context]||"bg-gray-100 text-gray-600"}`,children:g.context}),g.resolved&&n.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded flex-shrink-0",children:"resolved"}),n.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:g.occurred_at})]}),g.episode_title&&n.jsx("div",{className:"text-xs font-medium text-gray-700 mt-1 truncate",children:g.episode_title}),n.jsx("div",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2 font-mono",children:g.error_detail})]},g.id))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-cream-200",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Recently Completed"})}),c?n.jsx("div",{className:"p-4 text-sm text-gray-500",children:"Loading..."}):E.length===0?n.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No timed episodes yet. Durations are recorded as episodes complete the pipeline."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-cream-200 text-sm",children:[n.jsx("thead",{className:"bg-cream-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Ep#"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Title"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Audio"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Download"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Transcribe"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Diarize"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Total"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Finished"})]})}),n.jsx("tbody",{className:"divide-y divide-cream-100",children:E.map(g=>n.jsxs("tr",{className:"hover:bg-cream-50",children:[n.jsx("td",{className:"px-3 py-2 text-gray-600 whitespace-nowrap",children:g.episode_number||"-"}),n.jsx("td",{className:"px-3 py-2 text-gray-900 max-w-xs truncate",children:g.title}),n.jsx("td",{className:"px-3 py-2 text-right text-gray-600 whitespace-nowrap",children:xf(g.audio_duration)}),n.jsx("td",{className:"px-3 py-2 text-right text-gray-600 whitespace-nowrap",children:tr(g.download_duration)}),n.jsx("td",{className:"px-3 py-2 text-right text-gray-600 whitespace-nowrap",children:tr(g.transcribe_duration)}),n.jsx("td",{className:"px-3 py-2 text-right text-gray-600 whitespace-nowrap",children:tr(g.diarize_duration)}),n.jsx("td",{className:"px-3 py-2 text-right font-medium text-gray-900 whitespace-nowrap",children:tr(g.total_duration)}),n.jsx("td",{className:"px-3 py-2 text-right text-gray-400 whitespace-nowrap",children:g.completed_date?new Date(g.completed_date).toLocaleString([],{dateStyle:"short",timeStyle:"short"}):"-"})]},g.id))})]})})]})]})}const yf=p.memo(hf);function vf(e,t=!1){return window.__TAURI_INTERNALS__.transformCallback(e,t)}async function wf(e,t={},r){return window.__TAURI_INTERNALS__.invoke(e,t,r)}function ya(e,t="asset"){return window.__TAURI_INTERNALS__.convertFileSrc(e,t)}const bf=Object.freeze(Object.defineProperty({__proto__:null,convertFileSrc:ya,invoke:wf,transformCallback:vf},Symbol.toStringTag,{value:"Module"})),ri=[{id:"wrong_speaker",label:"Wrong Speaker",icon:"",description:"Speaker assignment is incorrect",needsSpeaker:!0},{id:"character_voice",label:"Character Voice",icon:"",description:"This is a character speaking",needsCharacter:!0},{id:"multiple_speakers",label:"Multiple Speakers",icon:"",description:"Overlapping speech from multiple people"},{id:"audio_issue",label:"Audio Issue",icon:"",description:"Transcription error or audio problem"},{id:"other",label:"Other",icon:"",description:"Add a note about this segment",needsNotes:!0}],iu={SPEAKER_00:{bg:"bg-blue-100",text:"text-blue-700",label:"bg-blue-200 text-blue-800",border:"border-blue-300",ring:"ring-blue-400"},SPEAKER_01:{bg:"bg-green-100",text:"text-green-700",label:"bg-green-200 text-green-800",border:"border-green-300",ring:"ring-green-400"},SPEAKER_02:{bg:"bg-orange-100",text:"text-orange-700",label:"bg-orange-200 text-orange-800",border:"border-orange-300",ring:"ring-orange-400"},SPEAKER_03:{bg:"bg-purple-100",text:"text-purple-700",label:"bg-purple-200 text-purple-800",border:"border-purple-300",ring:"ring-purple-400"},SPEAKER_04:{bg:"bg-pink-100",text:"text-pink-700",label:"bg-pink-200 text-pink-800",border:"border-pink-300",ring:"ring-pink-400"},SPEAKER_05:{bg:"bg-cyan-100",text:"text-cyan-700",label:"bg-cyan-200 text-cyan-800",border:"border-cyan-300",ring:"ring-cyan-400"},UNKNOWN:{bg:"bg-gray-100",text:"text-gray-600",label:"bg-gray-200 text-gray-600",border:"border-gray-300",ring:"ring-gray-400"}},ou=[{id:"Matt Donnelly",short:"Matt"},{id:"Paul Mattingly",short:"Paul"},{id:"Jacob Smith",short:"Jacob"}],cu=e=>iu[e]||iu.UNKNOWN,ni=e=>{if(!e||isNaN(e))return"00:00";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),s=Math.floor(e%60);return t>0?`${t}:${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${r}:${s.toString().padStart(2,"0")}`};function jf({episode:e,onClose:t}){const r=Hs(),[s,l]=p.useState(null),[a,i]=p.useState(!0),[o,c]=p.useState(null),[m,y]=p.useState(""),[w,x]=p.useState("speakers"),[E,g]=p.useState({}),[k,R]=p.useState(!1),[d,u]=p.useState(null),[f,C]=p.useState(!1),[L,z]=p.useState(null),[_,I]=p.useState({}),[te,S]=p.useState(!1),[q,$]=p.useState(!1),[V,J]=p.useState(null),[le,se]=p.useState({}),[Z,b]=p.useState({}),[H,ee]=p.useState([]),[de,ae]=p.useState(!1),[Oe,ke]=p.useState([]),[A,re]=p.useState([]),[ye,Ne]=p.useState([]),[ge,W]=p.useState([]),[N,M]=p.useState(null),[Y,Q]=p.useState(null),[oe,Ue]=p.useState(null),[ht,It]=p.useState(!1),[rt,Re]=p.useState(null),[Se,ce]=p.useState(!1),[pr,ln]=p.useState(""),[qt,Vn]=p.useState(!1),[Ut,Xt]=p.useState(0),[Vt,Wn]=p.useState(0),[Mr,Bn]=p.useState(!0),[an,Gt]=p.useState(1),Xe=p.useRef(null),Or=p.useRef(null),mr=p.useRef({});p.useEffect(()=>{e!=null&&e.id&&Jt()},[e]);const Jt=async()=>{try{i(!0),c(null);const[h,P,K,G,Ce,fe,v]=await Promise.all([be.getTranscript(e.id),nt.getVoiceLibrary().catch(()=>[]),ne.getChapterTypes().catch(()=>[]),ne.getEpisodeChapters(e.id).catch(()=>[]),ne.getFlaggedSegments(e.id).catch(()=>[]),ne.getCharacterAppearancesForEpisode(e.id).catch(()=>[]),ne.getCharacters().catch(()=>[])]);l(h),ee(P),ke(K),re(G),Ne(fe),W(v);const j={};Ce.forEach(T=>{j[T.segment_idx]=T}),b(j),h.speaker_names&&g(h.speaker_names)}catch(h){console.error("Error loading transcript:",h),c(h.message||"Failed to load transcript")}finally{i(!1)}},he=p.useMemo(()=>{if(!(s!=null&&s.segments_json))return null;try{const h=JSON.parse(s.segments_json);if(Array.isArray(h)&&h.length>0)return h}catch(h){console.error("Failed to parse segments JSON:",h)}return null},[s==null?void 0:s.segments_json]),Qn=p.useMemo(()=>{if(!he)return[];const h=new Set;return he.forEach(P=>{P.speaker&&P.speaker!=="UNKNOWN"&&h.add(P.speaker)}),Array.from(h).sort()},[he]),Hn=p.useMemo(()=>he?he.some(h=>h.speaker&&h.speaker!=="UNKNOWN"):!1,[he]),ut=h=>E[h]||h,Wt=p.useCallback(h=>{var P;if((P=h.timestamps)!=null&&P.from){const G=h.timestamps.from.replace(",",".").split(":");if(G.length===3)return parseFloat(G[0])*3600+parseFloat(G[1])*60+parseFloat(G[2])}return typeof h.start=="number"?h.start:0},[]),Nt=p.useCallback(h=>{var P;if((P=h.timestamps)!=null&&P.to){const G=h.timestamps.to.replace(",",".").split(":");if(G.length===3)return parseFloat(G[0])*3600+parseFloat(G[1])*60+parseFloat(G[2])}return typeof h.end=="number"?h.end:Wt(h)+10},[Wt]),fr=p.useMemo(()=>{if(!he||!qt)return-1;for(let h=0;h<he.length;h++){const P=Wt(he[h]),K=Nt(he[h]);if(Ut>=P&&Ut<K)return h}return-1},[he,Ut,qt,Wt,Nt]);p.useEffect(()=>{Mr&&fr>=0&&mr.current[fr]&&mr.current[fr].scrollIntoView({behavior:"smooth",block:"center"})},[fr,Mr]);const va=h=>{var P;if((P=h.timestamps)!=null&&P.from)return h.timestamps.from.replace(",",".").slice(0,8);if(typeof h.start=="number"){const K=Math.floor(h.start/60),G=Math.floor(h.start%60);return`${K.toString().padStart(2,"0")}:${G.toString().padStart(2,"0")}`}return""},ue=h=>{if(!m||!h)return h;try{const P=new RegExp(`(${m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return h.split(P).map((G,Ce)=>P.test(G)?n.jsx("mark",{className:"bg-yellow-200",children:G},Ce):G)}catch{return h}},Ir=p.useMemo(()=>{if(!he)return null;if(!m)return he;const h=m.toLowerCase();return he.filter(P=>{var K;return(K=P.text)==null?void 0:K.toLowerCase().includes(h)})},[he,m]),Kn=(h,P)=>{g(K=>({...K,[h]:P}))},zt=async()=>{try{C(!0),await be.updateSpeakerNames(e.id,E),R(!1)}catch(h){console.error("Failed to save speaker names:",h),alert("Failed to save speaker names: "+h.message)}finally{C(!1)}},xr=(h,P)=>{var K;return((K=_[P])==null?void 0:K.speaker)??h.speaker},wa=(h,P)=>{var K;return((K=_[P])==null?void 0:K.text)??h.text},Ur=h=>{z(L===h?null:h)},gr=(h,P)=>{g(K=>({...K,[h]:P})),S(!0),z(null)},on=h=>{se(P=>{const K={...P};return K[h]?delete K[h]:K[h]=!0,K}),S(!0)},Vr=async(h,P,K=null,G=null,Ce=null)=>{try{const fe=await ne.createFlaggedSegment(e.id,h,P,K,G,Ce);b(v=>({...v,[h]:{id:fe,episode_id:e.id,segment_idx:h,flag_type:P,corrected_speaker:K,character_id:G,notes:Ce,resolved:!1}})),Q(null),Ue(null)}catch(fe){console.error("Error creating flag:",fe),alert(`Failed to create flag: ${fe.message}`)}},Yn=async h=>{const P=Z[h];if(P)try{await ne.deleteFlaggedSegment(P.id),b(K=>{const G={...K};return delete G[h],G})}catch(K){console.error("Error deleting flag:",K),alert(`Failed to delete flag: ${K.message}`)}},qn=async(h,P)=>{const K=he[h];if(K)try{const G=await ne.addCharacterAppearance(P,e.id,Wt(K),Nt(K),h),Ce=await ne.getCharacterAppearancesForEpisode(e.id);Ne(Ce),Q(null),Ue(null)}catch(G){console.error("Error adding character appearance:",G),alert(`Failed to add character: ${G.message}`)}},Wr=async(h,P)=>{if(P.trim())try{const K=await ne.createCharacter(P.trim(),null,null,null);await qn(h,K);const G=await ne.getCharacters();W(G),ln("")}catch(K){console.error("Error creating character:",K),alert(`Failed to create character: ${K.message}`)}},Ys=async h=>{try{await ne.deleteCharacterAppearance(h);const P=await ne.getCharacterAppearancesForEpisode(e.id);Ne(P)}catch(P){console.error("Error removing character:",P)}},Xn=h=>ye.find(P=>P.segment_idx===h),Gn=Object.keys(Z).length;Object.values(Z).filter(h=>!h.resolved).length;const qs=async()=>{if(!de)try{ae(!0),await be.retryDiarization(e.id),await Jt()}catch(h){console.error("Error running diarization:",h),alert(`Diarization failed: ${h.message||"Unknown error"}`)}finally{ae(!1)}},Xs=async(h,P)=>{if(!he||P==null)return;const K=he[P],G=K.start??Wt(K),Ce=K.end??Nt(K);try{await ne.createEpisodeChapter(e.id,h,null,G,Ce,P,P);const fe=await ne.getEpisodeChapters(e.id);re(fe),Q(null),Ue(null)}catch(fe){console.error("Error creating chapter:",fe),alert(`Failed to create chapter: ${fe.message}`)}},Gs=async h=>{try{await ne.deleteEpisodeChapter(h);const P=await ne.getEpisodeChapters(e.id);re(P)}catch(P){console.error("Error deleting chapter:",P)}},Jn=async()=>{try{const h=await ps.getDetectedContent(e.id);Re(h)}catch(h){console.error("Error loading detected content:",h)}},ba=async(h=!0)=>{if(!ht)try{It(!0);const P=await be.analyzeEpisodeContent(e.id,h),K=[...(P.characters||[]).map(G=>({...G,content_type:"character"})),...(P.commercials||[]).map(G=>({...G,content_type:"commercial"})),...(P.bits||[]).map(G=>({...G,content_type:"bit"}))];Re(K),ce(!0)}catch(P){console.error("Error analyzing content:",P),alert(`Content analysis failed: ${P.message||"Unknown error"}`)}finally{It(!1)}};p.useEffect(()=>{e!=null&&e.id&&Jn()},[e==null?void 0:e.id]);const Js=h=>A.find(P=>P.start_segment_idx<=h&&P.end_segment_idx>=h),cn=p.useMemo(()=>{const h={};return Object.keys(le).forEach(P=>{const K=he==null?void 0:he[parseInt(P)];K!=null&&K.speaker&&(h[K.speaker]=(h[K.speaker]||0)+1)}),h},[le,he]),Zs=async()=>{if(te)try{if($(!0),await be.updateSpeakerNames(e.id,E),Object.keys(_).length>0&&await be.saveTranscriptEdits(e.id,_),Object.keys(le).length>0&&he){const h=Object.keys(le).map(P=>{const K=parseInt(P),G=he[K],Ce=E[G.speaker]||G.speaker;return{speaker:G.speaker,speakerName:Ce,startTime:Wt(G),endTime:Nt(G),text:G.text,segmentIdx:K}});try{await be.saveVoiceSamples(e.id,h),console.log(`Saved ${h.length} voice samples`)}catch(P){console.error("Failed to save voice samples:",P)}}S(!1),I({}),se({}),Jt()}catch(h){console.error("Failed to save edits:",h),alert("Failed to save edits: "+h.message)}finally{$(!1)}};p.useEffect(()=>{const h=async()=>{try{const P=await be.getAudioPath(e.id);P&&J(ya(P))}catch(P){console.error("Failed to load audio path:",P)}};e!=null&&e.id&&h()},[e]),p.useEffect(()=>{const h=Xe.current;if(!h)return;const P=()=>Xt(h.currentTime),K=()=>Wn(h.duration),G=()=>Vn(!0),Ce=()=>Vn(!1),fe=()=>{Vn(!1),Xt(0)};return h.addEventListener("timeupdate",P),h.addEventListener("durationchange",K),h.addEventListener("play",G),h.addEventListener("pause",Ce),h.addEventListener("ended",fe),()=>{h.removeEventListener("timeupdate",P),h.removeEventListener("durationchange",K),h.removeEventListener("play",G),h.removeEventListener("pause",Ce),h.removeEventListener("ended",fe)}},[V]);const el=()=>{Xe.current&&(qt?Xe.current.pause():Xe.current.play())},un=h=>{Xe.current&&(Xe.current.currentTime=h,Xt(h))},tl=h=>{var K;const P=Wt(h);un(P),qt||(K=Xe.current)==null||K.play()},ja=h=>{const P=h.currentTarget.getBoundingClientRect(),G=(h.clientX-P.left)/P.width*Vt;un(G)},rl=h=>{Xe.current&&un(Math.max(0,Math.min(Vt,Ut+h)))},ka=()=>{const h=[1,1.25,1.5,1.75,2],P=h.indexOf(an),K=h[(P+1)%h.length];Gt(K),Xe.current&&(Xe.current.playbackRate=K)},_a=(e==null?void 0:e.title)||"Transcript";return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] flex flex-col shadow-2xl",onClick:h=>h.stopPropagation(),children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 truncate",children:_a}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(s==null?void 0:s.language)&&n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:s.language}),s!=null&&s.has_diarization?n.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded text-xs flex items-center gap-1",children:[" ",s.num_speakers," speakers"]}):s&&n.jsx("button",{onClick:qs,disabled:de,className:"px-2 py-0.5 bg-orange-100 hover:bg-orange-200 text-orange-700 rounded text-xs flex items-center gap-1 transition-colors disabled:opacity-50",title:"Run speaker diarization to identify who is speaking",children:de?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"animate-spin",children:""})," Running..."]}):n.jsxs(n.Fragment,{children:[" No speaker data - ",n.jsx("span",{className:"underline",children:"Run Diarization"})]})}),n.jsx("button",{onClick:()=>ba(!0),disabled:ht,className:"px-2 py-0.5 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded text-xs flex items-center gap-1 transition-colors disabled:opacity-50",title:"Analyze transcript for characters, commercials, and bits",children:ht?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"animate-spin",children:""})," Analyzing..."]}):n.jsx(n.Fragment,{children:" Analyze Content"})}),rt&&rt.length>0&&n.jsxs("button",{onClick:()=>ce(!Se),className:`px-2 py-0.5 rounded text-xs flex items-center gap-1 transition-colors ${Se?"bg-indigo-500 text-white":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`,children:[" ",rt.length," items found"]})]})]}),n.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-2xl leading-none p-1",onClick:t,children:""})]})}),V&&n.jsxs("div",{className:"px-6 py-3 bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-purple-100",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:el,className:"w-12 h-12 flex items-center justify-center bg-purple-500 hover:bg-purple-600 text-white rounded-full shadow-md transition-colors",children:qt?n.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),n.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):n.jsx("svg",{className:"w-5 h-5 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})}),n.jsx("button",{onClick:()=>rl(-10),className:"p-2 text-gray-600 hover:text-purple-600 transition-colors",title:"Back 10s",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})})}),n.jsx("button",{onClick:()=>rl(10),className:"p-2 text-gray-600 hover:text-purple-600 transition-colors",title:"Forward 10s",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"})})}),n.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[n.jsx("span",{className:"text-xs text-gray-500 w-12 text-right font-mono",children:ni(Ut)}),n.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full cursor-pointer relative group",onClick:ja,children:n.jsx("div",{className:"h-full bg-purple-500 rounded-full relative",style:{width:`${Vt?Ut/Vt*100:0}%`},children:n.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-4 h-4 bg-purple-600 rounded-full shadow opacity-0 group-hover:opacity-100 transition-opacity"})})}),n.jsx("span",{className:"text-xs text-gray-500 w-12 font-mono",children:ni(Vt)})]}),n.jsxs("button",{onClick:ka,className:"px-2 py-1 text-xs font-medium text-gray-600 hover:text-purple-600 bg-white rounded border border-gray-200 transition-colors",title:"Playback speed",children:[an,"x"]}),n.jsx("button",{onClick:()=>Bn(!Mr),className:`p-2 rounded transition-colors ${Mr?"text-purple-600 bg-purple-100":"text-gray-400 hover:text-gray-600"}`,title:Mr?"Auto-scroll ON":"Auto-scroll OFF",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]}),n.jsx("audio",{ref:Xe,src:V,preload:"metadata"})]}),Se&&rt&&rt.length>0&&n.jsxs("div",{className:"px-6 py-3 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-100 max-h-48 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-indigo-800",children:"Detected Content"}),n.jsx("button",{onClick:()=>ce(!1),className:"text-indigo-400 hover:text-indigo-600 text-sm",children:"Hide"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:rt.map((h,P)=>n.jsxs("div",{className:`p-2 rounded-lg border cursor-pointer hover:shadow-md transition-all ${h.content_type==="character"?"bg-pink-50 border-pink-200":h.content_type==="commercial"?"bg-orange-50 border-orange-200":"bg-green-50 border-green-200"}`,onClick:()=>{h.start_time!=null&&(un(h.start_time),!qt&&Xe.current&&Xe.current.play())},title:h.raw_text||h.description,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:h.content_type==="character"?"":h.content_type==="commercial"?"":""}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm text-gray-800 truncate",children:h.name}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx("span",{className:`px-1.5 py-0.5 rounded ${h.content_type==="character"?"bg-pink-200 text-pink-700":h.content_type==="commercial"?"bg-orange-200 text-orange-700":"bg-green-200 text-green-700"}`,children:h.content_type}),h.start_time!=null&&n.jsx("span",{className:"font-mono",children:ni(h.start_time)}),h.confidence!=null&&n.jsxs("span",{children:[Math.round(h.confidence*100),"%"]})]})]})]}),h.description&&n.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1",children:h.description})]},P))})]}),n.jsx("div",{className:"px-6 py-4 flex-1 overflow-hidden min-h-0 flex flex-col",children:a?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-purple-200 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading transcript..."})]}):o?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),n.jsx("div",{className:"text-red-600 font-medium",children:o}),n.jsx("button",{onClick:Jt,className:"mt-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"Try Again"})]}):s?n.jsxs(n.Fragment,{children:[Hn&&Qn.length>0&&n.jsxs("div",{className:"mb-4 p-3 bg-purple-50 rounded-lg border border-purple-200 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Speaker Names"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-purple-600",children:"Click to preview"}),k?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>R(!1),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded transition-colors",children:"Cancel"}),n.jsx("button",{onClick:zt,disabled:f,className:"text-xs px-2 py-1 bg-purple-500 hover:bg-purple-600 text-white rounded transition-colors disabled:opacity-50",children:f?"Saving...":"Save"})]}):n.jsx("button",{onClick:()=>R(!0),className:"text-xs px-2 py-1 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded transition-colors",children:"Edit Names"})]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Qn.map(h=>{const P=cu(h),K=ut(h),G=(he==null?void 0:he.findIndex(fe=>fe.speaker===h))??-1,Ce=G>=0?he[G]:null;return n.jsxs("div",{className:`flex items-center gap-2 px-2 py-1 rounded ${P.bg} ${P.border} border cursor-pointer hover:shadow-md transition-shadow`,onClick:()=>{Ce&&!k&&(tl(Ce),mr.current[G]&&mr.current[G].scrollIntoView({behavior:"smooth",block:"center"}))},title:k?"":`Click to hear ${h}`,children:[n.jsxs("span",{className:`text-xs ${P.text}`,children:[h,":"]}),k?n.jsx("input",{type:"text",value:E[h]||"",onChange:fe=>Kn(h,fe.target.value),placeholder:"Enter name...",className:"text-sm px-2 py-0.5 border border-gray-300 rounded w-24 focus:outline-none focus:ring-1 focus:ring-purple-500",onClick:fe=>fe.stopPropagation()}):n.jsx("span",{className:`text-sm font-medium ${P.text}`,children:K!==h?K:"(unnamed)"}),!k&&n.jsx("span",{className:"text-xs opacity-50",children:""}),!k&&K===h&&H.length>0&&n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:fe=>{fe.stopPropagation(),u(d===h?null:h)},className:"px-1.5 py-0.5 text-xs bg-red-100 hover:bg-red-200 text-red-600 rounded transition-colors",children:"Fix"}),d===h&&n.jsxs("div",{className:"absolute left-0 top-full z-20 mt-1 p-2 bg-white rounded-lg shadow-xl border border-gray-200 min-w-32",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Choose speaker:"}),n.jsxs("div",{className:"flex flex-col gap-1",children:[H.map(fe=>n.jsx("button",{onClick:v=>{v.stopPropagation(),Kn(h,fe.name),u(null),S(!0)},className:"px-2 py-1 text-xs text-left bg-yellow-50 hover:bg-yellow-100 text-yellow-800 rounded transition-colors",children:fe.short_name||fe.name},fe.name)),n.jsx("button",{onClick:fe=>{fe.stopPropagation(),u(null)},className:"px-2 py-1 text-xs text-gray-500 hover:bg-gray-100 rounded transition-colors mt-1 border-t",children:"Cancel"})]})]})]}),cn[h]>0&&n.jsxs("span",{className:"px-1.5 py-0.5 bg-yellow-400 text-yellow-900 rounded text-xs font-medium",children:["",cn[h]]})]},h)})})]}),n.jsxs("div",{className:"mb-4 flex gap-3 flex-shrink-0",children:[n.jsx("input",{type:"text",placeholder:"Search in transcript...",className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",value:m,onChange:h=>y(h.target.value)}),Hn&&n.jsxs("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden",children:[n.jsx("button",{onClick:()=>x("speakers"),className:`px-3 py-2 text-sm font-medium transition-colors ${w==="speakers"?"bg-purple-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"By Speaker"}),n.jsx("button",{onClick:()=>x("plain"),className:`px-3 py-2 text-sm font-medium transition-colors ${w==="plain"?"bg-purple-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"Plain Text"})]})]}),n.jsx("div",{ref:Or,className:"bg-gray-50 p-4 rounded-lg text-sm leading-relaxed flex-1 overflow-y-auto",children:Hn&&w==="speakers"&&Ir?n.jsxs("div",{className:"space-y-3",children:[Ir.map((h,P)=>{var Pe,Be,Ge,me;const K=xr(h,P),G=wa(h,P),Ce=cu(K),fe=va(h),v=E[K]||K,j=L===P,T=((Pe=_[P])==null?void 0:Pe.speaker)||((Be=_[P])==null?void 0:Be.text),B=fr===P,ie=Z[P];return n.jsxs("div",{ref:D=>mr.current[P]=D,className:`p-3 rounded-lg transition-all ${Ce.bg} ${ie?"ring-2 ring-red-500 bg-red-50":""} ${T?"ring-2 ring-yellow-400":""} ${B?`ring-2 ${Ce.ring} shadow-md`:""}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[n.jsxs("button",{onClick:()=>Ur(P),className:`px-2 py-0.5 rounded text-xs font-medium ${Ce.label} hover:opacity-80 transition-opacity cursor-pointer`,title:"Click to change speaker",children:[v,n.jsx("span",{className:"ml-1 opacity-50",children:""})]}),fe&&n.jsx("button",{onClick:()=>tl(h),className:"text-xs text-gray-400 hover:text-purple-600 transition-colors",title:"Jump to this time",children:fe}),Z[P]&&n.jsxs("span",{className:`px-1.5 py-0.5 rounded text-xs font-medium flex items-center gap-1 cursor-pointer ${Z[P].flag_type==="wrong_speaker"?"bg-red-100 text-red-700":Z[P].flag_type==="character_voice"?"bg-pink-100 text-pink-700":Z[P].flag_type==="multiple_speakers"?"bg-orange-100 text-orange-700":Z[P].flag_type==="audio_issue"?"bg-gray-100 text-gray-700":"bg-yellow-100 text-yellow-700"}`,title:`${((Ge=ri.find(D=>D.id===Z[P].flag_type))==null?void 0:Ge.label)||"Flagged"}${Z[P].corrected_speaker?`  ${Z[P].corrected_speaker}`:""}${Z[P].notes?`: ${Z[P].notes}`:""}`,onClick:async D=>{D.stopPropagation(),await r("Remove this flag?")&&Yn(P)},children:[((me=ri.find(D=>D.id===Z[P].flag_type))==null?void 0:me.icon)||"",Z[P].corrected_speaker&&n.jsxs("span",{className:"text-[10px]",children:["",Z[P].corrected_speaker]})]}),(()=>{const D=Xn(P);return D&&n.jsxs("span",{className:"px-1.5 py-0.5 rounded text-xs font-medium bg-pink-100 text-pink-700 flex items-center gap-1 cursor-pointer",title:`Character: ${D.character_name}`,onClick:async je=>{je.stopPropagation(),await r(`Remove ${D.character_name} from this segment?`)&&Ys(D.id)},children:[" ",D.character_name]})})(),(()=>{const D=Js(P);return D&&n.jsxs("span",{className:"px-1.5 py-0.5 rounded text-xs font-medium cursor-pointer",style:{backgroundColor:D.chapter_type_color+"33",color:D.chapter_type_color},title:`${D.chapter_type_name}${D.title?": "+D.title:""} (click to remove)`,onClick:async je=>{je.stopPropagation(),await r(`Remove chapter "${D.chapter_type_name}"?`)&&Gs(D.id)},children:[D.chapter_type_icon," ",D.chapter_type_name]})})(),le[P]&&n.jsx("span",{className:"px-1.5 py-0.5 bg-yellow-400 text-yellow-900 rounded text-xs font-medium cursor-pointer",title:"Voice sample marked (click to unmark)",onClick:D=>{D.stopPropagation(),on(P)},children:""}),n.jsxs("div",{className:"relative ml-auto",children:[n.jsx("button",{onClick:D=>{D.stopPropagation(),Q(Y===P?null:P),Ue(null)},className:`p-1 rounded transition-colors ${Y===P?"bg-purple-500 text-white":"bg-gray-100 text-gray-400 hover:bg-gray-200 hover:text-gray-600"}`,title:"Segment actions",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),Y===P&&n.jsxs("div",{className:"absolute right-0 top-full z-30 mt-1 p-1 bg-white rounded-lg shadow-xl border border-gray-200 min-w-48",children:[n.jsxs("button",{onClick:D=>{D.stopPropagation(),Ue(oe==="speaker"?null:"speaker")},className:`w-full px-3 py-2 text-xs text-left rounded flex items-center gap-2 transition-colors ${oe==="speaker"?"bg-purple-100 text-purple-700":"hover:bg-gray-100"}`,children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Change Speaker"}),n.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),n.jsxs("button",{onClick:D=>{D.stopPropagation(),Ue(oe==="flag"?null:"flag")},className:`w-full px-3 py-2 text-xs text-left rounded flex items-center gap-2 transition-colors ${oe==="flag"?"bg-red-100 text-red-700":"hover:bg-gray-100"}`,children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Flag Issue"}),n.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),n.jsxs("button",{onClick:D=>{D.stopPropagation(),Ue(oe==="character"?null:"character")},className:`w-full px-3 py-2 text-xs text-left rounded flex items-center gap-2 transition-colors ${oe==="character"?"bg-pink-100 text-pink-700":"hover:bg-gray-100"}`,children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Mark Character"}),n.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),n.jsxs("button",{onClick:D=>{D.stopPropagation(),on(P),Q(null)},className:"w-full px-3 py-2 text-xs text-left rounded flex items-center gap-2 hover:bg-gray-100 transition-colors",children:[n.jsx("span",{children:le[P]?"":""}),n.jsx("span",{children:le[P]?"Unmark Audio Sample":"Mark Audio Sample"})]}),n.jsxs("button",{onClick:D=>{D.stopPropagation(),Ue(oe==="chapter"?null:"chapter")},className:`w-full px-3 py-2 text-xs text-left rounded flex items-center gap-2 transition-colors ${oe==="chapter"?"bg-indigo-100 text-indigo-700":"hover:bg-gray-100"}`,children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Mark Chapter"}),n.jsx("span",{className:"ml-auto text-gray-400",children:""})]}),oe==="speaker"&&n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100",children:[n.jsxs("div",{className:"px-3 py-1 text-[10px] text-gray-400 uppercase",children:["Assign name to ",h.speaker,":"]}),H.map(D=>n.jsxs("button",{onClick:je=>{je.stopPropagation(),gr(h.speaker,D.name),Q(null)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-yellow-50 text-yellow-800",children:[n.jsx("span",{children:""}),n.jsx("span",{children:D.short_name||D.name})]},D.name)),H.length===0&&ou.map(D=>n.jsx("button",{onClick:je=>{je.stopPropagation(),gr(h.speaker,D.id),Q(null)},className:"w-full px-3 py-1.5 text-xs text-left rounded hover:bg-purple-50 text-purple-800",children:D.short},D.id))]}),oe==="flag"&&n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100",children:[n.jsx("div",{className:"px-3 py-1 text-[10px] text-gray-400 uppercase",children:"Flag type:"}),ri.map(D=>n.jsxs("button",{onClick:je=>{if(je.stopPropagation(),D.needsSpeaker){const Zt=prompt(`Who should this be assigned to?

Current: ${h.speaker}
Enter name:`);Zt&&Vr(P,D.id,Zt,null,null)}else if(D.needsCharacter)Ue("flag-character");else if(D.needsNotes){const Zt=prompt("Add a note about this segment:");Zt&&Vr(P,D.id,null,null,Zt)}else Vr(P,D.id,null,null,null)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-red-50",title:D.description,children:[n.jsx("span",{children:D.icon}),n.jsx("span",{children:D.label})]},D.id)),Z[P]&&n.jsxs("button",{onClick:D=>{D.stopPropagation(),Yn(P)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-gray-100 text-gray-500 mt-1 border-t border-gray-100",children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Remove Flag"})]})]}),oe==="flag-character"&&n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100",children:[n.jsx("div",{className:"px-3 py-1 text-[10px] text-gray-400 uppercase",children:"Which character?"}),ge.slice(0,8).map(D=>n.jsxs("button",{onClick:je=>{je.stopPropagation(),Vr(P,"character_voice",null,D.id,null)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-pink-50 text-pink-800",children:[n.jsx("span",{children:""}),n.jsx("span",{children:D.name})]},D.id)),n.jsx("button",{onClick:D=>{D.stopPropagation(),Ue("flag")},className:"w-full px-3 py-1 text-xs text-gray-500 hover:bg-gray-100 rounded mt-1 border-t",children:" Back"})]}),oe==="character"&&n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100",children:[n.jsx("div",{className:"px-3 py-1 text-[10px] text-gray-400 uppercase",children:"Select character:"}),ge.slice(0,8).map(D=>n.jsxs("button",{onClick:je=>{je.stopPropagation(),qn(P,D.id)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-pink-50 text-pink-800",children:[n.jsx("span",{children:""}),n.jsx("span",{children:D.name}),D.appearance_count>0&&n.jsxs("span",{className:"ml-auto text-[10px] text-gray-400",children:["(",D.appearance_count,")"]})]},D.id)),n.jsx("div",{className:"px-2 py-1 mt-1 border-t border-gray-100",children:n.jsx("input",{type:"text",placeholder:"+ New character...",value:pr,onChange:D=>ln(D.target.value),onKeyDown:D=>{D.key==="Enter"&&pr.trim()&&(D.stopPropagation(),Wr(P,pr))},className:"w-full px-2 py-1 text-xs border rounded",onClick:D=>D.stopPropagation()})})]}),oe==="chapter"&&n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100",children:[n.jsx("div",{className:"px-3 py-1 text-[10px] text-gray-400 uppercase",children:"Chapter type:"}),Oe.map(D=>n.jsxs("button",{onClick:je=>{je.stopPropagation(),Xs(D.id,P)},className:"w-full px-3 py-1.5 text-xs text-left rounded flex items-center gap-2 hover:bg-indigo-50",children:[n.jsx("span",{children:D.icon}),n.jsx("span",{style:{color:D.color},children:D.name})]},D.id))]})]})]}),B&&n.jsx("span",{className:"text-xs text-purple-600 font-medium animate-pulse",children:" Playing"}),T&&n.jsx("span",{className:"text-xs text-yellow-600 font-medium",children:"edited"})]}),j&&n.jsxs("div",{className:"mb-2 p-2 bg-white rounded border shadow-lg",children:[n.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Assign name to ",n.jsx("span",{className:"font-mono font-medium",children:h.speaker}),":"]}),H.length>0&&n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"text-xs text-yellow-600 mb-1 flex items-center gap-1",children:[n.jsx("span",{children:""})," Audio Samples:"]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:H.map(D=>{var je;return n.jsxs("button",{onClick:()=>gr(h.speaker,D.name),className:"px-2 py-1 text-xs bg-yellow-100 hover:bg-yellow-200 text-yellow-800 rounded transition-colors flex items-center gap-1",children:[n.jsx("span",{className:"w-4 h-4 rounded-full bg-yellow-500 text-white text-[10px] flex items-center justify-center font-bold",children:((je=D.short_name)==null?void 0:je.charAt(0))||D.name.charAt(0)}),D.short_name||D.name.split(" ")[0]]},D.name)})})]}),H.length===0&&n.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:ou.map(D=>n.jsx("button",{onClick:()=>gr(h.speaker,D.id),className:"px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 text-purple-800 rounded transition-colors",children:D.short},D.id))}),n.jsx("div",{className:"flex gap-2",children:n.jsx("input",{type:"text",placeholder:"Or type custom name...",className:"flex-1 px-2 py-1 text-xs border rounded",onKeyDown:D=>{D.key==="Enter"&&D.target.value&&gr(h.speaker,D.target.value)}})}),n.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:['This will update all "',h.speaker,'" segments']})]}),n.jsx("p",{className:`${Ce.text} ${B?"font-medium":""}`,children:ue(G==null?void 0:G.trim())})]},P)}),Ir.length===0&&m&&n.jsx("p",{className:"text-gray-400 text-center py-4",children:"No matches found"})]}):n.jsx("div",{className:"whitespace-pre-wrap font-sans",children:ue(s.full_text||"No transcript text available")})}),te&&n.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center justify-between flex-shrink-0",children:[n.jsxs("div",{className:"text-sm text-yellow-700 flex flex-wrap items-center gap-2",children:[n.jsx("span",{children:"Unsaved changes"}),Object.keys(le).length>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-yellow-200 rounded text-xs",children:[" ",Object.keys(le).length," audio sample",Object.keys(le).length!==1?"s":""]}),Gn>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-red-200 text-red-700 rounded text-xs",children:[" ",Gn," flagged segment",Gn!==1?"s":""]})]}),n.jsx("button",{onClick:Zs,disabled:q,className:"px-3 py-1 bg-yellow-500 hover:bg-yellow-600 text-white rounded text-sm font-medium disabled:opacity-50",children:q?"Saving...":"Save Changes"})]}),s.transcript_path&&n.jsxs("div",{className:"mt-3 text-xs text-gray-400 truncate flex-shrink-0",children:[" ",s.transcript_path]})]}):n.jsx("div",{className:"text-center py-12 text-gray-400",children:"No transcript available"})}),n.jsx("div",{className:"px-6 py-3 border-t border-gray-200 flex justify-end flex-shrink-0",children:n.jsx("button",{className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors",onClick:t,children:"Close"})})]})})}const kf=e=>{if(!e)return"Unknown duration";const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?`${t}h ${r}m`:`${r}m`},_f=e=>{if(!e)return null;try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return null}};function Nf(e,t){const r=[];if((t==null?void 0:t.status)==="failed"||e.transcription_status==="failed"){const l=e.transcription_error||"",a=l.toLowerCase().includes("download"),i=(t==null?void 0:t.queue_type)==="diarize_only",o=a?"Download Failed":i?"Diarization Failed":"Failed";r.push(n.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-red-100 text-red-700 border border-red-200",title:l,children:o},"failed"))}return(t==null?void 0:t.status)==="processing"?r.push(n.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-100 text-blue-700 border border-blue-200",children:[n.jsx("span",{className:"w-2 h-2 border border-blue-300 border-t-blue-700 rounded-full animate-spin"}),"Processing"]},"processing")):(t==null?void 0:t.status)==="pending"&&r.push(n.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-yellow-100 text-yellow-700 border border-yellow-200",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse"}),"Queue #",t.priority]},"queued")),r.length===0&&(e.is_transcribed?r.push(n.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-green-100 text-green-700 border border-green-200",children:" Transcribed"},"transcribed")):e.is_downloaded?r.push(n.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-100 text-blue-700 border border-blue-200",children:"Downloaded"},"downloaded")):r.push(n.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-gray-100 text-gray-600 border border-gray-200",children:"Pending"},"pending"))),n.jsx(n.Fragment,{children:r})}function Sf({selectedEpisodeId:e,onSelectEpisode:t,onNotification:r}){const[s,l]=p.useState([]),[a,i]=p.useState(!0),[o,c]=p.useState(0),[m,y]=p.useState(""),[w,x]=p.useState({}),[E,g]=p.useState(0),[k,R]=p.useState(null),[d,u]=p.useState(null),[f,C]=p.useState([]),[L,z]=p.useState("published_date"),[_,I]=p.useState(!0),[te,S]=p.useState(!1),[q,$]=p.useState({transcribed_only:!1,in_queue_only:!1,failed_only:!1,downloaded_only:!1,not_downloaded_only:!1,diarized_only:!1,limit:50,offset:0});p.useEffect(()=>{be.getCategoryRules().then(A=>{A&&A.length>0&&C(A)}).catch(A=>console.error("Failed to load category rules:",A))},[]),p.useEffect(()=>{V()},[q,m,k,d,L,_]),p.useEffect(()=>{J();const A=setInterval(J,5e3);return()=>clearInterval(A)},[]);const V=async()=>{try{i(!0);const A=await be.getEpisodes({...q,search:m,...k?{feed_source:k}:{},...d?{category:d}:{},sort_by:L,sort_desc:_});l(A.episodes||[]),c(A.total||0)}catch(A){console.error("Error loading episodes:",A)}finally{i(!1)}},J=async()=>{var A,re,ye;try{const Ne=await ei.getQueue(),ge=Ne.queue||Ne,W={};(A=ge.processing)==null||A.forEach(M=>{var Y,Q;W[((Y=M.episode)==null?void 0:Y.id)||M.episode_id]={status:"processing",queue_type:((Q=M.queue_item)==null?void 0:Q.queue_type)||"full"}}),(re=ge.pending)==null||re.forEach((M,Y)=>{var Q,oe;W[((Q=M.episode)==null?void 0:Q.id)||M.episode_id]={status:"pending",priority:Y+1,queue_type:((oe=M.queue_item)==null?void 0:oe.queue_type)||"full"}}),(ye=ge.failed)==null||ye.forEach(M=>{var Y,Q;W[((Y=M.episode)==null?void 0:Y.id)||M.episode_id]={status:"failed",queue_type:((Q=M.queue_item)==null?void 0:Q.queue_type)||"full"}}),x(W);const N=await be.getEpisodes({failed_only:!0,limit:1,offset:0});g(N.total||0)}catch(Ne){console.error("Error loading queue:",Ne)}},le=async(A,re=0)=>{try{await ei.addToQueue(A,re),r==null||r("Added to queue","success"),J()}catch(ye){r==null||r(`Error: ${ye.message}`,"error")}},se=async A=>{try{await ei.removeFromQueue(A),r==null||r("Removed from queue","success"),J()}catch(re){r==null||r(`Error: ${re.message}`,"error")}},Z=Math.floor(q.offset/q.limit)+1,b=Math.ceil(o/q.limit),H=A=>{$(re=>({...re,offset:(A-1)*re.limit}))},ee=async()=>{try{S(!0),await be.refreshFeed(k||"patreon",!1),r==null||r("Feed synced","success"),await V()}catch(A){r==null||r(`Sync error: ${A.message}`,"error")}finally{S(!1)}},de=[{key:"published_date",label:"Date"},{key:"title",label:"Title"},{key:"episode_number",label:"Ep#"}],ae=Object.values(w),Oe={processing:ae.filter(A=>A.status==="processing").length,queueFailed:ae.filter(A=>A.status==="failed").length,transcriptionPending:ae.filter(A=>A.status==="pending"&&A.queue_type!=="diarize_only").length,diarizationPending:ae.filter(A=>A.status==="pending"&&A.queue_type==="diarize_only").length},ke=Math.max(E,Oe.queueFailed);return n.jsxs("div",{className:"h-full flex flex-col bg-white border-r border-gray-200",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Library"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:V,disabled:a,title:"Reload episodes",className:"p-1.5 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded-md transition-colors",children:n.jsx("svg",{className:`w-4 h-4 ${a?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),n.jsx("button",{onClick:ee,disabled:te,title:"Sync RSS feed",className:"p-1.5 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded-md transition-colors",children:n.jsx("svg",{className:`w-4 h-4 ${te?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})})})]})]}),n.jsx("input",{type:"text",placeholder:"Search episodes...",value:m,onChange:A=>y(A.target.value),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-3 flex-wrap",children:[n.jsx("span",{className:"text-[11px] text-gray-500 font-medium",children:"Status:"}),n.jsx("button",{onClick:()=>$(A=>({...A,transcribed_only:!A.transcribed_only,offset:0})),className:`px-2 py-1 text-xs rounded-full transition-colors ${q.transcribed_only?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Transcribed"}),n.jsx("button",{onClick:()=>$(A=>({...A,diarized_only:!A.diarized_only,offset:0})),className:`px-2 py-1 text-xs rounded-full transition-colors ${q.diarized_only?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Diarized"}),n.jsx("button",{onClick:()=>$(A=>({...A,in_queue_only:!A.in_queue_only,offset:0})),className:`px-2 py-1 text-xs rounded-full transition-colors ${q.in_queue_only?"bg-yellow-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"In Queue"}),n.jsx("button",{onClick:()=>$(A=>({...A,downloaded_only:!A.downloaded_only,not_downloaded_only:!1,offset:0})),className:`px-2 py-1 text-xs rounded-full transition-colors ${q.downloaded_only?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Downloaded"}),n.jsx("button",{onClick:()=>$(A=>({...A,not_downloaded_only:!A.not_downloaded_only,downloaded_only:!1,offset:0})),className:`px-2 py-1 text-xs rounded-full transition-colors ${q.not_downloaded_only?"bg-gray-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Not Downloaded"}),ke>0&&n.jsx("button",{onClick:()=>$(A=>({...A,failed_only:!A.failed_only,offset:0})),className:`px-2 py-1 text-xs rounded-full transition-colors ${q.failed_only?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Failed"})]}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-2 flex-wrap",children:[n.jsx("span",{className:"text-[11px] text-gray-500 font-medium",children:"Source:"}),[null,"patreon","apple"].map(A=>n.jsx("button",{onClick:()=>{R(A),$(re=>({...re,offset:0}))},className:`px-2 py-1 text-xs rounded-full transition-colors ${k===A?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:A==="patreon"?" Patreon":A==="apple"?" Apple":" All"},A||"all"))]}),f.length>0&&n.jsxs("div",{className:"flex items-center gap-1.5 mt-2 flex-wrap",children:[n.jsx("span",{className:"text-[11px] text-gray-500 font-medium",children:"Category:"}),n.jsx("button",{onClick:()=>{u(null),$(A=>({...A,offset:0}))},className:`px-2 py-1 text-xs rounded-full transition-colors ${d===null?"bg-indigo-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All"}),f.filter(A=>A.priority<99).map(A=>n.jsxs("button",{onClick:()=>{u(A.category),$(re=>({...re,offset:0}))},className:`px-2 py-1 text-xs rounded-full transition-colors ${d===A.category?"text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:d===A.category?{backgroundColor:A.color||"#6366f1"}:{},children:[A.icon," ",A.display_name]},A.category)),n.jsx("button",{onClick:()=>{u("bonus"),$(A=>({...A,offset:0}))},className:`px-2 py-1 text-xs rounded-full transition-colors ${d==="bonus"?"bg-gray-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" Bonus"})]}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-2",children:[n.jsx("span",{className:"text-[11px] text-gray-500 font-medium",children:"Sort:"}),de.map(A=>{const re=L===A.key;return n.jsxs("button",{onClick:()=>{re?I(ye=>!ye):(z(A.key),I(!0)),$(ye=>({...ye,offset:0}))},className:`px-2 py-0.5 text-[11px] rounded-full transition-colors ${re?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[A.label,re?_?" ":" ":""]},A.key)})]}),o>0&&n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsxs("div",{className:"text-[11px] text-gray-400",children:[q.offset+1,"",Math.min(q.offset+s.length,o)," of ",o]}),b>1&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>H(Z-1),disabled:Z<=1||a,className:"px-1.5 py-0.5 text-[11px] rounded bg-gray-100 text-gray-600 hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed",children:""}),n.jsxs("span",{className:"text-[11px] text-gray-500 px-1",children:[Z," / ",b]}),n.jsx("button",{onClick:()=>H(Z+1),disabled:Z>=b||a,className:"px-1.5 py-0.5 text-[11px] rounded bg-gray-100 text-gray-600 hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a&&s.length===0?n.jsxs("div",{className:"p-4 text-center text-gray-500",children:[n.jsx("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),"Loading..."]}):n.jsx("div",{className:"divide-y divide-gray-100",children:s.map(A=>{const re=w[A.id],ye=e===A.id,Ne=_f(A.published_date),ge=f.find(M=>M.category===A.category),W=ge?`${ge.icon||""} ${ge.display_name}`:null,N=A.feed_source==="patreon"?"":"";return n.jsxs("div",{onClick:()=>t==null?void 0:t(A),className:`p-3 cursor-pointer transition-colors ${ye?"bg-purple-50 border-l-4 border-purple-500":"hover:bg-gray-50 border-l-4 border-transparent"}`,children:[n.jsx("div",{className:"font-medium text-sm text-gray-800 line-clamp-2 mb-1",children:A.title}),n.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-gray-500 mb-1 flex-wrap",children:[W&&A.category!=="episode"&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"font-medium px-1 py-0 rounded text-[10px]",style:{backgroundColor:((ge==null?void 0:ge.color)||"#6366f1")+"20",color:(ge==null?void 0:ge.color)||"#6366f1"},children:W}),n.jsx("span",{children:""})]}),(A.category_number||A.episode_number)&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"font-medium text-gray-600",children:[A.category==="episode"?"Ep.":"#"," ",A.category_number||A.episode_number]}),n.jsx("span",{children:""})]}),n.jsx("span",{children:N}),Ne&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{children:Ne})]}),A.sub_series&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{className:"italic text-gray-400",children:A.sub_series})]})]}),n.jsx("div",{className:"text-[11px] text-gray-400 mb-1.5",children:kf(A.duration)}),A.description&&n.jsx("p",{className:"text-[11px] text-gray-400 line-clamp-2 mb-2 leading-relaxed",children:A.description.replace(/<[^>]*>/g,"")}),n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[Nf(A,re),A.has_diarization&&A.is_transcribed&&n.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-100 text-purple-700 border border-purple-200",children:[" ",A.num_speakers||2," speakers"]}),A.is_transcribed&&n.jsx("button",{onClick:M=>{M.stopPropagation(),t==null||t(A)},className:"px-2 py-0.5 text-[10px] font-medium bg-purple-100 text-purple-700 hover:bg-purple-200 rounded transition-colors",children:"View"}),!A.is_transcribed&&A.is_downloaded&&!re&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:M=>{M.stopPropagation(),le(A.id)},className:"px-2 py-0.5 text-[10px] font-medium bg-yellow-100 text-yellow-700 hover:bg-yellow-200 rounded transition-colors",children:"+ Queue"}),n.jsx("button",{onClick:M=>{M.stopPropagation(),le(A.id,10)},className:"px-2 py-0.5 text-[10px] font-medium bg-yellow-400 text-yellow-900 hover:bg-yellow-500 rounded transition-colors",title:"Add with high priority",children:" Priority"})]}),(re==null?void 0:re.status)==="pending"&&n.jsx("button",{onClick:M=>{M.stopPropagation(),se(A.id)},className:"px-2 py-0.5 text-[10px] font-medium bg-red-100 text-red-700 hover:bg-red-200 rounded transition-colors",children:"Remove"})]})]},A.id)})}),b>1&&n.jsxs("div",{className:"flex items-center justify-center gap-1 p-2 border-t border-gray-100 flex-shrink-0",children:[n.jsx("button",{onClick:()=>H(1),disabled:Z<=1||a,className:"px-1.5 py-1 text-[11px] rounded bg-gray-100 text-gray-600 hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed",children:""}),n.jsx("button",{onClick:()=>H(Z-1),disabled:Z<=1||a,className:"px-1.5 py-1 text-[11px] rounded bg-gray-100 text-gray-600 hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed",children:" Prev"}),n.jsxs("span",{className:"text-[11px] text-gray-500 px-2",children:[Z," / ",b]}),n.jsx("button",{onClick:()=>H(Z+1),disabled:Z>=b||a,className:"px-1.5 py-1 text-[11px] rounded bg-gray-100 text-gray-600 hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed",children:"Next "}),n.jsx("button",{onClick:()=>H(b),disabled:Z>=b||a,className:"px-1.5 py-1 text-[11px] rounded bg-gray-100 text-gray-600 hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]})]})}const si=[{id:"wrong_speaker",label:"Wrong Speaker",icon:"",needsSpeaker:!0},{id:"character_voice",label:"Character Voice",icon:"",needsCharacter:!0},{id:"multiple_speakers",label:"Multiple Speakers",icon:"",needsSpeakers:!0},{id:"audio_issue",label:"Audio Issue",icon:""},{id:"other",label:"Other",icon:"",needsNotes:!0}],uu={SPEAKER_00:{bg:"bg-blue-100",text:"text-blue-700",label:"bg-blue-200 text-blue-800",border:"border-blue-300",ring:"ring-blue-400",hex:"#dbeafe",borderHex:"#93c5fd"},SPEAKER_01:{bg:"bg-green-100",text:"text-green-700",label:"bg-green-200 text-green-800",border:"border-green-300",ring:"ring-green-400",hex:"#dcfce7",borderHex:"#86efac"},SPEAKER_02:{bg:"bg-orange-100",text:"text-orange-700",label:"bg-orange-200 text-orange-800",border:"border-orange-300",ring:"ring-orange-400",hex:"#ffedd5",borderHex:"#fdba74"},SPEAKER_03:{bg:"bg-purple-100",text:"text-purple-700",label:"bg-purple-200 text-purple-800",border:"border-purple-300",ring:"ring-purple-400",hex:"#f3e8ff",borderHex:"#c084fc"},SPEAKER_04:{bg:"bg-pink-100",text:"text-pink-700",label:"bg-pink-200 text-pink-800",border:"border-pink-300",ring:"ring-pink-400",hex:"#fce7f3",borderHex:"#f9a8d4"},SPEAKER_05:{bg:"bg-cyan-100",text:"text-cyan-700",label:"bg-cyan-200 text-cyan-800",border:"border-cyan-300",ring:"ring-cyan-400",hex:"#cffafe",borderHex:"#67e8f9"},UNKNOWN:{bg:"bg-gray-100",text:"text-gray-600",label:"bg-gray-200 text-gray-600",border:"border-gray-300",ring:"ring-gray-400",hex:"#f3f4f6",borderHex:"#d1d5db"}},du=e=>uu[e]||uu.UNKNOWN,li=e=>{if(!e||isNaN(e))return"00:00";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),s=Math.floor(e%60);return t>0?`${t}:${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${r}:${s.toString().padStart(2,"0")}`};function Cf({episode:e,onClose:t,onNotification:r,onFlaggedSegmentsChange:s,onCharacterAppearancesChange:l,onChaptersChange:a,onMarkedSamplesChange:i,onSpeakersChange:o,onSpeakerNamesChange:c,onVoiceLibraryChange:m,onAudioDropInstancesChange:y,onAudioDropsChange:w,onSegmentsChange:x,selectedSegmentIdx:E,onSelectedSegmentChange:g,onTranscriptLoaded:k}){const[R,d]=p.useState(null),[u,f]=p.useState(!0),[C,L]=p.useState(null),[z,_]=p.useState(""),[I,te]=p.useState("speakers"),[S,q]=p.useState({}),[$,V]=p.useState([]),[J,le]=p.useState([]),[se,Z]=p.useState([]),[b,H]=p.useState(!1),[ee,de]=p.useState(!1),[ae,Oe]=p.useState(!1),[ke,A]=p.useState(!1),[re,ye]=p.useState({}),[Ne,ge]=p.useState([]),[W,N]=p.useState([]),[M,Y]=p.useState({}),[Q,oe]=p.useState([]),[Ue,ht]=p.useState([]),[It,rt]=p.useState([]),[Re,Se]=p.useState(null),[ce,pr]=p.useState(""),[ln,qt]=p.useState(""),[Vn,Ut]=p.useState(null),[Xt,Vt]=p.useState([]),[Wn,Mr]=p.useState(null),[Bn,an]=p.useState(!1),[Gt,Xe]=p.useState(0),[Or,mr]=p.useState(0),[Jt,he]=p.useState(!0),[Qn,Hn]=p.useState(1),ut=p.useRef(null),Wt=p.useRef(null),Nt=p.useRef({});p.useEffect(()=>{e!=null&&e.id&&(fr(),va(),Oe(!1),A(!1))},[e==null?void 0:e.id]),p.useEffect(()=>{if(!ke||!F)return;let v;return Qs(async()=>{const{listen:j}=await import("./event-D_6HwoE_.js");return{listen:j}},[]).then(({listen:j})=>{j("transcription_complete",T=>{T.payload===(e==null?void 0:e.id)&&(A(!1),Oe(!1))}).then(T=>{v=T})}),()=>{v&&v()}},[ke,e==null?void 0:e.id]);const fr=async()=>{try{f(!0),L(null);const[v,j,T,B,ie,Pe,Be,Ge,me,D]=await Promise.all([be.getTranscript(e.id),nt.getVoiceLibrary().catch(()=>[]),ne.getChapterTypes().catch(()=>[]),ne.getEpisodeChapters(e.id).catch(()=>[]),ne.getFlaggedSegments(e.id).catch(()=>[]),ne.getCharacterAppearancesForEpisode(e.id).catch(()=>[]),ne.getCharacters().catch(()=>[]),ne.getAudioDrops().catch(()=>[]),ne.getAudioDropInstances(e.id).catch(()=>[]),nt.getEpisodeSpeakerAssignments(e.id).catch(()=>[])]);d(v),k==null||k(!0),V(j),Z(T),le(Be),oe(Ge),w==null||w(Ge),ht(me),y==null||y(me),N(B),ge(Pe),a==null||a(B),l==null||l(Pe);const je={};if(ie.forEach(yt=>{je[yt.segment_idx]=yt}),ye(je),s==null||s(je),rt(D),v.marked_samples&&Array.isArray(v.marked_samples)){const yt={};v.marked_samples.forEach(Ep=>{yt[Ep]=!0}),Y(yt),i==null||i(yt)}const Zt={...v.speaker_names||{}};for(const yt of D)yt.speaker_name?Zt[yt.diarization_label]=yt.speaker_name:yt.audio_drop_name&&(Zt[yt.diarization_label]=yt.audio_drop_name);q(Zt)}catch(v){console.error("Error loading transcript:",v),L(v.message||"Failed to load transcript"),k==null||k(!1)}finally{f(!1)}},va=async()=>{try{const v=await be.getAudioPath(e.id);v&&Mr(ya(v))}catch(v){console.error("Failed to load audio path:",v)}},ue=p.useMemo(()=>{if(!(R!=null&&R.segments_json))return null;try{const v=JSON.parse(R.segments_json);return Array.isArray(v)&&v.length>0?v:null}catch{return null}},[R==null?void 0:R.segments_json]);p.useEffect(()=>{x==null||x(ue)},[ue]);const Ir=p.useMemo(()=>{if(!ue)return[];const v=new Set;return ue.forEach(j=>{j.speaker&&j.speaker!=="UNKNOWN"&&v.add(j.speaker)}),Array.from(v).sort()},[ue]);p.useEffect(()=>{o==null||o(Ir)},[Ir]),p.useEffect(()=>{c==null||c(S)},[S]),p.useEffect(()=>{m==null||m($)},[$]);const Kn=p.useMemo(()=>(ue==null?void 0:ue.some(v=>v.speaker&&v.speaker!=="UNKNOWN"))??!1,[ue]),zt=p.useCallback(v=>{var j;if((j=v.timestamps)!=null&&j.from){const B=v.timestamps.from.replace(",",".").split(":");if(B.length===3)return parseFloat(B[0])*3600+parseFloat(B[1])*60+parseFloat(B[2])}return typeof v.start=="number"?v.start:0},[]),xr=p.useCallback(v=>{var j;if((j=v.timestamps)!=null&&j.to){const B=v.timestamps.to.replace(",",".").split(":");if(B.length===3)return parseFloat(B[0])*3600+parseFloat(B[1])*60+parseFloat(B[2])}return typeof v.end=="number"?v.end:zt(v)+10},[zt]),wa=v=>{var j;return(j=v.timestamps)!=null&&j.from?v.timestamps.from.replace(",",".").slice(0,8):typeof v.start=="number"?li(v.start):""},Ur=p.useMemo(()=>{if(!ue||Gt<=0)return-1;for(let v=0;v<ue.length;v++){const j=zt(ue[v]),T=xr(ue[v]);if(Gt>=j&&Gt<T)return v}return-1},[ue,Gt,zt,xr]);p.useEffect(()=>{Jt&&Ur>=0&&Nt.current[Ur]&&Nt.current[Ur].scrollIntoView({behavior:"smooth",block:"center"})},[Ur,Jt]),p.useEffect(()=>{const v=ut.current;if(!v)return;const j=()=>Xe(v.currentTime),T=()=>mr(v.duration),B=()=>an(!0),ie=()=>an(!1),Pe=()=>{an(!1)};return v.addEventListener("timeupdate",j),v.addEventListener("durationchange",T),v.addEventListener("play",B),v.addEventListener("pause",ie),v.addEventListener("ended",Pe),v.duration&&!isNaN(v.duration)&&mr(v.duration),()=>{v.removeEventListener("timeupdate",j),v.removeEventListener("durationchange",T),v.removeEventListener("play",B),v.removeEventListener("pause",ie),v.removeEventListener("ended",Pe)}},[Wn,u]);const gr=()=>{ut.current&&(Bn?ut.current.pause():ut.current.play().catch(v=>{console.error("Audio play failed:",v),r==null||r("Audio playback failed  file may be missing","error")}))},on=v=>{ut.current&&(ut.current.currentTime=v,Xe(v))},Vr=v=>{const j=zt(v);on(j),!Bn&&ut.current&&ut.current.play().catch(T=>console.error("Audio play failed:",T))},Yn=v=>{var j;ue!=null&&ue[v]&&(Vr(ue[v]),(j=Nt.current[v])==null||j.scrollIntoView({behavior:"smooth",block:"center"}))},qn=v=>{ut.current&&on(Math.max(0,Math.min(Or,Gt+v)))},Wr=async(v,j,T=null,B=null,ie=null,Pe=null)=>{try{const Be=Pe?JSON.stringify(Pe):null,Ge=await ne.createFlaggedSegment(e.id,v,j,T,B,ie,Be),me={...re,[v]:{id:Ge,episode_id:e.id,segment_idx:v,flag_type:j,corrected_speaker:T,character_id:B,notes:ie,speaker_ids:Be,resolved:!1}};ye(me),s==null||s(me),Se(null),Ut(null),Vt([])}catch(Be){r==null||r(`Failed to create flag: ${Be.message}`,"error")}},Ys=async v=>{const j=re[v];if(j)try{await ne.deleteFlaggedSegment(j.id);const T={...re};delete T[v],ye(T),s==null||s(T)}catch(T){r==null||r(`Failed to delete flag: ${T.message}`,"error")}},Xn=async(v,j)=>{const T=ue[v];if(T)try{await ne.addCharacterAppearance(j,e.id,zt(T),xr(T),v);const B=await ne.getCharacterAppearancesForEpisode(e.id);ge(B),l==null||l(B),Se(null)}catch(B){r==null||r(`Failed to add character: ${B.message}`,"error")}},Gn=async(v,j)=>{if(j.trim())try{const T=await ne.createCharacter(j.trim(),null,null,null);await Xn(v,T);const B=await ne.getCharacters();le(B),pr("")}catch(T){r==null||r(`Failed to create character: ${T.message}`,"error")}},qs=async v=>{try{await ne.deleteCharacterAppearance(v);const j=await ne.getCharacterAppearancesForEpisode(e.id);ge(j),l==null||l(j)}catch(j){r==null||r(`Failed to remove character: ${j.message}`,"error")}},Xs=async(v,j)=>{if(!ue||j==null)return;const T=ue[j],B=T.start??zt(T),ie=T.end??xr(T);try{await ne.createEpisodeChapter(e.id,v,null,B,ie,j,j);const Pe=await ne.getEpisodeChapters(e.id);N(Pe),a==null||a(Pe),Se(null)}catch(Pe){r==null||r(`Failed to create chapter: ${Pe.message}`,"error")}},Gs=async v=>{try{await ne.deleteEpisodeChapter(v);const j=await ne.getEpisodeChapters(e.id);N(j),a==null||a(j)}catch(j){r==null||r(`Failed to delete chapter: ${j.message}`,"error")}},Jn=async(v,j)=>{const T=ue[v];if(T)try{await ne.addAudioDropInstance(j,e.id,v,zt(T),xr(T));const B=await ne.getAudioDropInstances(e.id);ht(B),y==null||y(B),Se(null)}catch(B){r==null||r(`Failed to add sound bite: ${B.message}`,"error")}},ba=async(v,j)=>{if(j.trim())try{const T=await ne.createAudioDrop(j.trim());await Jn(v,T);const B=await ne.getAudioDrops();oe(B),qt("")}catch(T){r==null||r(`Failed to create sound bite: ${T.message}`,"error")}},Js=async v=>{try{await ne.deleteAudioDropInstance(v);const j=await ne.getAudioDropInstances(e.id);ht(j),y==null||y(j)}catch(j){r==null||r(`Failed to remove sound bite: ${j.message}`,"error")}},cn=v=>{const j={...M};j[v]?delete j[v]:j[v]=!0,Y(j),i==null||i(j),H(!0)},Zs=(v,j)=>{q(T=>({...T,[v]:j})),H(!0),Se(null)},el=async(v,j)=>{q(T=>({...T,[v]:j.name})),Se(null);try{await nt.linkEpisodeAudioDrop(e.id,v,j.id),rt(T=>[...T.filter(B=>B.diarization_label!==v),{diarization_label:v,audio_drop_id:j.id,audio_drop_name:j.name,speaker_id:null,speaker_name:null}])}catch(T){console.error("Failed to link audio drop:",T)}},un=async v=>{q(j=>{const T={...j};return delete T[v],T}),Se(null),H(!0),rt(j=>j.filter(T=>T.diarization_label!==v));try{await nt.unlinkEpisodeSpeaker(e.id,v)}catch(j){console.error("Failed to unlink speaker:",j)}},tl=p.useCallback(v=>It.some(j=>j.diarization_label===v&&j.audio_drop_id),[It]),ja=v=>Ne.find(j=>j.segment_idx===v),rl=v=>W.find(j=>j.start_segment_idx<=v&&j.end_segment_idx>=v),ka=v=>Ue.filter(j=>j.segment_idx===v),_a=v=>{const j=Ue.filter(B=>B.audio_drop_id===v.audio_drop_id);return{position:j.findIndex(B=>B.id===v.id)+1,total:j.length}},h=p.useMemo(()=>{if(!ue)return null;if(!z)return ue;const v=z.toLowerCase();return ue.filter(j=>{var T;return(T=j.text)==null?void 0:T.toLowerCase().includes(v)})},[ue,z]),P=async()=>{if(b)try{de(!0);const v=Object.keys(M).map(j=>parseInt(j));if(await be.updateSpeakerNames(e.id,S,v.length>0?v:null),Object.keys(M).length>0&&ue){const j=Object.keys(M).map(T=>{const B=parseInt(T),ie=ue[B];return{speaker:ie.speaker,speakerName:S[ie.speaker]||ie.speaker,startTime:zt(ie),endTime:xr(ie),text:ie.text,segmentIdx:B}});await be.saveVoiceSamples(e.id,j).catch(()=>{})}H(!1),r==null||r("Changes saved","success")}catch(v){r==null||r(`Failed to save: ${v.message}`,"error")}finally{de(!1)}},K=p.useCallback(v=>{if(!ue)return;const j=ue.findIndex(T=>T.speaker===v);j>=0&&Yn(j)},[ue]);p.useEffect(()=>{const v=j=>{var T,B;if(!(j.target.tagName==="INPUT"||j.target.tagName==="TEXTAREA"||j.target.isContentEditable)&&ue)switch(j.key){case"j":case"J":{j.preventDefault();const ie=E!=null?Math.min(E+1,ue.length-1):0;g==null||g(ie),(T=Nt.current[ie])==null||T.scrollIntoView({behavior:"smooth",block:"center"});break}case"k":case"K":{j.preventDefault();const ie=E!=null?Math.max(E-1,0):0;g==null||g(ie),(B=Nt.current[ie])==null||B.scrollIntoView({behavior:"smooth",block:"center"});break}case" ":{j.preventDefault(),gr();break}case"f":case"F":{E!=null&&(j.preventDefault(),Se(Re==="flag"?null:"flag"));break}case"c":case"C":{E!=null&&(j.preventDefault(),Se(Re==="character"?null:"character"));break}case"h":case"H":{E!=null&&(j.preventDefault(),Se(Re==="chapter"?null:"chapter"));break}case"Escape":{j.preventDefault(),Re?Se(null):g==null||g(null);break}}};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[ue,E,Re]),p.useEffect(()=>(typeof window<"u"&&(window.__transcriptEditorSeekToSegment=Yn,window.__transcriptEditorSeekToSpeaker=K,window.__transcriptEditorAssignSpeakerName=Zs,window.__transcriptEditorAddAudioDrop=Jn,window.__transcriptEditorCreateFlag=Wr,window.__transcriptEditorAddCharacter=Xn,window.__transcriptEditorCreateChapter=Xs,window.__transcriptEditorDeleteFlag=Ys,window.__transcriptEditorRemoveCharacter=qs,window.__transcriptEditorDeleteChapter=Gs,window.__transcriptEditorToggleVoiceSample=cn,window.__transcriptEditorRemoveAudioDrop=Js,window.__transcriptEditorAssignAudioDrop=el),()=>{typeof window<"u"&&(delete window.__transcriptEditorSeekToSegment,delete window.__transcriptEditorSeekToSpeaker,delete window.__transcriptEditorAssignSpeakerName,delete window.__transcriptEditorAddAudioDrop,delete window.__transcriptEditorCreateFlag,delete window.__transcriptEditorAddCharacter,delete window.__transcriptEditorCreateChapter,delete window.__transcriptEditorDeleteFlag,delete window.__transcriptEditorRemoveCharacter,delete window.__transcriptEditorDeleteChapter,delete window.__transcriptEditorToggleVoiceSample,delete window.__transcriptEditorRemoveAudioDrop,delete window.__transcriptEditorAssignAudioDrop)}));const G=(v,j)=>{if(v==="flag")return Vn===j?n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Select speakers present"}),Ir.map(T=>{const B=S[T]||T,ie=Xt.includes(T),Pe=du(T);return n.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 text-sm rounded hover:bg-gray-50 cursor-pointer",onClick:Be=>Be.stopPropagation(),children:[n.jsx("input",{type:"checkbox",checked:ie,onChange:Be=>{Be.stopPropagation(),Vt(Ge=>ie?Ge.filter(me=>me!==T):[...Ge,T])},className:"rounded"}),n.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Pe.hex}}),n.jsx("span",{children:B})]},T)}),n.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-100",children:[n.jsxs("button",{onClick:T=>{T.stopPropagation(),Xt.length>=2&&Wr(j,"multiple_speakers",null,null,null,Xt)},disabled:Xt.length<2,className:"px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:["Save (",Xt.length," selected)"]}),n.jsx("button",{onClick:T=>{T.stopPropagation(),Ut(null),Vt([])},className:"px-3 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200",children:"Cancel"})]})]}):n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Flag type"}),si.map(T=>n.jsxs("button",{onClick:B=>{if(B.stopPropagation(),T.needsSpeaker){const ie=prompt("Who should this be?");ie&&Wr(j,T.id,ie)}else if(T.needsSpeakers)Ut(j),Vt([]);else if(T.needsNotes){const ie=prompt("Add a note:");ie&&Wr(j,T.id,null,null,ie)}else Wr(j,T.id)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-red-50 flex items-center gap-2",children:[n.jsx("span",{children:T.icon})," ",T.label]},T.id))]});if(v==="character")return n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Character"}),J.slice(0,8).map(T=>n.jsxs("button",{onClick:B=>{B.stopPropagation(),Xn(j,T.id)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-pink-50 text-pink-800 flex items-center gap-2",children:[n.jsx("span",{children:""})," ",T.name]},T.id)),n.jsx("input",{type:"text",placeholder:"+ New character...",value:ce,onChange:T=>pr(T.target.value),onKeyDown:T=>{T.key==="Enter"&&ce.trim()&&Gn(j,ce)},className:"w-full mt-1 px-2 py-1.5 text-sm border rounded",onClick:T=>T.stopPropagation()})]});if(v==="chapter")return n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Chapter type"}),se.map(T=>n.jsxs("button",{onClick:B=>{B.stopPropagation(),Xs(T.id,j)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-indigo-50 flex items-center gap-2",children:[n.jsx("span",{children:T.icon})," ",n.jsx("span",{style:{color:T.color},children:T.name})]},T.id))]});if(v==="speaker"){const T=ue==null?void 0:ue[j];return T?n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm max-h-64 overflow-y-auto",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Assign to speaker"}),$.map(B=>n.jsxs("button",{onClick:ie=>{ie.stopPropagation(),Zs(T.speaker,B.name)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-yellow-50 text-yellow-800 flex items-center gap-2",children:[n.jsx("span",{children:""})," ",B.short_name||B.name]},B.name)),Q.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 mt-2 px-1 border-t border-gray-100 pt-2",children:"Assign to sound bite"}),Q.map(B=>n.jsxs("button",{onClick:ie=>{ie.stopPropagation(),el(T.speaker,B)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-teal-50 text-teal-800 flex items-center gap-2",children:[n.jsx("span",{children:""})," ",B.name]},B.id))]}),S[T.speaker]&&n.jsx(n.Fragment,{children:n.jsx("div",{className:"border-t border-gray-100 mt-2 pt-2",children:n.jsxs("button",{onClick:B=>{B.stopPropagation(),un(T.speaker)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-red-50 text-red-600 flex items-center gap-2",children:[n.jsx("span",{children:""})," Unassign"]})})})]}):null}return v==="audiodrop"?n.jsxs("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 px-1",children:"Sound bite"}),Q.map(T=>n.jsxs("button",{onClick:B=>{B.stopPropagation(),Jn(j,T.id)},className:"w-full px-2 py-1.5 text-sm text-left rounded hover:bg-teal-50 text-teal-800 flex items-center gap-2",children:[n.jsx("span",{children:""})," ",T.name]},T.id)),n.jsx("input",{type:"text",placeholder:"+ New sound bite...",value:ln,onChange:T=>qt(T.target.value),onKeyDown:T=>{T.key==="Enter"&&ln.trim()&&ba(j,ln)},className:"w-full mt-1 px-2 py-1.5 text-sm border rounded",onClick:T=>T.stopPropagation()})]}):null},Ce=v=>{var Be,Ge;const j=re[v],T=ja(v),B=rl(v),ie=ka(v),Pe=M[v];return!j&&!T&&!B&&ie.length===0&&!Pe?null:n.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2 pt-2 border-t border-gray-200/50",children:[j&&n.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium cursor-pointer ${j.flag_type==="wrong_speaker"?"bg-red-100 text-red-700":j.flag_type==="character_voice"?"bg-pink-100 text-pink-700":"bg-yellow-100 text-yellow-700"}`,onClick:me=>{me.stopPropagation(),Ys(v)},title:"Click to remove flag",children:[((Be=si.find(me=>me.id===j.flag_type))==null?void 0:Be.icon)||""," ",j.flag_type==="multiple_speakers"&&j.speaker_ids?(()=>{try{return`Multiple: ${JSON.parse(j.speaker_ids).map(je=>S[je]||je).join(", ")}`}catch{return"Multiple Speakers"}})():((Ge=si.find(me=>me.id===j.flag_type))==null?void 0:Ge.label)||"Flag"]}),T&&n.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-pink-100 text-pink-700 cursor-pointer",onClick:me=>{me.stopPropagation(),qs(T.id)},title:"Click to remove",children:[" ",T.character_name]}),B&&n.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium cursor-pointer",style:{backgroundColor:B.chapter_type_color+"33",color:B.chapter_type_color},onClick:me=>{me.stopPropagation(),Gs(B.id)},title:"Click to remove",children:[B.chapter_type_icon," ",B.chapter_type_name]}),ie.map(me=>{const D=_a(me);return n.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-teal-100 text-teal-700 cursor-pointer",onClick:je=>{je.stopPropagation(),Js(me.id)},title:`${me.audio_drop_name}${D.total>1?` (${D.position} of ${D.total})`:""}  click to remove`,children:[" ",me.audio_drop_name]},me.id)}),Pe&&n.jsx("span",{className:"px-2 py-1 bg-yellow-400 text-yellow-900 rounded text-xs font-medium cursor-pointer",onClick:me=>{me.stopPropagation(),cn(v)},children:" Sample"})]})},fe=v=>E!==v?null:n.jsx("div",{className:"overflow-hidden transition-all duration-200 ease-in-out",style:{maxHeight:E===v?"500px":"0"},children:n.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:[n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{onClick:j=>{j.stopPropagation(),Se(Re==="flag"?null:"flag")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${Re==="flag"?"bg-red-100 text-red-700 ring-1 ring-red-300":"bg-white text-gray-600 hover:bg-red-50 border border-gray-200"}`,children:" Flag"}),n.jsx("button",{onClick:j=>{j.stopPropagation(),Se(Re==="character"?null:"character")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${Re==="character"?"bg-pink-100 text-pink-700 ring-1 ring-pink-300":"bg-white text-gray-600 hover:bg-pink-50 border border-gray-200"}`,children:" Character"}),n.jsx("button",{onClick:j=>{j.stopPropagation(),Se(Re==="chapter"?null:"chapter")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${Re==="chapter"?"bg-indigo-100 text-indigo-700 ring-1 ring-indigo-300":"bg-white text-gray-600 hover:bg-indigo-50 border border-gray-200"}`,children:" Chapter"}),n.jsx("button",{onClick:j=>{j.stopPropagation(),Se(Re==="audiodrop"?null:"audiodrop")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${Re==="audiodrop"?"bg-teal-100 text-teal-700 ring-1 ring-teal-300":"bg-white text-gray-600 hover:bg-teal-50 border border-gray-200"}`,children:" Drop"}),n.jsx("button",{onClick:j=>{j.stopPropagation(),cn(v)},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${M[v]?"bg-yellow-300 text-yellow-900 ring-1 ring-yellow-400":"bg-white text-gray-600 hover:bg-yellow-50 border border-gray-200"}`,children:M[v]?" Unmark":" Sample"}),n.jsx("button",{onClick:j=>{j.stopPropagation(),Se(Re==="speaker"?null:"speaker")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${Re==="speaker"?"bg-purple-100 text-purple-700 ring-1 ring-purple-300":"bg-white text-gray-600 hover:bg-purple-50 border border-gray-200"}`,children:" Speaker"})]}),Re&&G(Re,v)]})});if(!e)return n.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("p",{children:"Select an episode to view transcript"})]})});if(u)return n.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("style",{children:`
            @keyframes scoop-drop {
              0% { transform: translateY(-30px); opacity: 0; }
              40% { transform: translateY(0px); opacity: 1; }
              60% { transform: translateY(0px); opacity: 1; }
              100% { transform: translateY(30px) scale(0.3); opacity: 0; }
            }
            .scoop-anim { animation: scoop-drop 2s ease-in-out infinite; }
          `}),n.jsxs("div",{className:"relative mx-auto mb-6 w-20 h-28",children:[n.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-14 h-14 rounded-full bg-pink-400 shadow-md scoop-anim",style:{animationDelay:"0s",zIndex:3}}),n.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-14 h-14 rounded-full bg-amber-100 shadow-md scoop-anim",style:{animationDelay:"0.6s",zIndex:2}}),n.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-14 h-14 rounded-full bg-amber-800 shadow-md scoop-anim",style:{animationDelay:"1.2s",zIndex:1}}),n.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2",style:{width:0,height:0,borderLeft:"24px solid transparent",borderRight:"24px solid transparent",borderTop:"40px solid #d97706",zIndex:4}}),n.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2",style:{width:0,height:0,borderLeft:"20px solid transparent",borderRight:"20px solid transparent",borderTop:"34px solid #b45309",zIndex:4,opacity:.3}})]}),n.jsx("div",{className:"text-gray-500 text-sm font-medium",children:"Scooping up transcript..."}),n.jsx("div",{className:"text-gray-400 text-xs mt-1 max-w-xs mx-auto truncate",children:e==null?void 0:e.title})]})});if(C){const v=(e==null?void 0:e.transcription_status)==="failed",j=e==null?void 0:e.transcription_error,T=j==null?void 0:j.toLowerCase().includes("download");return n.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center max-w-md px-6",children:[n.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),n.jsx("div",{className:"text-red-600 font-medium mb-2",children:"Failed to load transcript"}),v&&j&&n.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-left",children:[n.jsx("div",{className:"text-xs font-medium text-red-700 mb-1",children:T?"Download Error":"Processing Error"}),n.jsx("div",{className:"text-xs text-red-600",children:j}),T&&n.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"The audio file could not be downloaded from the RSS feed. This usually means the CDN link has expired or the file is temporarily unavailable."})]}),!v&&n.jsx("div",{className:"text-sm text-gray-500 mb-4",children:C}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[T&&n.jsx("button",{onClick:async()=>{try{await be.downloadEpisode(e.id),r==null||r("Download started - episode will be queued when complete","success")}catch(B){r==null||r(`Download failed: ${B.message}`,"error")}},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium",children:"Retry Download"}),n.jsx("button",{onClick:fr,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"Try Again"})]})]})})}return R?n.jsxs("div",{className:"h-full flex flex-col bg-white",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[t&&n.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors flex-shrink-0",title:"Close transcript and return to library",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),n.jsx("h2",{className:"text-lg font-bold text-gray-800 truncate",children:e.title})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500 flex-wrap",children:[(R==null?void 0:R.language)&&n.jsx("span",{className:"px-2 py-0.5 bg-gray-100 rounded text-xs",children:R.language}),(R==null?void 0:R.has_diarization)&&n.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded text-xs",children:[" ",R.num_speakers," speakers"]}),W.length>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded text-xs",children:[" ",W.length," chapters"]}),Ne.length>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-pink-100 text-pink-700 rounded text-xs",children:[" ",Ne.length," characters"]}),Ue.length>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-teal-100 text-teal-700 rounded text-xs",children:[" ",Ue.length," drops"]}),Object.keys(re).length>0&&n.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded text-xs",children:[" ",Object.keys(re).length," flags"]}),e.is_transcribed&&n.jsx("button",{disabled:ae||ke,onClick:async()=>{Oe(!0);try{await be.reprocessDiarization(e.id),A(!0),r==null||r("Episode locked for re-diarization  editing disabled until complete","success")}catch(v){r==null||r(`Failed to queue re-diarization: ${v.message}`,"error"),Oe(!1)}},className:`px-2.5 py-1 rounded text-xs font-medium transition-all duration-300 ${ae?"bg-green-100 text-green-700 border border-green-300 cursor-not-allowed":"bg-orange-100 text-orange-700 border border-orange-300 hover:bg-orange-200 cursor-pointer"}`,title:"Reprocess diarization using speaker correction flags as hints",children:ae?" Queued for Diarization":" Reprocess Diarization"}),b&&n.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded text-xs",children:"Unsaved changes"})]})]}),ke&&n.jsxs("div",{className:"px-4 py-3 bg-orange-50 border-b border-orange-200 flex items-center gap-3 flex-shrink-0",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-semibold text-orange-800",children:"Re-diarization in progress"}),n.jsx("span",{className:"text-xs text-orange-600 ml-2",children:"Editing locked until the worker finishes this episode"})]})]}),Wn&&n.jsxs("div",{className:"px-4 py-3 bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-purple-100 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:gr,className:"w-10 h-10 flex items-center justify-center bg-purple-500 hover:bg-purple-600 text-white rounded-full shadow-md transition-colors",children:Bn?n.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),n.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):n.jsx("svg",{className:"w-4 h-4 ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})}),n.jsx("button",{onClick:()=>qn(-10),className:"p-2 text-gray-600 hover:text-purple-600",children:"-10s"}),n.jsx("button",{onClick:()=>qn(10),className:"p-2 text-gray-600 hover:text-purple-600",children:"+10s"}),n.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-gray-500 w-12 text-right font-mono",children:li(Gt)}),n.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full cursor-pointer",onClick:v=>{const j=v.currentTarget.getBoundingClientRect(),T=(v.clientX-j.left)/j.width;on(T*Or)},children:n.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${Or?Gt/Or*100:0}%`}})}),n.jsx("span",{className:"text-xs text-gray-500 w-12 font-mono",children:li(Or)})]}),n.jsxs("button",{onClick:()=>{const v=[1,1.25,1.5,1.75,2],j=v[(v.indexOf(Qn)+1)%v.length];Hn(j),ut.current&&(ut.current.playbackRate=j)},className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white rounded border",children:[Qn,"x"]}),n.jsx("button",{onClick:()=>he(!Jt),className:`p-2 rounded ${Jt?"text-purple-600 bg-purple-100":"text-gray-400"}`,title:"Auto-scroll",children:""})]}),n.jsx("audio",{ref:ut,src:Wn,preload:"metadata"})]}),n.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex gap-3 flex-shrink-0 items-center",children:[n.jsx("input",{type:"text",placeholder:"Search in transcript...",className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",value:z,onChange:v=>_(v.target.value)}),Kn&&n.jsxs("div",{className:"flex rounded-lg border border-gray-200 overflow-hidden",children:[n.jsx("button",{onClick:()=>te("speakers"),className:`px-3 py-2 text-sm ${I==="speakers"?"bg-purple-500 text-white":"bg-white text-gray-600"}`,children:"By Speaker"}),n.jsx("button",{onClick:()=>te("plain"),className:`px-3 py-2 text-sm ${I==="plain"?"bg-purple-500 text-white":"bg-white text-gray-600"}`,children:"Plain"})]}),b&&n.jsx("button",{onClick:P,disabled:ee||ke,className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg text-sm font-medium disabled:opacity-50",children:ee?"Saving...":"Save"})]}),n.jsx("div",{className:"px-4 py-1.5 border-b border-gray-100 bg-gray-50/50 flex-shrink-0",children:n.jsxs("span",{className:"text-[10px] text-gray-400",children:[n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"J"}),"/",n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"K"})," navigate",n.jsx("span",{className:"mx-2",children:""}),n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"Space"})," play/pause",n.jsx("span",{className:"mx-2",children:""}),n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"F"})," flag",n.jsx("span",{className:"mx-2",children:""}),n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"C"})," character",n.jsx("span",{className:"mx-2",children:""}),n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"H"})," chapter",n.jsx("span",{className:"mx-2",children:""}),n.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-[10px]",children:"Esc"})," close"]})}),n.jsx("div",{ref:Wt,className:"flex-1 overflow-y-auto p-4",children:Kn&&I==="speakers"&&h?n.jsx("div",{className:"space-y-3",children:h.map((v,j)=>{var Ge;const T=du(v.speaker),B=S[v.speaker]||v.speaker,ie=Ur===j,Pe=E===j,Be=re[j];return n.jsxs("div",{ref:me=>Nt.current[j]=me,className:`group rounded-lg overflow-hidden transition-all cursor-pointer border ${Pe?"ring-2 ring-purple-500 shadow-md border-purple-300":ie?`ring-2 ${T.ring} shadow-md border-transparent`:Be?"ring-1 ring-red-300 border-red-200":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,onClick:()=>{g==null||g(Pe?null:j),Se(null)},children:[n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"w-[100px] flex-shrink-0 flex items-start justify-center pt-4 pb-3",style:{backgroundColor:T.hex},onClick:me=>{me.stopPropagation(),g==null||g(j),Se("speaker")},children:n.jsxs("span",{className:"text-xs font-semibold text-gray-700 text-center leading-tight cursor-pointer hover:underline",children:[tl(v.speaker)&&n.jsx("span",{title:"Sound bite",children:" "}),B]})}),n.jsxs("div",{className:"flex-1 min-w-0 px-5 py-4",style:{borderLeft:`4px solid ${T.borderHex}`},children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("button",{onClick:me=>{me.stopPropagation(),Vr(v)},className:"text-xs text-gray-400 hover:text-purple-600 font-mono",children:wa(v)}),ie&&n.jsx("span",{className:"text-xs text-purple-600 font-medium animate-pulse",children:" NOW"})]}),n.jsx("p",{className:`text-gray-700 leading-relaxed ${ie?"font-medium":""}`,children:(Ge=v.text)==null?void 0:Ge.trim()}),Ce(j)]})]}),fe(j)]},j)})}):n.jsx("div",{className:"whitespace-pre-wrap",children:R.full_text||"No transcript text available"})})]}):n.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("p",{children:"No transcript available for this episode"})]})})}const Ef=[{id:"wrong_speaker",label:"Wrong Speaker",icon:"",color:"red"},{id:"character_voice",label:"Character Voice",icon:"",color:"pink"},{id:"multiple_speakers",label:"Multiple Speakers",icon:"",color:"orange"},{id:"audio_issue",label:"Audio Issue",icon:"",color:"gray"},{id:"other",label:"Other",icon:"",color:"yellow"}];function mn({open:e,onClick:t,icon:r,label:s,count:l,color:a="gray"}){return n.jsxs("button",{onClick:t,className:`w-full px-3 py-2 flex items-center justify-between text-xs font-medium transition-colors border-b border-gray-100 ${e?`bg-${a}-50 text-${a}-700`:"bg-white text-gray-600 hover:bg-gray-50"}`,children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"text-sm",children:r}),n.jsx("span",{children:s}),l>0&&n.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded-full text-[10px] ${e?`bg-${a}-100 text-${a}-700`:"bg-gray-100 text-gray-500"}`,children:l})]}),n.jsx("svg",{className:`w-3.5 h-3.5 transition-transform ${e?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}const Tf={SPEAKER_00:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},SPEAKER_01:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},SPEAKER_02:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300"},SPEAKER_03:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},SPEAKER_04:{bg:"bg-pink-100",text:"text-pink-700",border:"border-pink-300"},SPEAKER_05:{bg:"bg-cyan-100",text:"text-cyan-700",border:"border-cyan-300"}},Pf=e=>Tf[e]||{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"};function $f({episode:e,flaggedSegments:t={},characterAppearances:r=[],episodeChapters:s=[],characters:l=[],chapterTypes:a=[],voiceLibrary:i=[],markedSamples:o={},speakers:c=[],speakerNames:m={},audioDropInstances:y=[],audioDrops:w=[],segments:x=null,selectedSegmentIdx:E=null,onCreateFlag:g,onDeleteFlag:k,onAddCharacter:R,onRemoveCharacter:d,onCreateChapter:u,onDeleteChapter:f,onToggleVoiceSample:C,onSeekToSegment:L,onAssignSpeakerName:z,onAssignAudioDrop:_,onSeekToSpeaker:I,onRemoveAudioDrop:te}){const[S,q]=p.useState({flags:!0}),[$,V]=p.useState(!1),[J,le]=p.useState(null),[se,Z]=p.useState(null),[b,H]=p.useState(!1),[ee,de]=p.useState(!1),ae=W=>{q(N=>({...N,[W]:!N[W]}))};p.useEffect(()=>{if(!(e!=null&&e.id)){Z(null);return}let W=!1;return(async()=>{H(!0);try{const M=await ti.getWikiEpisodeMeta(e.id);W||Z(M)}catch(M){console.error("Failed to load wiki meta:",M)}finally{W||H(!1)}})(),()=>{W=!0}},[e==null?void 0:e.id]);const Oe=async()=>{if(!(!(e!=null&&e.category_number)&&!(e!=null&&e.episode_number))){de(!0);try{const W=e.category_number||e.episode_number,N=await ti.syncWikiEpisode(W),M=await ti.getWikiEpisodeMeta(e.id);Z(M)}catch(W){console.error("Wiki sync failed:",W)}finally{de(!1)}}},ke=Object.keys(t).length,A=r.length,re=s.length,ye=Object.keys(o).length,Ne=c.length,ge=y.length;return $?n.jsxs("div",{className:"w-12 h-full bg-gray-50 border-l border-gray-200 flex flex-col items-center py-4",children:[n.jsx("button",{onClick:()=>V(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Expand panel",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),n.jsxs("div",{className:"mt-4 space-y-3",children:[ke>0&&n.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-xs font-medium",children:ke}),A>0&&n.jsx("div",{className:"w-8 h-8 rounded-full bg-pink-100 text-pink-600 flex items-center justify-center text-xs font-medium",children:A}),re>0&&n.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs font-medium",children:re}),ge>0&&n.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center text-xs font-medium",children:ge})]})]}):n.jsxs("div",{className:"w-72 h-full bg-gray-50 border-l border-gray-200 flex flex-col",children:[n.jsxs("div",{className:"p-3 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[n.jsx("h3",{className:"font-semibold text-gray-700 text-sm",children:"Properties"}),n.jsx("button",{onClick:()=>V(!0),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Collapse panel",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),Ne>0&&n.jsxs("div",{className:"p-3 border-b border-gray-200 bg-purple-50 flex-shrink-0",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("span",{className:"text-xs font-medium text-purple-800 flex items-center gap-1",children:[" ",Ne," speakers"]})}),n.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(W=>{const N=Pf(W),M=m[W],Y=J===W;return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>I==null?void 0:I(W),className:`px-2 py-1 rounded text-xs font-medium flex items-center gap-1 ${N.bg} ${N.text} ${N.border} border hover:shadow-sm transition-all`,title:`Click to hear ${W}`,children:[M&&w.some(Q=>Q.name===M)&&n.jsx("span",{title:"Sound bite",children:" "}),M||W,n.jsx("span",{className:"opacity-50 text-[10px]",children:""})]}),!M&&i.length>0&&n.jsx("button",{onClick:Q=>{Q.stopPropagation(),le(Y?null:W)},className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white rounded-full text-[10px] font-bold hover:bg-red-600",title:"Assign name",children:"!"}),Y&&n.jsxs("div",{className:"absolute left-0 top-full z-20 mt-1 p-2 bg-white rounded-lg shadow-xl border border-gray-200 min-w-32 max-h-48 overflow-y-auto",children:[n.jsx("div",{className:"text-[10px] text-gray-500 mb-1",children:"Speaker:"}),i.map(Q=>n.jsxs("button",{onClick:oe=>{oe.stopPropagation(),z==null||z(W,Q.name),le(null)},className:"block w-full px-2 py-1 text-xs text-left hover:bg-yellow-50 text-yellow-800 rounded",children:[" ",Q.short_name||Q.name]},Q.name)),w.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-[10px] text-gray-500 mb-1 mt-2 border-t border-gray-100 pt-1",children:"Sound Bite:"}),w.map(Q=>n.jsxs("button",{onClick:oe=>{oe.stopPropagation(),_?_(W,Q):z==null||z(W,Q.name),le(null)},className:"block w-full px-2 py-1 text-xs text-left hover:bg-teal-50 text-teal-800 rounded",children:[" ",Q.name]},Q.id))]}),n.jsx("button",{onClick:()=>le(null),className:"block w-full px-2 py-1 text-xs text-gray-400 hover:text-gray-600 mt-1 border-t",children:"Cancel"})]})]},W)})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.jsx(mn,{open:S.flags,onClick:()=>ae("flags"),icon:"",label:"Flags",count:ke,color:"red"}),S.flags&&n.jsx("div",{className:"p-3 space-y-2 border-b border-gray-100",children:ke===0?n.jsxs("p",{className:"text-xs text-gray-500 text-center py-2",children:["No flagged segments.",n.jsx("br",{}),"Use the ... menu on segments to flag issues."]}):Object.entries(t).map(([W,N])=>{const M=Ef.find(Y=>Y.id===N.flag_type);return n.jsxs("div",{className:`p-2 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow ${N.flag_type==="wrong_speaker"?"bg-red-50 border-red-200":N.flag_type==="character_voice"?"bg-pink-50 border-pink-200":N.flag_type==="multiple_speakers"?"bg-orange-50 border-orange-200":N.flag_type==="audio_issue"?"bg-gray-50 border-gray-200":"bg-yellow-50 border-yellow-200"}`,onClick:()=>L==null?void 0:L(parseInt(W)),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:(M==null?void 0:M.icon)||""}),n.jsx("span",{className:"text-xs font-medium",children:(M==null?void 0:M.label)||"Flag"})]}),n.jsx("button",{onClick:Y=>{Y.stopPropagation(),k==null||k(parseInt(W))},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:["Segment #",W,N.corrected_speaker&&n.jsxs("span",{className:"ml-2",children:[" ",N.corrected_speaker]})]}),N.notes&&n.jsxs("div",{className:"text-xs text-gray-600 mt-1 italic",children:['"',N.notes,'"']})]},N.id)})}),n.jsx(mn,{open:S.characters,onClick:()=>ae("characters"),icon:"",label:"Characters",count:A,color:"pink"}),S.characters&&n.jsx("div",{className:"p-3 space-y-2 border-b border-gray-100",children:A===0?n.jsxs("p",{className:"text-xs text-gray-500 text-center py-2",children:["No character appearances marked.",n.jsx("br",{}),"Use the ... menu on segments to mark characters."]}):r.map(W=>n.jsxs("div",{className:"p-2 rounded-lg bg-pink-50 border border-pink-200 cursor-pointer hover:shadow-sm transition-shadow",onClick:()=>L==null?void 0:L(W.segment_idx),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:""}),n.jsx("span",{className:"text-xs font-medium text-pink-800",children:W.character_name})]}),n.jsx("button",{onClick:N=>{N.stopPropagation(),d==null||d(W.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:["Segment #",W.segment_idx]})]},W.id))}),n.jsx(mn,{open:S.chapters,onClick:()=>ae("chapters"),icon:"",label:"Chapters",count:re,color:"indigo"}),S.chapters&&n.jsx("div",{className:"p-3 space-y-2 border-b border-gray-100",children:re===0?n.jsxs("p",{className:"text-xs text-gray-500 text-center py-2",children:["No chapters marked.",n.jsx("br",{}),"Use the ... menu on segments to mark chapters."]}):s.map(W=>n.jsxs("div",{className:"p-2 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow",style:{backgroundColor:W.chapter_type_color+"20",borderColor:W.chapter_type_color+"60"},onClick:()=>L==null?void 0:L(W.start_segment_idx),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:W.chapter_type_icon}),n.jsx("span",{className:"text-xs font-medium",style:{color:W.chapter_type_color},children:W.chapter_type_name})]}),n.jsx("button",{onClick:N=>{N.stopPropagation(),f==null||f(W.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),W.title&&n.jsx("div",{className:"text-xs text-gray-700 mt-1",children:W.title}),n.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:["Segments #",W.start_segment_idx," - #",W.end_segment_idx]})]},W.id))}),n.jsx(mn,{open:S.drops,onClick:()=>ae("drops"),icon:"",label:"Sound Bites",count:ge,color:"teal"}),S.drops&&n.jsx("div",{className:"p-3 space-y-2 border-b border-gray-100",children:ge===0?n.jsxs("p",{className:"text-xs text-gray-500 text-center py-2",children:["No sound bites tagged.",n.jsx("br",{}),"Select a segment and use the Sound Bite action."]}):y.map(W=>{const N=y.filter(Q=>Q.audio_drop_id===W.audio_drop_id),M=N.findIndex(Q=>Q.id===W.id)+1,Y=N.length;return n.jsxs("div",{className:"p-2 rounded-lg bg-teal-50 border border-teal-200 cursor-pointer hover:shadow-sm transition-shadow",onClick:()=>L==null?void 0:L(W.segment_idx),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:""}),n.jsxs("span",{className:"text-xs font-medium text-teal-800",children:[W.audio_drop_name,Y>1&&n.jsxs("span",{className:"text-[10px] text-teal-500 ml-1",children:["(",M,"/",Y,")"]})]})]}),n.jsx("button",{onClick:Q=>{Q.stopPropagation(),te==null||te(W.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:["Segment #",W.segment_idx]})]},W.id)})}),n.jsx(mn,{open:S.samples,onClick:()=>ae("samples"),icon:"",label:"Audio Samples",count:ye,color:"yellow"}),S.samples&&n.jsx("div",{className:"p-3 space-y-2 border-b border-gray-100",children:ye===0?n.jsxs("p",{className:"text-xs text-gray-500 text-center py-2",children:["No audio samples marked.",n.jsx("br",{}),"Use the ... menu on segments to mark good audio samples."]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[ye," sample",ye!==1?"s":""," marked"]}),Object.keys(o).map(W=>n.jsx("div",{className:"p-2 rounded-lg bg-yellow-50 border border-yellow-200 cursor-pointer hover:shadow-sm transition-shadow",onClick:()=>L==null?void 0:L(parseInt(W)),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:""}),n.jsxs("span",{className:"text-xs font-medium text-yellow-800",children:["Segment #",W]})]}),n.jsx("button",{onClick:N=>{N.stopPropagation(),C==null||C(parseInt(W))},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},W))]})}),n.jsx(mn,{open:S.wiki,onClick:()=>ae("wiki"),icon:"",label:"Wiki",count:se?1:0,color:"blue"}),S.wiki&&n.jsx("div",{className:"p-3 space-y-3 border-b border-gray-100",children:b?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("div",{className:"w-6 h-6 border-2 border-gray-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-2"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Loading wiki data..."})]}):se?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("a",{href:se.wiki_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:"View on Fandom Wiki"}),n.jsx("button",{onClick:Oe,disabled:ee,className:"text-[10px] px-1.5 py-0.5 rounded bg-gray-100 hover:bg-gray-200 text-gray-500 disabled:opacity-50",children:ee?"Syncing...":"Re-sync"})]}),se.air_date&&n.jsxs("div",{className:"text-xs",children:[n.jsx("span",{className:"text-gray-400",children:"Air date:"})," ",n.jsx("span",{className:"text-gray-700",children:se.air_date})]}),se.summary&&n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] font-medium text-gray-400 uppercase tracking-wider mb-1",children:"Summary"}),n.jsx("div",{className:"text-xs text-gray-600 leading-relaxed whitespace-pre-line max-h-32 overflow-y-auto bg-white rounded border p-2",children:se.summary})]}),se.bits_json&&(()=>{try{const W=JSON.parse(se.bits_json);return W.length===0?null:n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] font-medium text-gray-400 uppercase tracking-wider mb-1",children:"Bits & Characters"}),n.jsx("div",{className:"space-y-1",children:W.map((N,M)=>n.jsxs("div",{className:"text-xs text-gray-600 py-0.5 flex gap-1.5",children:[n.jsx("span",{className:"text-amber-500 flex-shrink-0",children:"-"}),n.jsx("span",{children:N.replace(/^- /,"")})]},M))})]})}catch{return null}})(),se.scoopmail_json&&(()=>{try{const W=JSON.parse(se.scoopmail_json);return W.length===0?null:n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] font-medium text-gray-400 uppercase tracking-wider mb-1",children:"Scoopmail"}),n.jsx("div",{className:"space-y-1",children:W.map((N,M)=>n.jsxs("div",{className:"text-xs text-gray-600 py-0.5 flex gap-1.5",children:[n.jsx("span",{className:"text-blue-400 flex-shrink-0",children:"-"}),n.jsx("span",{children:N.replace(/^- /,"")})]},M))})]})}catch{return null}})(),se.jock_vs_nerd&&n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] font-medium text-gray-400 uppercase tracking-wider mb-1",children:"Jock vs Nerd"}),n.jsx("div",{className:"text-xs text-gray-600 bg-white rounded border p-2",children:se.jock_vs_nerd})]}),n.jsxs("div",{className:"text-[9px] text-gray-300 pt-2 border-t border-gray-100",children:["Data from ",n.jsx("a",{href:"https://heyscoops.fandom.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"HeyScoops Wiki"})," (CC BY-SA 3.0)"]})]}):n.jsxs("div",{className:"text-center py-2",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"No wiki data for this episode."}),((e==null?void 0:e.category_number)||(e==null?void 0:e.episode_number))&&n.jsx("button",{onClick:Oe,disabled:ee,className:"px-3 py-1.5 text-xs rounded bg-blue-100 hover:bg-blue-200 text-blue-700 disabled:opacity-50",children:ee?"Syncing from wiki...":"Fetch from Fandom Wiki"}),!(e!=null&&e.category_number)&&!(e!=null&&e.episode_number)&&n.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"Episode has no number  can't match to wiki."})]})})]}),e&&n.jsx("div",{className:"p-3 border-t border-gray-200 flex-shrink-0",children:n.jsx("div",{className:"text-xs text-gray-500 truncate",title:e.title,children:e.title})})]})}function zf({onNotification:e}){var M;const[t,r]=p.useState(null),[s,l]=p.useState(!1),[a,i]=p.useState(!1),[o,c]=p.useState(!1),[m,y]=p.useState({}),[w,x]=p.useState([]),[E,g]=p.useState([]),[k,R]=p.useState({}),[d,u]=p.useState([]),[f,C]=p.useState([]),[L,z]=p.useState([]),[_,I]=p.useState([]),[te,S]=p.useState({}),[q,$]=p.useState([]),[V,J]=p.useState([]),[le,se]=p.useState(null),[Z,b]=p.useState(null),H=p.useCallback(()=>{r(null),l(!1),i(!1),c(!1),y({}),x([]),g([]),R({}),I([]),S({}),$([]),J([]),se(null),b(null)},[]),ee=p.useCallback(Y=>{r(Y),l(!0),i(!1),c(!0),y({}),x([]),g([]),R({}),I([]),S({}),$([]),J([]),se(null),b(null)},[]),de=p.useCallback(Y=>{i(Y),c(!1)},[]),ae=t&&(a||o),Oe=p.useCallback(Y=>{var Q;(Q=window.__transcriptEditorDeleteFlag)==null||Q.call(window,Y)},[]),ke=p.useCallback(Y=>{var Q;(Q=window.__transcriptEditorRemoveCharacter)==null||Q.call(window,Y)},[]),A=p.useCallback(Y=>{var Q;(Q=window.__transcriptEditorDeleteChapter)==null||Q.call(window,Y)},[]),re=p.useCallback(Y=>{var Q;(Q=window.__transcriptEditorToggleVoiceSample)==null||Q.call(window,Y)},[]),ye=p.useCallback(Y=>{typeof window<"u"&&window.__transcriptEditorSeekToSegment&&window.__transcriptEditorSeekToSegment(Y)},[]),Ne=p.useCallback(Y=>{var Q;(Q=window.__transcriptEditorRemoveAudioDrop)==null||Q.call(window,Y)},[]),ge=p.useCallback(Y=>{typeof window<"u"&&window.__transcriptEditorSeekToSpeaker&&window.__transcriptEditorSeekToSpeaker(Y)},[]),W=p.useCallback((Y,Q)=>{S(oe=>({...oe,[Y]:Q})),typeof window<"u"&&window.__transcriptEditorAssignSpeakerName&&window.__transcriptEditorAssignSpeakerName(Y,Q)},[]),N=p.useCallback((Y,Q)=>{S(oe=>({...oe,[Y]:Q.name})),typeof window<"u"&&window.__transcriptEditorAssignAudioDrop&&window.__transcriptEditorAssignAudioDrop(Y,Q)},[]);return n.jsxs("div",{className:"h-[calc(100vh-220px)] flex bg-gray-100 rounded-xl overflow-hidden shadow-lg border border-gray-200",children:[s&&ae?n.jsxs("div",{className:"w-12 h-full bg-white border-r border-gray-200 flex flex-col items-center py-4 flex-shrink-0",children:[n.jsx("button",{onClick:()=>l(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Browse episodes",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})}),t&&n.jsx("div",{className:"mt-4 flex-1 flex items-start justify-center overflow-hidden",children:n.jsx("span",{className:"text-[10px] text-gray-500 font-medium whitespace-nowrap",style:{writingMode:"vertical-rl",textOrientation:"mixed"},title:t.title,children:((M=t.title)==null?void 0:M.length)>40?t.title.slice(0,40)+"":t.title})})]}):n.jsxs("div",{className:`${ae?"w-80":"flex-1"} flex-shrink-0 flex flex-col h-full`,children:[ae&&n.jsx("div",{className:"px-3 py-2 border-b border-gray-200 bg-white flex items-center justify-end flex-shrink-0",children:n.jsx("button",{onClick:()=>l(!0),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Collapse sidebar",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})}),n.jsx("div",{className:"flex-1 min-h-0",children:n.jsx(Sf,{selectedEpisodeId:t==null?void 0:t.id,onSelectEpisode:ee,onNotification:e})})]}),t&&n.jsx("div",{className:`${ae?"flex-1":"w-0 overflow-hidden"} min-w-0`,children:n.jsx(Cf,{episode:t,onClose:H,onNotification:e,onFlaggedSegmentsChange:y,onCharacterAppearancesChange:x,onChaptersChange:g,onMarkedSamplesChange:R,onSpeakersChange:I,onSpeakerNamesChange:S,onVoiceLibraryChange:z,onAudioDropInstancesChange:$,onAudioDropsChange:J,onSegmentsChange:se,selectedSegmentIdx:Z,onSelectedSegmentChange:b,onTranscriptLoaded:de})}),ae&&n.jsx($f,{episode:t,flaggedSegments:m,characterAppearances:w,episodeChapters:E,characters:d,chapterTypes:f,voiceLibrary:L,markedSamples:k,speakers:_,speakerNames:te,audioDropInstances:q,audioDrops:V,segments:le,selectedSegmentIdx:Z,onDeleteFlag:Oe,onRemoveCharacter:ke,onDeleteChapter:A,onToggleVoiceSample:re,onSeekToSegment:ye,onAssignSpeakerName:W,onAssignAudioDrop:N,onSeekToSpeaker:ge,onRemoveAudioDrop:Ne})]})}function Af({message:e,type:t="success",onClose:r}){p.useEffect(()=>{const l=setTimeout(r,5e3);return()=>clearTimeout(l)},[r]);const s={success:"bg-sage-50 border-sage-500 text-sage-800",error:"bg-red-50 border-red-500 text-red-800"};return n.jsx("div",{className:"fixed top-20 right-4 z-50 animate-slide-in",children:n.jsx("div",{className:`${s[t]} border-l-4 rounded-lg shadow-lg p-4 max-w-md`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-medium",children:e}),n.jsx("button",{className:"ml-4 text-gray-400 hover:text-gray-600",onClick:r,children:""})]})})})}function Lf({message:e,detail:t}){return n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx("style",{children:`
          @keyframes scoop-drop {
            0% { transform: translateY(-30px); opacity: 0; }
            40% { transform: translateY(0px); opacity: 1; }
            60% { transform: translateY(0px); opacity: 1; }
            100% { transform: translateY(30px) scale(0.3); opacity: 0; }
          }
          .scoop-anim { animation: scoop-drop 2s ease-in-out infinite; }
        `}),n.jsxs("div",{className:"relative mx-auto mb-6 w-20 h-28",children:[n.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-14 h-14 rounded-full bg-pink-400 shadow-md scoop-anim",style:{animationDelay:"0s",zIndex:3}}),n.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-14 h-14 rounded-full bg-amber-100 shadow-md scoop-anim",style:{animationDelay:"0.6s",zIndex:2}}),n.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-14 h-14 rounded-full bg-amber-800 shadow-md scoop-anim",style:{animationDelay:"1.2s",zIndex:1}}),n.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2",style:{width:0,height:0,borderLeft:"24px solid transparent",borderRight:"24px solid transparent",borderTop:"40px solid #d97706",zIndex:4}}),n.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2",style:{width:0,height:0,borderLeft:"20px solid transparent",borderRight:"20px solid transparent",borderTop:"34px solid #b45309",zIndex:4,opacity:.3}})]}),n.jsx("div",{className:"text-gray-500 text-sm font-medium",children:e||"Loading..."}),t&&n.jsx("div",{className:"text-gray-400 text-xs mt-1",children:t})]})})}function Rf(){return n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 py-2",children:[n.jsx("style",{children:`
        @keyframes mini-scoop {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-4px); }
        }
      `}),n.jsxs("div",{className:"flex gap-0.5",children:[n.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-pink-400",style:{animation:"mini-scoop 1s ease-in-out infinite",animationDelay:"0s"}}),n.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-amber-100",style:{animation:"mini-scoop 1s ease-in-out infinite",animationDelay:"0.2s"}}),n.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-amber-800",style:{animation:"mini-scoop 1s ease-in-out infinite",animationDelay:"0.4s"}})]}),"Loading samples..."]})}function Df({rating:e,onChange:t}){return n.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(r=>n.jsx("button",{onClick:s=>{s.stopPropagation(),t(e===r?0:r)},className:`text-sm transition-colors ${r<=e?"text-yellow-400":"text-gray-300 hover:text-yellow-300"}`,title:`Rate ${r} star${r!==1?"s":""}`,children:""},r))})}function pu(e){if(e==null)return"";const t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`}function Ff({onNotification:e,onViewEpisode:t}){const r=Hs(),[s,l]=p.useState([]),[a,i]=p.useState([]),[o,c]=p.useState([]),[m,y]=p.useState([]),[w,x]=p.useState(!0),[E,g]=p.useState(!1),[k,R]=p.useState(null),[d,u]=p.useState({name:"",shortName:"",isHost:!1}),[f,C]=p.useState(null),[L,z]=p.useState({}),[_,I]=p.useState({}),[te,S]=p.useState(null),q=p.useRef(null);p.useEffect(()=>{$()},[]);const $=async()=>{x(!0);try{const[N,M,Y,Q]=await Promise.all([nt.getSpeakers(),nt.getSpeakerStats(),nt.getVoiceLibrary(),ne.getAudioDrops()]);l(N),i(M),c(Y),y(Q)}catch(N){console.error("Error loading data:",N),e==null||e("Error loading audio ID data","error")}finally{x(!1)}},V=async N=>{if(!L[N]){I(M=>({...M,[N]:!0}));try{const M=await nt.getVoiceSamples(N);z(Y=>({...Y,[N]:M}))}catch(M){console.error("Error loading samples for",N,M),z(Y=>({...Y,[N]:[]}))}finally{I(M=>({...M,[N]:!1}))}}},J=N=>{f===N?C(null):(C(N),V(N))},le=async()=>{if(!d.name.trim()){e==null||e("Name is required","error");return}try{await nt.createSpeaker(d.name.trim(),d.shortName.trim()||null,d.isHost),e==null||e(`Speaker "${d.name}" added`,"success"),u({name:"",shortName:"",isHost:!1}),g(!1),$()}catch(N){e==null||e(`Error adding speaker: ${N.message}`,"error")}},se=async()=>{if(!(!k||!d.name.trim()))try{await nt.updateSpeaker(k.id,d.name.trim(),d.shortName.trim()||null,d.isHost),e==null||e(`Speaker "${d.name}" updated`,"success"),R(null),u({name:"",shortName:"",isHost:!1}),$()}catch(N){e==null||e(`Error updating speaker: ${N.message}`,"error")}},Z=async N=>{if(await r(`Delete speaker "${N.name}"?`))try{await nt.deleteSpeaker(N.id),e==null||e(`Speaker "${N.name}" deleted`,"success"),f===N.name&&C(null),$()}catch(M){e==null||e(`Error deleting speaker: ${M.message}`,"error")}},b=(N,M)=>{M.stopPropagation(),R(N),u({name:N.name,shortName:N.short_name||"",isHost:N.is_host}),g(!1)},H=()=>{R(null),u({name:"",shortName:"",isHost:!1})},ee=N=>{if(q.current){if(te===N){q.current.pause(),q.current.currentTime=0,S(null);return}q.current.src=ya(N),q.current.play(),S(N)}},de=async(N,M)=>{if(await r(`Delete sample "${M.file_name}"?`))try{await nt.deleteVoiceSample(N,M.file_path,M.id),e==null||e(`Deleted "${M.file_name}"`,"success"),z(Q=>({...Q,[N]:void 0})),V(N);const Y=await nt.getVoiceLibrary();c(Y)}catch(Y){e==null||e(`Error deleting sample: ${Y.message}`,"error")}},ae=async(N,M,Y)=>{if(M.id)try{await nt.updateVoiceSampleRating(M.id,Y),z(Q=>({...Q,[N]:(Q[N]||[]).map(oe=>oe.id===M.id?{...oe,rating:Y}:oe)}))}catch(Q){e==null||e(`Error updating rating: ${Q.message}`,"error")}},Oe=N=>{if(!N)return"0m";const M=Math.floor(N/3600),Y=Math.floor(N%3600/60);return M>0?`${M}h ${Y}m`:`${Y}m`},ke=N=>N<1024?`${N} B`:N<1024*1024?`${(N/1024).toFixed(1)} KB`:`${(N/(1024*1024)).toFixed(1)} MB`,A=N=>N.name.startsWith("")?!0:m.some(M=>M.name===N.name||` ${M.name}`===N.name),re=s.map(N=>{const M=a.find(Q=>Q.id===N.id)||{},Y=o.find(Q=>Q.name===N.name);return{...N,...M,voiceInfo:Y,type:"speaker"}});re.sort((N,M)=>N.is_host!==M.is_host?N.is_host?-1:1:(M.episode_count||0)-(N.episode_count||0));const Ne=o.filter(N=>A(N)).map(N=>{const M=N.name.replace(/^\s*/,""),Y=m.find(Q=>Q.name===M);return{name:N.name,cleanName:M,voiceInfo:N,sample_count:N.sample_count,short_name:N.short_name,sample_file:N.sample_file,drop:Y,type:"sound_bite"}});m.forEach(N=>{o.some(Y=>Y.name===N.name||Y.name===` ${N.name}`)||Ne.push({name:N.name,cleanName:N.name,voiceInfo:null,sample_count:0,short_name:N.name.charAt(0),sample_file:null,drop:N,type:"sound_bite"})});const ge=o.filter(N=>A(N)?!1:!s.some(M=>M.name===N.name)),W=(N,M)=>{var Se;const Y=f===N.name,Q=M==="speaker",oe=N.voiceInfo,Ue=oe&&oe.sample_count>0,ht=(oe==null?void 0:oe.sample_count)||0,It=(oe==null?void 0:oe.file_count)||0,rt=(oe==null?void 0:oe.sample_file)||N.sample_file,Re=(N.short_name||N.cleanName||N.name||"?").charAt(0).toUpperCase();return n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsxs("div",{onClick:()=>J(N.name),className:`flex items-center justify-between px-4 py-3 cursor-pointer transition-colors ${Y?"bg-gray-100":"hover:bg-gray-50"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[n.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 ${N.is_host?"bg-purple-500":Q?"bg-gray-400":"bg-amber-500"}`,children:Q?Re:""}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-medium text-gray-800 truncate",children:N.cleanName||N.name}),N.is_host&&n.jsx("span",{className:"px-1.5 py-0.5 bg-purple-200 text-purple-700 rounded text-xs font-medium flex-shrink-0",children:"Host"}),Ue&&n.jsxs("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-700 rounded text-xs font-medium flex-shrink-0",title:`Voice print trained from ${ht} clip${ht!==1?"s":""}${rt?` (last: ${rt})`:""}`,children:["Voice ID (",ht,"x)"]}),It>0&&n.jsxs("span",{className:"px-1.5 py-0.5 bg-yellow-100 text-yellow-700 rounded text-xs font-medium flex-shrink-0",children:[It," clip",It!==1?"s":""]})]}),Q&&n.jsxs("div",{className:"flex items-center gap-3 mt-0.5 text-xs text-gray-500",children:[n.jsxs("span",{children:[N.episode_count||0," episodes"]}),n.jsx("span",{children:Oe(N.total_speaking_time)}),n.jsxs("span",{children:[N.total_segments||0," segments"]})]}),!Q&&((Se=N.drop)==null?void 0:Se.description)&&n.jsx("div",{className:"text-xs text-gray-500 mt-0.5 truncate",children:N.drop.description})]})]}),n.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:n.jsx("span",{className:`text-gray-400 text-xs transition-transform ${Y?"rotate-90":""}`,children:""})})]}),Y&&n.jsxs("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-3",children:[Q&&n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx("button",{onClick:ce=>b(N,ce),className:"px-3 py-1 text-xs text-purple-600 hover:bg-purple-100 rounded border border-purple-200 transition-colors",children:"Edit Speaker"}),!N.is_host&&n.jsx("button",{onClick:ce=>{ce.stopPropagation(),Z(N)},className:"px-3 py-1 text-xs text-red-600 hover:bg-red-100 rounded border border-red-200 transition-colors",children:"Delete Speaker"})]}),Ue&&n.jsxs("div",{className:"mb-3 p-2 bg-green-50 rounded border border-green-200 text-xs text-green-700",children:["Voice print trained from ",ht," clip",ht!==1?"s":"",rt&&n.jsxs("span",{className:"text-green-600 ml-1",children:[" Last source: ",rt]})]}),n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Audio Samples"}),_[N.name]?n.jsx(Rf,{}):(L[N.name]||[]).length===0?n.jsx("div",{className:"text-sm text-gray-400 py-2",children:Ue&&It===0?"Voice print trained from older clips (no audio files saved). Add new clips from the Transcript viewer to see them here.":"No saved audio clips. Mark clips in the Transcript viewer to add samples."}):n.jsx("div",{className:"space-y-1",children:(L[N.name]||[]).map(ce=>n.jsx("div",{className:"py-1.5 px-2 rounded hover:bg-white transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[n.jsx("button",{onClick:()=>ee(ce.file_path),className:`w-7 h-7 rounded-full flex items-center justify-center text-xs flex-shrink-0 transition-colors ${te===ce.file_path?"bg-yellow-400 text-yellow-900":"bg-gray-200 hover:bg-gray-300 text-gray-600"}`,children:te===ce.file_path?"":""}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-700 truncate",children:ce.file_name}),ce.id!=null&&n.jsx(Df,{rating:ce.rating||0,onChange:pr=>ae(N.name,ce,pr)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[n.jsx("span",{children:ke(ce.file_size)}),ce.episode_title&&n.jsx("span",{className:"text-gray-500",children:ce.episode_title.length>30?ce.episode_title.substring(0,30)+"...":ce.episode_title}),ce.start_time!=null&&ce.end_time!=null&&n.jsxs("span",{className:"text-purple-500 font-medium",children:[pu(ce.start_time),"-",pu(ce.end_time)]}),!ce.episode_title&&ce.created&&n.jsx("span",{children:ce.created})]}),ce.transcript_text&&n.jsxs("div",{className:"text-xs text-gray-400 italic truncate mt-0.5",children:['"',ce.transcript_text.length>60?ce.transcript_text.substring(0,60)+"...":ce.transcript_text,'"']})]})]}),n.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[ce.episode_id&&t&&n.jsx("button",{onClick:()=>t(ce.episode_id,ce.start_time),className:"p-1 text-gray-400 hover:text-purple-500 hover:bg-purple-50 rounded transition-colors",title:"Jump to source",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),n.jsx("button",{onClick:()=>de(N.name,ce),className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Delete sample",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},ce.file_path))})]})]},N.name)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Audio Identification"}),n.jsx("p",{className:"text-purple-100 text-sm mt-0.5",children:"Manage speakers and sound bites used for automatic audio identification"})]}),n.jsx("button",{onClick:()=>{g(!0),R(null),u({name:"",shortName:"",isHost:!1})},className:"px-3 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium text-sm transition-colors",children:"+ Add Speaker"})]})}),(E||k)&&n.jsxs("div",{className:"p-4 bg-purple-50 border-b border-purple-200",children:[n.jsx("h3",{className:"font-medium text-purple-800 mb-3",children:k?"Edit Speaker":"Add New Speaker"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),n.jsx("input",{type:"text",value:d.name,onChange:N=>u({...d,name:N.target.value}),placeholder:"e.g., Matt Donnelly",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Name"}),n.jsx("input",{type:"text",value:d.shortName,onChange:N=>u({...d,shortName:N.target.value}),placeholder:"e.g., Matt",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),n.jsx("div",{className:"flex items-end gap-4",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:d.isHost,onChange:N=>u({...d,isHost:N.target.checked}),className:"w-4 h-4 text-purple-500 border-gray-300 rounded focus:ring-purple-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Is Host"})]})})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{onClick:k?se:le,className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium text-sm transition-colors",children:k?"Update":"Add Speaker"}),n.jsx("button",{onClick:()=>{g(!1),H()},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-sm transition-colors",children:"Cancel"})]})]})]}),w?n.jsx(Lf,{message:"Scooping up audio ID data..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"px-5 py-3 border-b border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-base",children:""}),n.jsx("h3",{className:"font-semibold text-gray-800",children:"Speakers"}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",re.length,")"]})]})}),n.jsxs("div",{className:"p-4 space-y-2",children:[re.length===0?n.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No speakers yet. Add hosts and guests to track them across episodes."}):re.map(N=>W(N,"speaker")),ge.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide mt-4 mb-1 px-1",children:"Voice Library Only (not added as speaker)"}),ge.map(N=>n.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 rounded-lg border border-dashed border-yellow-300 bg-yellow-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-white font-bold text-sm bg-yellow-500",children:N.short_name.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-gray-800",children:N.name}),n.jsxs("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-700 rounded text-xs font-medium",children:["Voice ID (",N.sample_count,"x)"]})]}),N.sample_file&&n.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:["Source: ",N.sample_file]})]})]}),n.jsx("button",{onClick:()=>{u({name:N.name,shortName:N.short_name,isHost:!1}),g(!0)},className:"px-3 py-1 text-xs text-purple-600 hover:bg-purple-100 rounded border border-purple-200 transition-colors",children:"Add as Speaker"})]},N.name))]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"px-5 py-3 border-b border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-base",children:""}),n.jsx("h3",{className:"font-semibold text-gray-800",children:"Sound Bites"}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",Ne.length,")"]})]})}),n.jsx("div",{className:"p-4 space-y-2",children:Ne.length===0?n.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No sound bites yet. Sound bites are non-speech audio identified during diarization (intros, music, drops)."}):Ne.map(N=>W(N,"sound_bite"))})]})]}),n.jsx("audio",{ref:q,onEnded:()=>S(null),onError:()=>S(null)})]})}function Mf({onNotification:e}){const t=Hs(),[r,s]=p.useState([]),[l,a]=p.useState([]),[i,o]=p.useState(!0),[c,m]=p.useState(!1),[y,w]=p.useState(null),[x,E]=p.useState({name:"",shortName:"",description:"",catchphrase:""}),[g,k]=p.useState({characterName:"",episodeId:"",timestamp:""}),[R,d]=p.useState(!1);p.useEffect(()=>{u(),f()},[]);const u=async()=>{o(!0);try{const S=await ne.getCharacters();s(S)}catch(S){console.error("Error loading characters:",S),e==null||e("Error loading characters","error")}finally{o(!1)}},f=async()=>{try{const S=await be.getEpisodes({feed_source:"patreon",limit:500,sort_by:"episode_number",sort_desc:!0});a(S.episodes||[])}catch(S){console.error("Error loading episodes:",S)}},C=async()=>{if(!g.characterName.trim()){e==null||e("Enter a character name","warning");return}if(!g.episodeId){e==null||e("Select an episode","warning");return}d(!0);try{let S=r.find(V=>V.name.toLowerCase()===g.characterName.trim().toLowerCase());if(!S){const V=await ne.createCharacter(g.characterName.trim(),null,null,null),J=await ne.getCharacters();s(J),S=J.find(le=>le.id===V),e==null||e(`Created new character: ${g.characterName}`,"info")}let q=null;if(g.timestamp.trim()){const V=g.timestamp.split(":").map(Number);V.length===2?q=V[0]*60+V[1]:V.length===3&&(q=V[0]*3600+V[1]*60+V[2])}await ne.addCharacterAppearance(S.id,parseInt(g.episodeId),q,null,null);const $=l.find(V=>V.id===parseInt(g.episodeId));e==null||e(`Added ${S.name} to episode ${($==null?void 0:$.episode_number)||g.episodeId}`,"success"),k({characterName:"",episodeId:"",timestamp:""}),u()}catch(S){e==null||e(`Error: ${S.message}`,"error")}finally{d(!1)}},L=async()=>{if(!x.name.trim()){e==null||e("Name is required","error");return}try{await ne.createCharacter(x.name.trim(),x.shortName.trim()||null,x.description.trim()||null,x.catchphrase.trim()||null),e==null||e(`Character "${x.name}" added`,"success"),E({name:"",shortName:"",description:"",catchphrase:""}),m(!1),u()}catch(S){e==null||e(`Error adding character: ${S.message}`,"error")}},z=async()=>{if(!(!y||!x.name.trim()))try{await ne.updateCharacter(y.id,x.name.trim(),x.shortName.trim()||null,x.description.trim()||null,x.catchphrase.trim()||null),e==null||e(`Character "${x.name}" updated`,"success"),w(null),E({name:"",shortName:"",description:"",catchphrase:""}),u()}catch(S){e==null||e(`Error updating character: ${S.message}`,"error")}},_=async S=>{if(await t(`Delete character "${S.name}"?`))try{await ne.deleteCharacter(S.id),e==null||e(`Character "${S.name}" deleted`,"success"),u()}catch(q){e==null||e(`Error deleting character: ${q.message}`,"error")}},I=S=>{w(S),E({name:S.name,shortName:S.short_name||"",description:S.description||"",catchphrase:S.catchphrase||""}),m(!1)},te=()=>{w(null),E({name:"",shortName:"",description:"",catchphrase:""})};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-pink-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"ICS Characters"}),n.jsx("p",{className:"text-pink-100 text-sm",children:"Recurring characters from bits & commercials"})]}),n.jsx("button",{onClick:()=>{m(!0),w(null),E({name:"",shortName:"",description:"",catchphrase:""})},className:"px-3 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium text-sm transition-colors",children:"+ Add Character"})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[n.jsxs("h3",{className:"font-medium text-green-800 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:""})," Quick Add Character Appearance"]}),n.jsx("p",{className:"text-sm text-green-700 mb-3",children:"Know a character appears in an episode? Add it here. Creates the character if it's new."}),n.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[n.jsxs("div",{className:"flex-1 min-w-[200px]",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Character Name"}),n.jsx("input",{type:"text",value:g.characterName,onChange:S=>k({...g,characterName:S.target.value}),placeholder:"e.g., Count Absorbo",list:"character-suggestions",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),n.jsx("datalist",{id:"character-suggestions",children:r.map(S=>n.jsx("option",{value:S.name},S.id))})]}),n.jsxs("div",{className:"flex-1 min-w-[200px]",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Episode"}),n.jsxs("select",{value:g.episodeId,onChange:S=>k({...g,episodeId:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[n.jsx("option",{value:"",children:"Select episode..."}),l.map(S=>n.jsxs("option",{value:S.id,children:[S.episode_number?`#${S.episode_number}`:""," ",S.title]},S.id))]})]}),n.jsxs("div",{className:"w-32",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timestamp"}),n.jsx("input",{type:"text",value:g.timestamp,onChange:S=>k({...g,timestamp:S.target.value}),placeholder:"MM:SS",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),n.jsx("button",{onClick:C,disabled:R,className:"px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white rounded-lg font-medium transition-colors",children:R?"Adding...":"Add"})]})]}),(c||y)&&n.jsxs("div",{className:"mb-6 p-4 bg-pink-50 rounded-lg border border-pink-200",children:[n.jsx("h3",{className:"font-medium text-pink-800 mb-3",children:y?"Edit Character":"Add New Character (with details)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:x.name,onChange:S=>E({...x,name:S.target.value}),placeholder:"e.g., Sweet Bean",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Name"}),n.jsx("input",{type:"text",value:x.shortName,onChange:S=>E({...x,shortName:S.target.value}),placeholder:"e.g., Bean",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catchphrase"}),n.jsx("input",{type:"text",value:x.catchphrase,onChange:S=>E({...x,catchphrase:S.target.value}),placeholder:"e.g., It's me, Sweet Bean!",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("input",{type:"text",value:x.description,onChange:S=>E({...x,description:S.target.value}),placeholder:"e.g., Matt's lovable character",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{onClick:y?z:L,className:"px-4 py-2 bg-pink-500 hover:bg-pink-600 text-white rounded-lg font-medium text-sm transition-colors",children:y?"Update":"Add Character"}),n.jsx("button",{onClick:()=>{m(!1),te()},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-sm transition-colors",children:"Cancel"})]})]}),i?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-pink-200 border-t-pink-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading characters..."})]}):r.length===0?n.jsx("div",{className:"text-center py-12 text-gray-400",children:"No characters yet. Use Quick Add above to add characters!"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(S=>n.jsxs("div",{className:"p-4 rounded-lg border bg-gradient-to-br from-pink-50 to-purple-50 border-pink-200 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-pink-500 text-white flex items-center justify-center font-bold text-lg",children:(S.short_name||S.name).charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-800",children:S.name}),S.short_name&&n.jsxs("span",{className:"text-xs text-gray-500",children:["(",S.short_name,")"]})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>I(S),className:"p-1 text-pink-600 hover:bg-pink-100 rounded transition-colors",title:"Edit",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),n.jsx("button",{onClick:()=>_(S),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Delete",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]}),S.catchphrase&&n.jsxs("p",{className:"text-sm text-pink-600 italic mb-2",children:['"',S.catchphrase,'"']}),S.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:S.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-2",children:[n.jsxs("span",{className:"font-medium text-pink-600",children:[S.appearance_count||0," appearances"]}),S.first_episode_title&&n.jsxs("span",{className:"truncate",children:["First: ",S.first_episode_title]})]})]},S.id))})]})]})}function Of({onNotification:e}){const t=Hs(),[r,s]=p.useState([]),[l,a]=p.useState(!0),[i,o]=p.useState(!1),[c,m]=p.useState(null),[y,w]=p.useState({name:"",tagline:"",description:"",isReal:!1}),[x,E]=p.useState("all");p.useEffect(()=>{g()},[]);const g=async()=>{a(!0);try{const _=await ne.getSponsors();s(_)}catch(_){console.error("Error loading sponsors:",_),e==null||e("Error loading sponsors","error")}finally{a(!1)}},k=async()=>{if(!y.name.trim()){e==null||e("Name is required","error");return}try{await ne.createSponsor(y.name.trim(),y.tagline.trim()||null,y.description.trim()||null,y.isReal),e==null||e(`Sponsor "${y.name}" added`,"success"),w({name:"",tagline:"",description:"",isReal:!1}),o(!1),g()}catch(_){e==null||e(`Error adding sponsor: ${_.message}`,"error")}},R=async()=>{if(!(!c||!y.name.trim()))try{await ne.updateSponsor(c.id,y.name.trim(),y.tagline.trim()||null,y.description.trim()||null,y.isReal),e==null||e(`Sponsor "${y.name}" updated`,"success"),m(null),w({name:"",tagline:"",description:"",isReal:!1}),g()}catch(_){e==null||e(`Error updating sponsor: ${_.message}`,"error")}},d=async _=>{if(await t(`Delete sponsor "${_.name}"?`))try{await ne.deleteSponsor(_.id),e==null||e(`Sponsor "${_.name}" deleted`,"success"),g()}catch(I){e==null||e(`Error deleting sponsor: ${I.message}`,"error")}},u=_=>{m(_),w({name:_.name,tagline:_.tagline||"",description:_.description||"",isReal:_.is_real}),o(!1)},f=()=>{m(null),w({name:"",tagline:"",description:"",isReal:!1})},C=r.filter(_=>x==="fake"?!_.is_real:x==="real"?_.is_real:!0),L=r.filter(_=>!_.is_real).length,z=r.filter(_=>_.is_real).length;return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Sponsors & Commercials"}),n.jsx("p",{className:"text-orange-100 text-sm",children:"Fake commercials and real sponsors"})]}),n.jsx("button",{onClick:()=>{o(!0),m(null),w({name:"",tagline:"",description:"",isReal:!1})},className:"px-3 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium text-sm transition-colors",children:"+ Add Sponsor"})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("button",{onClick:()=>E("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["All (",r.length,")"]}),n.jsxs("button",{onClick:()=>E("fake"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="fake"?"bg-orange-500 text-white":"bg-orange-100 text-orange-700 hover:bg-orange-200"}`,children:[" Fake Commercials (",L,")"]}),n.jsxs("button",{onClick:()=>E("real"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="real"?"bg-green-500 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[" Real Sponsors (",z,")"]})]}),(i||c)&&n.jsxs("div",{className:"mb-6 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[n.jsx("h3",{className:"font-medium text-orange-800 mb-3",children:c?"Edit Sponsor":"Add New Sponsor"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:y.name,onChange:_=>w({...y,name:_.target.value}),placeholder:"e.g., Totino's Pizza Rolls",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tagline"}),n.jsx("input",{type:"text",value:y.tagline,onChange:_=>w({...y,tagline:_.target.value}),placeholder:"e.g., Pizza in the morning, pizza in the evening...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("input",{type:"text",value:y.description,onChange:_=>w({...y,description:_.target.value}),placeholder:"e.g., Recurring fake sponsor for pizza-related bits",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y.isReal,onChange:_=>w({...y,isReal:_.target.checked}),className:"w-4 h-4 text-green-500 border-gray-300 rounded focus:ring-green-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:"This is a real sponsor (not a fake commercial)"})]})})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx("button",{onClick:c?R:k,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium text-sm transition-colors",children:c?"Update":"Add Sponsor"}),n.jsx("button",{onClick:()=>{o(!1),f()},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium text-sm transition-colors",children:"Cancel"})]})]}),l?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-orange-200 border-t-orange-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading sponsors..."})]}):C.length===0?n.jsx("div",{className:"text-center py-12 text-gray-400",children:x==="all"?"No sponsors yet. Add fake commercials and real sponsors.":x==="fake"?"No fake commercials yet.":"No real sponsors yet."}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(_=>n.jsxs("div",{className:`p-4 rounded-lg border hover:shadow-md transition-shadow ${_.is_real?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg ${_.is_real?"bg-green-500":"bg-orange-500"}`,children:_.is_real?"":""}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-800",children:_.name}),n.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${_.is_real?"bg-green-200 text-green-700":"bg-orange-200 text-orange-700"}`,children:_.is_real?"Real Sponsor":"Fake Commercial"})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>u(_),className:"p-1 text-orange-600 hover:bg-orange-100 rounded transition-colors",title:"Edit",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),n.jsx("button",{onClick:()=>d(_),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Delete",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]}),_.tagline&&n.jsxs("p",{className:`text-sm italic mb-2 ${_.is_real?"text-green-600":"text-orange-600"}`,children:['"',_.tagline,'"']}),_.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:_.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-2",children:[n.jsxs("span",{children:[_.mention_count||0," mentions"]}),_.first_episode_title&&n.jsxs("span",{className:"truncate",children:["First: ",_.first_episode_title]})]})]},_.id))})]})]})}function mu({rule:e,onSave:t,onDelete:r,onTest:s,isNew:l=!1}){var q;const[a,i]=p.useState(l),[o,c]=p.useState(l),[m,y]=p.useState({...e}),[w,x]=p.useState(null),[E,g]=p.useState(!1),[k,R]=p.useState(!1),[d,u]=p.useState(""),f=e.category==="bonus"&&e.priority===99,C=(m.keywords||"").split(",").map($=>$.trim()).filter($=>$.length>0),L=$=>{y(V=>({...V,keywords:$.join(", ")}))},z=()=>{const $=d.trim();$&&!C.includes($)&&(L([...C,$]),u(""))},_=$=>{L(C.filter((V,J)=>J!==$))},I=async()=>{R(!0);try{await t(m),c(!1)}catch($){console.error("Save failed:",$)}finally{R(!1)}},te=async()=>{g(!0),x(null);try{const $=await s(m.title_pattern,m.keywords||null);x($)}catch($){x({error:$.message||$.toString()})}finally{g(!1)}},S=()=>{y({...e}),c(!1),x(null),l&&(r==null||r(e.id))};return n.jsxs("div",{className:"border rounded-lg overflow-hidden",style:{borderColor:e.color||"#e5e7eb"},children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 cursor-pointer hover:bg-gray-50",onClick:()=>{o||i(!a)},children:[n.jsx("span",{className:"text-xl",children:m.icon||"?"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-gray-800",children:m.display_name}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:m.color||"#6b7280"},children:m.category}),n.jsxs("span",{className:"text-xs text-gray-400",children:["priority: ",m.priority]})]})}),!o&&n.jsx("button",{onClick:$=>{$.stopPropagation(),c(!0),i(!0)},className:"text-xs px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 text-gray-600",children:"Edit"}),n.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&n.jsx("div",{className:"border-t px-4 py-3 space-y-3 bg-gray-50",children:o?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Display Name"}),n.jsx("input",{type:"text",value:m.display_name,onChange:$=>y(V=>({...V,display_name:$.target.value})),className:"w-full px-2 py-1.5 text-sm border rounded focus:ring-2 focus:ring-blue-400 focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Category Slug"}),n.jsx("input",{type:"text",value:m.category,onChange:$=>y(V=>({...V,category:$.target.value})),disabled:!l,className:"w-full px-2 py-1.5 text-sm border rounded focus:ring-2 focus:ring-blue-400 focus:outline-none disabled:bg-gray-100 disabled:text-gray-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Icon (emoji)"}),n.jsx("input",{type:"text",value:m.icon||"",onChange:$=>y(V=>({...V,icon:$.target.value})),className:"w-full px-2 py-1.5 text-sm border rounded focus:ring-2 focus:ring-blue-400 focus:outline-none",placeholder:"e.g. emoji"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Color"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"color",value:m.color||"#6b7280",onChange:$=>y(V=>({...V,color:$.target.value})),className:"w-8 h-8 rounded border cursor-pointer"}),n.jsx("input",{type:"text",value:m.color||"",onChange:$=>y(V=>({...V,color:$.target.value})),className:"flex-1 px-2 py-1.5 text-sm border rounded focus:ring-2 focus:ring-blue-400 focus:outline-none",placeholder:"#hexcolor"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Priority"}),n.jsx("input",{type:"number",value:m.priority,onChange:$=>y(V=>({...V,priority:parseInt($.target.value)||0})),className:"w-full px-2 py-1.5 text-sm border rounded focus:ring-2 focus:ring-blue-400 focus:outline-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Title Pattern (regex)"}),n.jsx("input",{type:"text",value:m.title_pattern,onChange:$=>y(V=>({...V,title_pattern:$.target.value})),className:"w-full px-2 py-1.5 text-sm border rounded font-mono focus:ring-2 focus:ring-blue-400 focus:outline-none",placeholder:"(?i)regex pattern"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Number Pattern (regex, optional)"}),n.jsx("input",{type:"text",value:m.number_pattern||"",onChange:$=>y(V=>({...V,number_pattern:$.target.value||null})),className:"w-full px-2 py-1.5 text-sm border rounded font-mono focus:ring-2 focus:ring-blue-400 focus:outline-none",placeholder:"(?i)capture group (\\d+)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Keywords (matched before regex, case-insensitive)"}),n.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:C.map(($,V)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-white border",style:{borderColor:m.color||"#d1d5db",color:m.color||"#374151"},children:[$,n.jsx("button",{onClick:()=>_(V),className:"hover:text-red-500 font-bold",children:"x"})]},V))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:d,onChange:$=>u($.target.value),onKeyDown:$=>{$.key==="Enter"&&($.preventDefault(),z())},className:"flex-1 px-2 py-1.5 text-sm border rounded focus:ring-2 focus:ring-blue-400 focus:outline-none",placeholder:"Add keyword..."}),n.jsx("button",{onClick:z,disabled:!d.trim(),className:"px-3 py-1.5 text-sm rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-40",children:"Add"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[n.jsx("button",{onClick:te,disabled:E||!m.title_pattern,className:"px-3 py-1.5 text-sm rounded bg-indigo-100 hover:bg-indigo-200 text-indigo-700 disabled:opacity-40",children:E?"Testing...":"Test Pattern"}),w&&!w.error&&n.jsxs("span",{className:"text-sm text-gray-600",children:[w.match_count," episode",w.match_count!==1?"s":""," matched"]}),(w==null?void 0:w.error)&&n.jsx("span",{className:"text-sm text-red-600",children:w.error})]}),((q=w==null?void 0:w.samples)==null?void 0:q.length)>0&&n.jsxs("div",{className:"max-h-40 overflow-y-auto bg-white rounded border p-2",children:[w.samples.map(($,V)=>n.jsxs("div",{className:"text-xs text-gray-600 py-0.5 flex items-center gap-1.5",children:[n.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${$.matched_by==="keyword"?"bg-amber-400":"bg-indigo-400"}`}),n.jsx("span",{className:"truncate",children:$.title})]},V)),w.match_count>20&&n.jsxs("div",{className:"text-xs text-gray-400 pt-1",children:["...and ",w.match_count-20," more"]})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[n.jsx("button",{onClick:I,disabled:k,className:"px-4 py-1.5 text-sm rounded bg-blue-500 hover:bg-blue-600 text-white disabled:opacity-50",children:k?"Saving...":"Save"}),n.jsx("button",{onClick:S,className:"px-4 py-1.5 text-sm rounded bg-gray-200 hover:bg-gray-300 text-gray-700",children:"Cancel"}),!l&&!f&&n.jsx("button",{onClick:()=>r(e.id),className:"ml-auto px-3 py-1.5 text-sm rounded bg-red-100 hover:bg-red-200 text-red-600",children:"Delete"})]})]}):n.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Pattern:"})," ",n.jsx("code",{className:"text-xs bg-white px-1 py-0.5 rounded",children:e.title_pattern})]}),e.number_pattern&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Number:"})," ",n.jsx("code",{className:"text-xs bg-white px-1 py-0.5 rounded",children:e.number_pattern})]}),C.length>0&&n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:"text-gray-400",children:"Keywords:"}),C.map(($,V)=>n.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-white border",children:$},V))]})]})})]})}function If({onNotification:e}){const[t,r]=p.useState([]),[s,l]=p.useState(!0),[a,i]=p.useState(!1),[o,c]=p.useState(!1),m=p.useCallback(async()=>{l(!0);try{const d=await be.getCategoryRules();r(d||[])}catch(d){console.error("Error loading category rules:",d),e==null||e("Error loading category rules","error")}finally{l(!1)}},[e]);p.useEffect(()=>{m()},[m]);const y=async d=>{if(!t.some(f=>f.id===d.id)){const f=await be.addCategoryRule(d);return e==null||e(`Rule "${d.display_name}" added`,"success"),c(!1),await m(),f}else await be.updateCategoryRule(d),e==null||e(`Rule "${d.display_name}" updated`,"success"),await m()},w=async d=>{if(d===-1){c(!1);return}try{await be.deleteCategoryRule(d),e==null||e("Rule deleted","success"),await m()}catch(u){e==null||e(u.message||"Error deleting rule","error")}},x=async(d,u)=>await be.testCategoryRule(d,u),E=async()=>{i(!0);try{const d=await be.recategorizeAllEpisodes(),u=d.counts||{},f=Object.entries(u).map(([C,L])=>`${C}: ${L}`).join(", ");e==null||e(`Recategorized ${d.total} episodes (${f})`,"success")}catch(d){e==null||e(`Recategorize failed: ${d.message||d}`,"error")}finally{i(!1)}},g=()=>{c(!0)},k=t.reduce((d,u)=>Math.max(d,u.priority),0),R={id:-1,category:"",display_name:"",title_pattern:"",number_pattern:null,priority:k>90?k-1:k+1,icon:"",color:"#6b7280",keywords:null};return n.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-amber-800",children:"Category Rules"}),n.jsx("p",{className:"text-sm text-amber-600 mt-0.5",children:"Rules for auto-categorizing episodes. Checked in priority order (lowest first)."})]}),n.jsx("button",{onClick:E,disabled:a,className:"px-3 py-1.5 text-sm rounded bg-amber-200 hover:bg-amber-300 text-amber-800 disabled:opacity-50",children:a?"Re-categorizing...":"Re-categorize All"})]}),s?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-8 h-8 border-3 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-2"}),n.jsx("div",{className:"text-sm text-amber-600",children:"Loading rules..."})]}):n.jsxs("div",{className:"space-y-2",children:[t.map(d=>n.jsx(mu,{rule:d,onSave:y,onDelete:w,onTest:x},d.id)),o&&n.jsx(mu,{rule:R,onSave:y,onDelete:w,onTest:x,isNew:!0},"new"),!o&&n.jsx("button",{onClick:g,className:"w-full py-2 text-sm rounded border-2 border-dashed border-amber-300 text-amber-600 hover:bg-amber-100 hover:border-amber-400",children:"+ Add Rule"})]})]})}function Uf({onNotification:e}){const[t,r]=p.useState({}),[s,l]=p.useState(!0),[a,i]=p.useState(!1),[o,c]=p.useState(!1),[m,y]=p.useState(!1);p.useEffect(()=>{E(),w()},[]);const w=async()=>{try{const f=await Zi.getPreventSleep();c(f)}catch(f){console.error("Error checking prevent sleep:",f)}},x=async()=>{y(!0);try{const f=!o,C=await Zi.setPreventSleep(f);c(C),e==null||e(C?"Prevent sleep enabled":"Prevent sleep disabled","success")}catch(f){console.error("Error toggling prevent sleep:",f),e==null||e(`Error: ${f.message||f}`,"error")}finally{y(!1)}},E=async()=>{l(!0);try{const f=await au.getAllSettings();r(f||{})}catch(f){console.error("Error loading settings:",f),e==null||e("Error loading settings","error")}finally{l(!1)}},g=async(f,C)=>{i(!0);try{await au.setSetting(f,C),r(L=>({...L,[f]:C})),e==null||e(`Setting "${f}" updated`,"success")}catch(L){console.error("Error updating setting:",L),e==null||e(`Error updating setting: ${L.message}`,"error")}finally{i(!1)}},k=()=>{const f=t.auto_transcribe==="true";g("auto_transcribe",(!f).toString())},R=()=>{const f=t.enable_diarization==="true";g("enable_diarization",(!f).toString())},d=t.auto_transcribe==="true",u=t.enable_diarization==="true";return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 px-6 py-4",children:n.jsx("h2",{className:"text-xl font-bold text-white",children:"Settings"})}),n.jsx("div",{className:"p-6",children:s?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-gray-200 border-t-gray-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Loading settings..."})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-blue-800",children:"Auto-Transcribe"}),n.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Automatically transcribe downloaded episodes when the queue is empty. Episodes are processed in order of publish date (newest first)."})]}),n.jsx("button",{onClick:k,disabled:a,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors ${d?"bg-blue-500":"bg-gray-300"} ${a?"opacity-50":""}`,children:n.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${d?"translate-x-8":"translate-x-1"}`})})]}),n.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d?"bg-blue-200 text-blue-800":"bg-gray-200 text-gray-600"}`,children:d?"ON":"OFF"}),d&&n.jsx("span",{className:"text-xs text-blue-600",children:"Worker will automatically pick up next episode when idle"})]})]}),n.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-purple-800",children:"Speaker Diarization"}),n.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"Identify who is speaking in each segment. Requires HuggingFace token and adds processing time."})]}),n.jsx("button",{onClick:R,disabled:a,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors ${u?"bg-purple-500":"bg-gray-300"} ${a?"opacity-50":""}`,children:n.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${u?"translate-x-8":"translate-x-1"}`})})]}),n.jsx("div",{className:"mt-3 flex items-center gap-2",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${u?"bg-purple-200 text-purple-800":"bg-gray-200 text-gray-600"}`,children:u?"ON":"OFF"})})]}),n.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-amber-800",children:"Prevent Sleep"}),n.jsxs("p",{className:"text-sm text-amber-600 mt-1",children:["Keep your Mac awake while processing the queue. Uses macOS ",n.jsx("code",{className:"text-xs bg-amber-100 px-1 py-0.5 rounded",children:"caffeinate"})," to prevent sleep on AC power. Enable this for overnight batch runs."]})]}),n.jsx("button",{onClick:x,disabled:m,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors ${o?"bg-amber-500":"bg-gray-300"} ${m?"opacity-50":""}`,children:n.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${o?"translate-x-8":"translate-x-1"}`})})]}),n.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${o?"bg-amber-200 text-amber-800":"bg-gray-200 text-gray-600"}`,children:o?"AWAKE":"OFF"}),o&&n.jsx("span",{className:"text-xs text-amber-600",children:"Mac will stay awake until this is turned off or the app closes"})]}),n.jsx("p",{className:"text-xs text-amber-500 mt-2",children:"Without this, macOS will sleep after a period of inactivity, pausing all pipeline processing. Only works while plugged into AC power."})]}),n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Transcription Model"}),n.jsxs("select",{value:t.transcription_model||"medium",onChange:f=>g("transcription_model",f.target.value),disabled:a,className:"w-full md:w-64 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"tiny",children:"Tiny (fastest, lowest quality)"}),n.jsx("option",{value:"base",children:"Base (fast, basic quality)"}),n.jsx("option",{value:"small",children:"Small (balanced)"}),n.jsx("option",{value:"medium",children:"Medium (recommended)"}),n.jsx("option",{value:"large-v3",children:"Large v3 (best quality, slowest)"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Larger models are more accurate but take longer to process."})]}),n.jsx(If,{onNotification:e}),n.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg border border-gray-200",children:[n.jsx("h3",{className:"font-medium text-gray-700 mb-2 text-sm",children:"Current Settings"}),n.jsx("pre",{className:"text-xs text-gray-600 overflow-auto",children:JSON.stringify(t,null,2)})]})]})})]})}function Vf(e){const t=p.useRef(0);return p.useCallback(async(...s)=>{const l=++t.current;try{const a=await e(...s);return l!==t.current?null:a}catch(a){if(l!==t.current)return null;throw a}},[e])}const fu=async()=>{try{const{listen:e}=await Qs(async()=>{const{listen:t}=await import("./event-D_6HwoE_.js");return{listen:t}},[]);return e}catch{return null}};function Wf(e){if(e==null)return"--:--";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),s=Math.floor(e%60);return t>0?`${t}:${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${r}:${s.toString().padStart(2,"0")}`}function Bf({onNotification:e,onViewEpisode:t}){const[r,s]=p.useState(""),[l,a]=p.useState([]),[i,o]=p.useState(!1),[c,m]=p.useState(0),[y,w]=p.useState({indexed_segments:0,unindexed_episode_count:0}),[x,E]=p.useState(0),[g,k]=p.useState(!1),[R,d]=p.useState({current:0,total:0}),u=25,f=Vf(ps.searchTranscripts);p.useEffect(()=>{C()},[]);const C=async()=>{try{const $=await ps.getSearchStats();w($)}catch($){console.error("Error loading search stats:",$)}},L=p.useCallback(async($=!0)=>{if(!r.trim()){a([]),m(0);return}o(!0),$&&E(0);try{const V=$?0:x,J=await f(r.trim(),u,V*u);if(!J)return;a(J.results||[]),m(J.total||0)}catch(V){console.error("Search failed:",V),e==null||e(`Search failed: ${V.message}`,"error"),a([])}finally{o(!1)}},[r,x,u,e,f]),z=$=>{$.key==="Enter"&&L(!0)},_=$=>{E($),setTimeout(()=>L(!1),0)},I=async()=>{k(!0),d({current:0,total:0,episode_title:""});let $=null,V=null;try{const J=await fu();J&&($=await J("indexing_progress",se=>{d({current:se.payload.current,total:se.payload.total,episode_title:se.payload.episode_title})}),V=await J("indexing_complete",se=>{const{indexed:Z,failed:b,total:H}=se.payload;e==null||e(`Indexing complete: ${Z} indexed, ${b} failed`,Z>0?"success":"warning")})),e==null||e("Starting transcript indexing...","info");const le=await ps.indexAllTranscripts();le&&(e==null||e(`Indexed ${le.indexed} episodes (${le.failed} failed)`,le.indexed>0?"success":"warning")),await C()}catch(J){console.error("Indexing failed:",J),e==null||e(`Indexing failed: ${J.message}`,"error")}finally{$&&$(),V&&V(),k(!1),d({current:0,total:0,episode_title:""})}},te=async()=>{k(!0),d({current:0,total:0,episode_title:""});let $=null,V=null;try{const J=await fu();J&&($=await J("indexing_progress",se=>{d({current:se.payload.current,total:se.payload.total,episode_title:se.payload.episode_title})}),V=await J("indexing_complete",se=>{const{indexed:Z,failed:b}=se.payload;e==null||e(`Reindex complete: ${Z} episodes updated, ${b} failed`,Z>0?"success":"warning")})),e==null||e("Reindexing all transcripts with speaker names...","info");const le=await ps.reindexAllWithSpeakers();le&&(e==null||e(`Reindexed ${le.indexed} episodes (${le.failed} failed)`,le.indexed>0?"success":"warning")),await C()}catch(J){console.error("Reindex failed:",J),e==null||e(`Reindex failed: ${J.message}`,"error")}finally{$&&$(),V&&V(),k(!1),d({current:0,total:0,episode_title:""})}},S=async $=>{t&&t($.episode_id,$.start_time)},q=Math.ceil(c/u);return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Search Transcripts"}),n.jsx("p",{className:"text-indigo-100 text-sm",children:"Search across all episode transcripts with timestamps"})]}),n.jsxs("div",{className:"text-right text-sm text-indigo-100",children:[n.jsxs("div",{children:[y.indexed_segments.toLocaleString()," segments indexed"]}),y.unindexed_episode_count>0&&n.jsxs("div",{className:"text-yellow-200",children:[y.unindexed_episode_count," episodes need indexing"]})]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex gap-3 mb-6",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("input",{type:"text",value:r,onChange:$=>s($.target.value),onKeyDown:z,placeholder:'Search for quotes, characters, topics... (e.g., "Sweet Bean" OR "pizza rolls")',className:"w-full px-4 py-3 pl-11 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-lg"}),n.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),n.jsx("button",{onClick:()=>L(!0),disabled:i||!r.trim(),className:"px-6 py-3 bg-indigo-500 hover:bg-indigo-600 disabled:bg-gray-300 text-white rounded-lg font-medium transition-colors",children:i?"Searching...":"Search"})]}),l.length===0&&!i&&!r&&n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-medium text-indigo-800 mb-2",children:"Search Tips"}),n.jsxs("ul",{className:"text-sm text-indigo-700 space-y-1",children:[n.jsxs("li",{children:["Use quotes for exact phrases: ",n.jsx("code",{className:"bg-indigo-100 px-1 rounded",children:'"Sweet Bean"'})]}),n.jsxs("li",{children:["Use OR for alternatives: ",n.jsx("code",{className:"bg-indigo-100 px-1 rounded",children:"pizza OR burger"})]}),n.jsxs("li",{children:["Use * for wildcards: ",n.jsx("code",{className:"bg-indigo-100 px-1 rounded",children:"Matting*"})]}),n.jsxs("li",{children:["Use - to exclude: ",n.jsx("code",{className:"bg-indigo-100 px-1 rounded",children:"commercial -sponsor"})]})]})]}),c>0&&n.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["Found ",c.toLocaleString(),' results for "',r,'"',q>1&&` (page ${x+1} of ${q})`]}),i?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-indigo-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-4"}),n.jsx("div",{className:"text-gray-500",children:"Searching transcripts..."})]}):l.length===0&&r?n.jsxs("div",{className:"text-center py-12 text-gray-400",children:[n.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})}),n.jsxs("p",{children:['No results found for "',r,'"']}),n.jsx("p",{className:"text-sm mt-2",children:"Try different keywords or check if episodes are indexed"})]}):n.jsx("div",{className:"space-y-3",children:l.map($=>n.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer bg-white",onClick:()=>S($),children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs("span",{className:"text-xs font-medium text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded",children:["Ep ",$.episode_number||"?"]}),n.jsx("span",{className:"font-medium text-gray-800 truncate",children:$.episode_title})]}),$.speaker&&n.jsxs("span",{className:"text-xs text-gray-500",children:["Speaker: ",$.speaker]})]}),n.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded-lg text-sm font-medium transition-colors",onClick:V=>{V.stopPropagation(),S($)},children:[n.jsx("span",{className:"font-mono",children:Wf($.start_time)}),n.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})]})]}),n.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",dangerouslySetInnerHTML:{__html:$.snippet||$.text}})]},$.id))}),q>1&&n.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[n.jsx("button",{onClick:()=>_(x-1),disabled:x===0||i,className:"px-3 py-1 border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),n.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,q)},($,V)=>{let J;return q<=5||x<3?J=V:x>q-4?J=q-5+V:J=x-2+V,n.jsx("button",{onClick:()=>_(J),disabled:i,className:`w-8 h-8 rounded ${J===x?"bg-indigo-500 text-white":"border border-gray-300 hover:bg-gray-50"}`,children:J+1},J)})}),n.jsx("button",{onClick:()=>_(x+1),disabled:x>=q-1||i,className:"px-3 py-1 border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]}),n.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-700 text-sm",children:"Re-index with Speaker Names"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Resolves raw SPEAKER_00 labels to real names across all transcribed episodes"})]}),n.jsx("button",{onClick:te,disabled:g,className:"ml-4 flex-shrink-0 px-4 py-2 bg-indigo-500 hover:bg-indigo-600 disabled:bg-gray-300 text-white rounded-lg font-medium text-sm transition-colors",children:g?"Working...":"Reindex with Speakers"})]}),g&&R.total>0&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[n.jsx("span",{className:"truncate flex-1",children:R.episode_title||"Indexing..."}),n.jsxs("span",{className:"ml-2",children:[R.current," / ",R.total]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-500 h-2 rounded-full transition-all",style:{width:`${R.current/R.total*100}%`}})})]})]}),y.unindexed_episode_count>0&&n.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-medium text-yellow-800",children:[y.unindexed_episode_count," episodes need indexing"]}),n.jsx("p",{className:"text-sm text-yellow-700",children:"Index transcripts to enable full-text search"})]}),n.jsx("button",{onClick:I,disabled:g,className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 disabled:bg-yellow-300 text-white rounded-lg font-medium text-sm transition-colors",children:g?"Indexing...":"Index All"})]}),g&&R.total>0&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between text-xs text-yellow-700 mb-1",children:[n.jsx("span",{className:"truncate flex-1",children:R.episode_title||"Indexing..."}),n.jsxs("span",{className:"ml-2",children:[R.current," / ",R.total]})]}),n.jsx("div",{className:"w-full bg-yellow-200 rounded-full h-2",children:n.jsx("div",{className:"bg-yellow-500 h-2 rounded-full transition-all",style:{width:`${R.current/R.total*100}%`}})})]})]})]})]})}function Qf({onNotification:e}){const t=Hs(),[r,s]=p.useState(null),[l,a]=p.useState([]),[i,o]=p.useState(null),[c,m]=p.useState(!1),[y,w]=p.useState([]),[x,E]=p.useState(null),[g,k]=p.useState(null),[R,d]=p.useState(!1),[u,f]=p.useState(!1),[C,L]=p.useState(""),[z,_]=p.useState({name:"",description:"",content_type:"custom",prompt_text:"",system_prompt:"",output_schema:"",is_active:!0});p.useEffect(()=>{I(),te(),S()},[]);const I=async()=>{try{const b=await Br.getOllamaStatus();s(b)}catch(b){console.error("Failed to get Ollama status:",b)}},te=async()=>{try{const b=await Br.getPrompts();a(b)}catch(b){console.error("Failed to load prompts:",b)}},S=async()=>{try{const b=await be.getEpisodes({feed_source:"patreon",transcribed_only:!0,limit:100,sort_by:"published_date",sort_desc:!0});w(b.episodes||[])}catch(b){console.error("Failed to load episodes:",b)}},q=b=>{o(b),_({name:b.name,description:b.description||"",content_type:b.content_type,prompt_text:b.prompt_text,system_prompt:b.system_prompt||"",output_schema:b.output_schema||"",is_active:b.is_active}),m(!1),k(null)},$=()=>{o(null),_({name:"",description:"",content_type:"custom",prompt_text:"",system_prompt:"You are a content extraction assistant. Analyze podcast transcripts and extract structured information. Always respond with valid JSON.",output_schema:"",is_active:!0}),m(!0),k(null)},V=async()=>{d(!0);try{i?(await Br.updatePrompt(i.id,z.name,z.description||null,z.content_type,z.prompt_text,z.system_prompt||null,z.output_schema||null,z.is_active),e==null||e("Prompt updated","success")):(await Br.createPrompt(z.name,z.description||null,z.content_type,z.prompt_text,z.system_prompt||null,z.output_schema||null),e==null||e("Prompt created","success")),await te(),m(!1)}catch(b){const H=typeof b=="string"?b:(b==null?void 0:b.message)||"Unknown error";e==null||e(`Failed to save prompt: ${H}`,"error")}finally{d(!1)}},J=async()=>{if(i&&await t(`Delete prompt "${i.name}"?`)){d(!0);try{await Br.deletePrompt(i.id),e==null||e("Prompt deleted","success"),o(null),await te()}catch(b){const H=typeof b=="string"?b:(b==null?void 0:b.message)||"Unknown error";e==null||e(`Failed to delete prompt: ${H}`,"error")}finally{d(!1)}}},le=async()=>{if(!i||!x){e==null||e("Select a prompt and episode first","warning");return}d(!0),k(null);try{const b=await Br.runExtraction(i.id,x.id);k(b),b.status==="completed"?e==null||e(`Extracted ${b.items_extracted} items in ${(b.duration_ms/1e3).toFixed(1)}s`,"success"):e==null||e(`Extraction failed: ${b.error}`,"error")}catch(b){const H=typeof b=="string"?b:(b==null?void 0:b.message)||"Unknown error";e==null||e(`Extraction failed: ${H}`,"error")}finally{d(!1)}},se=async()=>{if(!z.prompt_text||!C){e==null||e("Enter prompt text and sample text","warning");return}d(!0),k(null);try{const b=await Br.testPrompt(z.prompt_text,z.system_prompt||null,C);k(b),b.status==="completed"?e==null||e(`Test completed in ${(b.duration_ms/1e3).toFixed(1)}s`,"success"):e==null||e(`Test failed: ${b.error}`,"error")}catch(b){const H=typeof b=="string"?b:(b==null?void 0:b.message)||"Unknown error";e==null||e(`Test failed: ${H}`,"error")}finally{d(!1)}},Z=[{value:"character",label:"Character Detection"},{value:"trivia",label:"Trivia Scores"},{value:"guest",label:"Guest Detection"},{value:"segment",label:"Segment Detection"},{value:"custom",label:"Custom"}];return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"LLM Content Extraction"}),n.jsx("p",{className:"text-purple-100 text-sm",children:"Create and run extraction prompts with local Ollama"})]}),n.jsx("div",{className:"text-right",children:r?n.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.running&&r.model_available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r.running&&r.model_available?`Ollama: ${r.model}`:r.error||"Ollama not running"}):n.jsx("div",{className:"px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-600",children:"Checking Ollama..."})})]})}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Extraction Prompts"}),n.jsx("button",{onClick:$,className:"px-3 py-1 bg-purple-500 hover:bg-purple-600 text-white rounded text-sm",children:"+ New"})]}),n.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[l.map(b=>n.jsxs("div",{onClick:()=>q(b),className:`p-3 rounded-lg border cursor-pointer transition-colors ${(i==null?void 0:i.id)===b.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-gray-900",children:b.name}),n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${b.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:b.content_type})]}),b.description&&n.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:b.description}),n.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[b.run_count," runs"]})]},b.id)),l.length===0&&n.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"No prompts yet"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:c?i?"Edit Prompt":"New Prompt":"Prompt Details"}),i&&!c&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>m(!0),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm",children:"Edit"}),n.jsx("button",{onClick:J,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 rounded text-sm",children:"Delete"})]})]}),i||c?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),n.jsx("input",{type:"text",value:z.name,onChange:b=>_({...z,name:b.target.value}),disabled:!c,className:"w-full px-3 py-2 border rounded-lg disabled:bg-gray-50",placeholder:"Character Detection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),n.jsx("select",{value:z.content_type,onChange:b=>_({...z,content_type:b.target.value}),disabled:!c,className:"w-full px-3 py-2 border rounded-lg disabled:bg-gray-50",children:Z.map(b=>n.jsx("option",{value:b.value,children:b.label},b.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("input",{type:"text",value:z.description,onChange:b=>_({...z,description:b.target.value}),disabled:!c,className:"w-full px-3 py-2 border rounded-lg disabled:bg-gray-50",placeholder:"What this prompt extracts..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Extraction Prompt"}),n.jsx("textarea",{value:z.prompt_text,onChange:b=>_({...z,prompt_text:b.target.value}),disabled:!c,rows:6,className:"w-full px-3 py-2 border rounded-lg font-mono text-sm disabled:bg-gray-50",placeholder:"Analyze this transcript and find..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"System Prompt (optional)"}),n.jsx("textarea",{value:z.system_prompt,onChange:b=>_({...z,system_prompt:b.target.value}),disabled:!c,rows:3,className:"w-full px-3 py-2 border rounded-lg font-mono text-sm disabled:bg-gray-50",placeholder:"You are a content extraction assistant..."})]}),c&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:V,disabled:R||!z.name||!z.prompt_text,className:"flex-1 px-4 py-2 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-300 text-white rounded-lg font-medium",children:R?"Saving...":"Save Prompt"}),n.jsx("button",{onClick:()=>{m(!1),i||_({name:"",description:"",content_type:"custom",prompt_text:"",system_prompt:"",output_schema:"",is_active:!0})},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",children:"Cancel"})]})]}):n.jsx("div",{className:"text-gray-400 text-center py-8",children:"Select a prompt or create a new one"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Run Extraction"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>f(!1),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium ${u?"bg-gray-100 text-gray-600":"bg-purple-100 text-purple-700"}`,children:"Run on Episode"}),n.jsx("button",{onClick:()=>f(!0),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium ${u?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"}`,children:"Test Mode"})]}),u?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sample Text"}),n.jsx("textarea",{value:C,onChange:b=>L(b.target.value),rows:6,className:"w-full px-3 py-2 border rounded-lg font-mono text-sm",placeholder:"Paste sample transcript text here to test your prompt..."})]}),n.jsx("button",{onClick:se,disabled:R||!z.prompt_text||!C||!(r!=null&&r.running),className:"w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-lg font-medium",children:R?"Testing...":"Test Prompt"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Episode"}),n.jsxs("select",{value:(x==null?void 0:x.id)||"",onChange:b=>{const H=y.find(ee=>ee.id===parseInt(b.target.value));E(H)},className:"w-full px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"Choose an episode..."}),y.map(b=>n.jsxs("option",{value:b.id,children:[b.episode_number?`#${b.episode_number}: `:"",b.title]},b.id))]})]}),n.jsx("button",{onClick:le,disabled:R||!i||!x||!(r!=null&&r.running),className:"w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-lg font-medium",children:R?"Running...":"Run Extraction"})]}),g&&n.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:`font-medium ${g.status==="completed"?"text-green-700":"text-red-700"}`,children:g.status==="completed"?"Success":"Failed"}),n.jsxs("span",{className:"text-sm text-gray-500",children:[(g.duration_ms/1e3).toFixed(1),"s"]})]}),g.error&&n.jsx("div",{className:"text-red-600 text-sm mb-2",children:g.error}),g.parsed_json&&n.jsx("div",{className:"bg-white p-3 rounded border overflow-auto max-h-64",children:n.jsx("pre",{className:"text-xs text-gray-700",children:JSON.stringify(g.parsed_json,null,2)})}),!g.parsed_json&&g.raw_response&&n.jsx("div",{className:"bg-white p-3 rounded border overflow-auto max-h-64",children:n.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:g.raw_response})}),g.items_extracted>0&&n.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Extracted ",g.items_extracted," item(s)"]})]})]})]})})]})}function Hf(){const[e,t]=p.useState(!1),[r,s]=p.useState("episodes"),[l,a]=p.useState({total_episodes:0,transcribed_episodes:0,downloaded_episodes:0,in_queue:0,failed:0,completion_rate:{downloaded:0,total:0}}),[i,o]=p.useState(null),[c,m]=p.useState(null),[y,w]=p.useState(null);p.useEffect(()=>{F?(console.log("Running in Tauri mode"),t(!0),(async()=>await df({onStatusUpdate:d=>{console.log("Status update:",d),E()},onQueueUpdate:d=>{console.log("Queue update:",d),x()},onStatsUpdate:d=>{console.log("Stats update:",d),x()},onTranscriptionComplete:d=>{g(`Transcription completed for episode ${d}`,"success"),x()},onTranscriptionFailed:([d,u])=>{g(`Transcription failed: ${u}`,"error")}}))()):(console.log("Running in browser mode (Socket.IO)"),Qs(async()=>{const{io:k}=await import("./index-wSuXe0Ee.js");return{io:k}},[]).then(({io:k})=>{const R=k();return R.on("connect",()=>{console.log("Connected to server"),t(!0),R.emit("request_update")}),R.on("disconnect",()=>{console.log("Disconnected from server"),t(!1)}),R.on("status_update",d=>{o(d)}),R.on("stats_update",d=>{a(d)}),R.on("download_complete",d=>{g(`Downloaded: ${d.episode}`,"success")}),R.on("download_error",d=>{g(`Error: ${d.error}`,"error")}),()=>R.close()}))},[]),p.useEffect(()=>{x(),E()},[]),p.useEffect(()=>{const k=setInterval(()=>{E(),x()},5e3);return()=>clearInterval(k)},[]);const x=async()=>{try{const k=await js.getStats();k&&a(k)}catch(k){console.error("Error loading stats:",k)}},E=async()=>{try{const k=await Zi.getStatus();k&&!k.error?o(k):o({status:"idle",current_episode:null,progress:null,elapsed_seconds:null,estimated_remaining_seconds:null,last_activity:null,next_check_seconds:60,worker_info:{model:"unknown",memory_mb:null,memory_percent:null,processed_today:null}})}catch(k){console.error("Error loading status:",k),o(null)}},g=(k,R="success")=>{m({message:k,type:R}),setTimeout(()=>m(null),5e3)};return n.jsxs("div",{className:"min-h-screen bg-cream-100",children:[n.jsx(af,{connected:e,isTauri:F}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[n.jsx("div",{className:"border-b border-cream-200",children:n.jsx("nav",{className:"flex gap-1",children:[{id:"episodes",label:"Episodes",icon:""},{id:"search",label:"Search",icon:""},{id:"extraction",label:"Extraction",icon:""},{id:"speakers",label:"Audio ID",icon:""},{id:"characters",label:"Characters",icon:""},{id:"sponsors",label:"Sponsors",icon:""},{id:"stats",label:"Stats",icon:""},{id:"settings",label:"Settings",icon:""}].map(k=>n.jsxs("button",{onClick:()=>s(k.id),className:`px-4 py-3 font-medium text-sm transition-colors border-b-2 ${r===k.id?"border-coral-500 text-coral-600 bg-white":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-cream-50"}`,children:[n.jsx("span",{className:"mr-2",children:k.icon}),k.label]},k.id))})}),r==="stats"&&n.jsx(yf,{stats:l,currentActivity:i}),r==="episodes"&&n.jsx(zf,{onNotification:g}),r==="search"&&n.jsx(Bf,{onNotification:g,onViewEpisode:async(k,R)=>{try{const d=await be.getEpisode(k);d&&w({...d,initialTimestamp:R})}catch(d){g(`Error loading episode: ${d.message}`,"error")}}}),r==="extraction"&&n.jsx(Qf,{onNotification:g}),r==="speakers"&&n.jsx(Ff,{onNotification:g,onViewEpisode:async(k,R)=>{try{const d=await be.getEpisode(k);d&&w({...d,initialTimestamp:R})}catch(d){g(`Error loading episode: ${d.message}`,"error")}}}),r==="characters"&&n.jsx(Mf,{onNotification:g}),r==="sponsors"&&n.jsx(Of,{onNotification:g}),r==="settings"&&n.jsx(Uf,{onNotification:g})]}),y&&n.jsx(jf,{episode:y,onClose:()=>w(null)}),c&&n.jsx(Af,{message:c.message,type:c.type,onClose:()=>m(null)})]})}function Kf(){return n.jsx(lf,{children:n.jsx(Hf,{})})}ai.createRoot(document.getElementById("root")).render(n.jsx(Qp.StrictMode,{children:n.jsx(Kf,{})}));export{wf as i,vf as t};
